JobCreateRequest:
  type: object
  required:
    - vessel_id
    - certificate_type_id
    - reason
    - target_port
    - target_date
  properties:
    vessel_id:
      type: string
      format: uuid
      example: "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f"
    certificate_type_id:
      type: string
      format: uuid
      example: "01933c5e-7f2b-7a00-8000-1a2b3c4d5e6f"
    reason:
      type: string
      example: "Annual survey due"
    target_port:
      type: string
      example: "Singapore"
    target_date:
      type: string
      format: date
      example: "2026-03-15"
  example:
    vessel_id: "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f"
    certificate_type_id: "01933c5e-7f2b-7a00-8000-1a2b3c4d5e6f"
    reason: "Annual survey due"
    target_port: "Singapore"
    target_date: "2026-03-15"

JobResponse:
  type: object
  properties:
    id:
      $ref: '#/components/schemas/UUID'
    vessel_id:
      $ref: '#/components/schemas/UUID'
    certificate_type_id:
      $ref: '#/components/schemas/UUID'
    reason:
      type: string
    target_port:
      type: string
    target_date:
      type: string
      format: date
    job_status:
      type: string
      enum: [CREATED, GM_APPROVED, TM_PRE_APPROVED, ASSIGNED, SURVEY_DONE, TO_APPROVED, TM_FINAL, PAYMENT_DONE, CERTIFIED, REJECTED]
      example: "CREATED"
    vessel:
      $ref: '#/components/schemas/VesselSummary'
    certificate_type:
      type: object
      properties:
        id:
          $ref: '#/components/schemas/UUID'
        name:
          type: string
    created_at:
      type: string
      format: date-time
  example:
    id: "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f"
    vessel_id: "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f"
    job_status: "CREATED"
    reason: "Annual survey due"
    target_port: "Singapore"
    target_date: "2026-03-15"

JobStatusUpdateRequest:
  type: object
  properties:
    status:
      type: string
      enum: [GM_APPROVED, TM_PRE_APPROVED, ASSIGNED, SURVEY_DONE, TO_APPROVED, TM_FINAL, PAYMENT_DONE, CERTIFIED, REJECTED]
    remarks:
      type: string

AssignSurveyorRequest:
  type: object
  required:
    - surveyorId
  properties:
    surveyorId:
      type: string
      format: uuid
      example: "01933c5e-7f2c-7a00-8000-1a2b3c4d5e6f"

ReassignJobRequest:
  type: object
  required:
    - surveyorId
    - reason
  properties:
    surveyorId:
      type: string
      format: uuid
    reason:
      type: string

EscalateJobRequest:
  type: object
  required:
    - reason
    - target_role
  properties:
    reason:
      type: string
    target_role:
      type: string
      enum: [GM, ADMIN]

JobCancelRequest:
  type: object
  properties:
    reason:
      type: string

AddNoteRequest:
  type: object
  required:
    - note_text
  properties:
    note_text:
      type: string

MessageCreateRequest:
  type: object
  required:
    - content
  properties:
    content:
      type: string

JobHistoryItem:
  type: object
  properties:
    id:
      type: string
      format: uuid
    job_id:
      type: string
      format: uuid
    old_status:
      type: string
      nullable: true
    new_status:
      type: string
    changed_by:
      type: string
      format: uuid
    change_reason:
      type: string
    created_at:
      type: string
      format: date-time
    User:
      type: object
      properties:
        name:
          type: string
        email:
          type: string
        role:
          type: string
  example:
    id: "01933c5e-7f2d-7a00-8000-1a2b3c4d5e6f"
    job_id: "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f"
    old_status: "CREATED"
    new_status: "GM_APPROVED"
    changed_by: "01933c5e-7f2e-7a00-8000-1a2b3c4d5e6f"
    change_reason: "Approved for survey"
    created_at: "2026-02-16T10:00:00Z"
    User:
      name: "John Doe"
      email: "gm@example.com"
      role: "GM"

JobNoteResponse:
  type: object
  properties:
    id:
      type: string
      format: uuid
    job_id:
      type: string
      format: uuid
    user_id:
      type: string
      format: uuid
    note_text:
      type: string
    is_internal:
      type: boolean
    created_at:
      type: string
      format: date-time
  example:
    id: "01933c5e-7f3a-7a00-8000-1a2b3c4d5e6f"
    job_id: "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f"
    user_id: "01933c5e-7f2e-7a00-8000-1a2b3c4d5e6f"
    note_text: "Client confirmed availability"
    is_internal: true
    created_at: "2026-02-16T10:05:00Z"

JobMessageResponse:
  type: object
  properties:
    id:
      type: string
      format: uuid
    job_id:
      type: string
      format: uuid
    sender_id:
      type: string
      format: uuid
    message_text:
      type: string
    is_internal:
      type: boolean
    attachment_url:
      type: string
      format: uri
      nullable: true
    created_at:
      type: string
      format: date-time
    Sender:
      type: object
      properties:
        name:
          type: string
        role:
          type: string
  example:
    id: "01933c5e-7f4a-7a00-8000-1a2b3c4d5e6f"
    job_id: "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f"
    sender_id: "01933c5e-7f2e-7a00-8000-1a2b3c4d5e6f"
    message_text: "Please upload the survey report."
    is_internal: false
    attachment_url: "https://s3.amazonaws.com/bucket/file.pdf"
    created_at: "2026-02-16T10:10:00Z"
    Sender:
      name: "Jane Smith"
      role: "CLIENT"
