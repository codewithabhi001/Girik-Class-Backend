{
  "openapi": "3.0.0",
  "info": {
    "title": "Girik Marine API - To",
    "version": "1.0.0",
    "description": "APIs for **TO** role. Use POST /auth/login first, then Authorize with the token."
  },
  "servers": [
    {
      "url": "http://localhost:3000/api/v1",
      "description": "Local Development"
    },
    {
      "url": "/api/v1",
      "description": "Current Host (Relative)"
    }
  ],
  "tags": [
    {
      "name": "Auth",
      "description": "Authentication & Authorization"
    },
    {
      "name": "Jobs",
      "description": "Job lifecycle management"
    },
    {
      "name": "Vessels",
      "description": "Vessel registry & management"
    },
    {
      "name": "Certificates",
      "description": "Certificate issuance & validation"
    },
    {
      "name": "Payments",
      "description": "Invoicing & payment processing"
    },
    {
      "name": "Dashboard",
      "description": "Role-specific dashboards"
    },
    {
      "name": "Clients",
      "description": "Client & company management"
    },
    {
      "name": "Public",
      "description": "Public verification endpoints (no auth)"
    },
    {
      "name": "Surveyors",
      "description": "Surveyor applications & profile"
    },
    {
      "name": "Surveys",
      "description": "Survey reports & inspections"
    },
    {
      "name": "Checklists",
      "description": "Job inspection checklists"
    },
    {
      "name": "Users",
      "description": "User management"
    },
    {
      "name": "Non-Conformities",
      "description": "NC management"
    },
    {
      "name": "TOCA",
      "description": "Transfer of Class Agreement"
    },
    {
      "name": "Flags",
      "description": "Flag administration"
    },
    {
      "name": "Approvals",
      "description": "Approval workflow"
    },
    {
      "name": "Notifications",
      "description": "System notifications"
    },
    {
      "name": "Documents",
      "description": "Document storage"
    },
    {
      "name": "System",
      "description": "System config & admin"
    },
    {
      "name": "Reports",
      "description": "Management reports"
    },
    {
      "name": "Activity Requests",
      "description": "Client activity requests"
    },
    {
      "name": "Providers",
      "description": "Service providers"
    },
    {
      "name": "Feedback",
      "description": "Customer feedback"
    },
    {
      "name": "Change Requests",
      "description": "Entity change requests"
    },
    {
      "name": "Certificate Templates",
      "description": "Certificate templates"
    },
    {
      "name": "Incidents",
      "description": "Incident reporting"
    },
    {
      "name": "Support",
      "description": "Support tickets"
    },
    {
      "name": "Search",
      "description": "Global search"
    },
    {
      "name": "Compliance",
      "description": "Compliance & GDPR"
    },
    {
      "name": "Mobile",
      "description": "Mobile app sync"
    }
  ],
  "paths": {
    "/activity-requests": {
      "post": {
        "tags": [
          "Activity Requests"
        ],
        "summary": "Create Activity Request",
        "x-roles": [
          "CLIENT",
          "ADMIN",
          "GM",
          "TM"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "activity_type": {
                    "type": "string"
                  },
                  "vessel_id": {
                    "$ref": "#/components/schemas/UUID"
                  },
                  "requested_service": {
                    "type": "string"
                  },
                  "priority": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string"
                  },
                  "location_port": {
                    "type": "string"
                  },
                  "proposed_date": {
                    "type": "string",
                    "format": "date"
                  }
                }
              },
              "example": {
                "activity_type": "INSPECTION",
                "vessel_id": "550e8400-e29b-41d4-a716-446655440000",
                "requested_service": "Annual Survey",
                "priority": "HIGH",
                "description": "Request for annual survey",
                "location_port": "Port of Singapore",
                "proposed_date": "2026-08-15"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Request created"
          }
        }
      },
      "get": {
        "tags": [
          "Activity Requests"
        ],
        "summary": "List Activity Requests",
        "x-roles": [
          "CLIENT",
          "ADMIN",
          "GM",
          "TM",
          "TO"
        ],
        "responses": {
          "200": {
            "description": "List of requests"
          }
        }
      }
    },
    "/activity-requests/{id}": {
      "get": {
        "tags": [
          "Activity Requests"
        ],
        "summary": "Get Activity Request",
        "x-roles": [
          "CLIENT",
          "ADMIN",
          "GM",
          "TM",
          "TO"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Request details"
          }
        }
      },
      "put": {
        "tags": [
          "Activity Requests"
        ],
        "summary": "Update Request Status",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "status": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Status updated"
          }
        }
      }
    },
    "/approvals": {
      "post": {
        "tags": [
          "Approvals"
        ],
        "summary": "Create Approval",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "entity_type": {
                    "type": "string"
                  },
                  "entity_id": {
                    "$ref": "#/components/schemas/UUID"
                  },
                  "approval_type": {
                    "type": "string"
                  },
                  "requested_by": {
                    "$ref": "#/components/schemas/UUID"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Approval created"
          }
        }
      }
    },
    "/approvals/{id}/step": {
      "put": {
        "tags": [
          "Approvals"
        ],
        "summary": "Approval Step",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "status": {
                    "type": "string",
                    "enum": [
                      "APPROVED",
                      "REJECTED"
                    ]
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Step updated"
          }
        }
      }
    },
    "/auth/login": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Login",
        "description": "Authenticate and receive JWT token",
        "x-roles": [
          "PUBLIC"
        ],
        "security": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginRequest"
              },
              "example": {
                "email": "admin@girik.com",
                "password": "admin123"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Login successful",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LoginResponse"
                },
                "example": {
                  "success": true,
                  "data": {
                    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
                    "refreshToken": "refresh_token_here",
                    "user": {
                      "id": "550e8400-e29b-41d4-a716-446655440000",
                      "email": "admin@girik.com",
                      "name": "Admin User",
                      "role": "ADMIN"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "401": {
            "description": "Invalid credentials",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Invalid email or password"
                }
              }
            }
          }
        }
      }
    },
    "/auth/logout": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Logout",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "TA",
          "SURVEYOR",
          "CLIENT"
        ],
        "responses": {
          "200": {
            "description": "Logged out"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/auth/forgot-password": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Forgot Password",
        "x-roles": [
          "PUBLIC"
        ],
        "security": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "email"
                ],
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email"
                  }
                }
              },
              "example": {
                "email": "admin@girik.com"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Reset link sent"
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          }
        }
      }
    },
    "/auth/reset-password": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Reset Password",
        "x-roles": [
          "PUBLIC"
        ],
        "security": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "token",
                  "newPassword"
                ],
                "properties": {
                  "token": {
                    "type": "string"
                  },
                  "newPassword": {
                    "type": "string",
                    "format": "password"
                  }
                }
              },
              "example": {
                "token": "RESET_TOKEN_FROM_EMAIL",
                "newPassword": "NewSecurePass123!"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Password reset"
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          }
        }
      }
    },
    "/auth/refresh-token": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Refresh Token",
        "x-roles": [
          "PUBLIC"
        ],
        "security": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "token"
                ],
                "properties": {
                  "token": {
                    "type": "string"
                  }
                }
              },
              "example": {
                "token": "{{refresh_token}}"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "New tokens"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/certificate-templates": {
      "post": {
        "tags": [
          "Certificate Templates"
        ],
        "summary": "Create Template",
        "x-roles": [
          "ADMIN"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "name",
                  "code"
                ],
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "code": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string"
                  },
                  "sections": {
                    "type": "array"
                  },
                  "status": {
                    "type": "string",
                    "enum": [
                      "ACTIVE",
                      "INACTIVE",
                      "DRAFT"
                    ]
                  }
                }
              },
              "example": {
                "name": "Annual Survey Checklist",
                "code": "ANNUAL-01",
                "description": "Standard annual survey",
                "status": "ACTIVE"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Template created"
          }
        }
      },
      "get": {
        "tags": [
          "Certificate Templates"
        ],
        "summary": "List Templates",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM"
        ],
        "responses": {
          "200": {
            "description": "List of templates"
          }
        }
      }
    },
    "/certificate-templates/{id}": {
      "get": {
        "tags": [
          "Certificate Templates"
        ],
        "summary": "Get Template",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Template details"
          }
        }
      },
      "put": {
        "tags": [
          "Certificate Templates"
        ],
        "summary": "Update Template",
        "x-roles": [
          "ADMIN"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Template updated"
          }
        }
      },
      "delete": {
        "tags": [
          "Certificate Templates"
        ],
        "summary": "Delete Template",
        "x-roles": [
          "ADMIN"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Template deleted"
          }
        }
      }
    },
    "/certificates/verify/{number}": {
      "get": {
        "tags": [
          "Public"
        ],
        "summary": "Verify Certificate (Public)",
        "description": "Public endpoint - no auth required",
        "x-roles": [
          "PUBLIC"
        ],
        "security": [],
        "parameters": [
          {
            "name": "number",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "example": "GIR-CERT-2026-001"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Certificate valid"
          },
          "404": {
            "description": "Certificate not found"
          }
        }
      }
    },
    "/certificates/types": {
      "get": {
        "tags": [
          "Certificates"
        ],
        "summary": "Get Certificate Types",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR",
          "CLIENT"
        ],
        "responses": {
          "200": {
            "description": "List of certificate types",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                },
                "example": {
                  "success": true,
                  "data": [
                    {
                      "id": "550e8400-e29b-41d4-a716-446655440000",
                      "name": "Annual Survey",
                      "code": "ANNUAL"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/certificates": {
      "get": {
        "tags": [
          "Certificates"
        ],
        "summary": "List Certificates",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR",
          "CLIENT"
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "status",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "VALID",
                "EXPIRED",
                "SUSPENDED",
                "REVOKED"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of certificates",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      },
      "post": {
        "tags": [
          "Certificates"
        ],
        "summary": "Generate Certificate",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CertificateGenerateRequest"
              },
              "example": {
                "job_id": "550e8400-e29b-41d4-a716-446655440000",
                "validity_years": 1
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Certificate generated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                },
                "example": {
                  "success": true,
                  "data": {
                    "id": "660e8400-e29b-41d4-a716-446655440001",
                    "certificate_number": "GIR-CERT-2026-001",
                    "status": "VALID"
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          }
        }
      }
    },
    "/certificates/{id}": {
      "get": {
        "tags": [
          "Certificates"
        ],
        "summary": "Get Certificate by ID",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR",
          "CLIENT"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Certificate details"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/certificates/{id}/preview": {
      "get": {
        "tags": [
          "Certificates"
        ],
        "summary": "Certificate Preview",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR",
          "CLIENT"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Preview URL or HTML"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/certificates/{id}/sign": {
      "post": {
        "tags": [
          "Certificates"
        ],
        "summary": "Sign Certificate",
        "x-roles": [
          "ADMIN",
          "GM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CertificateActionRequest"
              },
              "example": {
                "reason": "Certificate approved"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Certificate signed"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/certificates/{id}/suspend": {
      "put": {
        "tags": [
          "Certificates"
        ],
        "summary": "Suspend Certificate",
        "x-roles": [
          "ADMIN",
          "TM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CertificateActionRequest"
              },
              "example": {
                "reason": "Administrative suspension"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Certificate suspended"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/certificates/{id}/revoke": {
      "put": {
        "tags": [
          "Certificates"
        ],
        "summary": "Revoke Certificate",
        "x-roles": [
          "ADMIN",
          "TM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CertificateActionRequest"
              },
              "example": {
                "reason": "Non-compliance"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Certificate revoked"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/certificates/{id}/restore": {
      "put": {
        "tags": [
          "Certificates"
        ],
        "summary": "Restore Certificate",
        "x-roles": [
          "ADMIN",
          "TM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CertificateActionRequest"
              },
              "example": {
                "reason": "Restored"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Certificate restored"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/certificates/{id}/renew": {
      "put": {
        "tags": [
          "Certificates"
        ],
        "summary": "Renew Certificate",
        "x-roles": [
          "ADMIN",
          "TM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CertificateRenewRequest"
              },
              "example": {
                "validity_years": 2,
                "reason": "Standard renewal"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Certificate renewed"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/certificates/{id}/reissue": {
      "post": {
        "tags": [
          "Certificates"
        ],
        "summary": "Reissue Certificate",
        "x-roles": [
          "ADMIN",
          "TM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CertificateActionRequest"
              },
              "example": {
                "reason": "Reissue"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Certificate reissued"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/certificates/{id}/transfer": {
      "post": {
        "tags": [
          "Certificates"
        ],
        "summary": "Transfer Certificate",
        "x-roles": [
          "ADMIN",
          "GM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CertificateActionRequest"
              },
              "example": {
                "reason": "Vessel sold"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Certificate transferred"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/certificates/{id}/extend": {
      "post": {
        "tags": [
          "Certificates"
        ],
        "summary": "Extend Certificate",
        "x-roles": [
          "ADMIN",
          "GM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CertificateActionRequest"
              },
              "example": {
                "reason": "Extension granted"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Certificate extended"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/certificates/{id}/downgrade": {
      "put": {
        "tags": [
          "Certificates"
        ],
        "summary": "Downgrade Certificate",
        "x-roles": [
          "ADMIN",
          "GM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "type": "object",
              "properties": {
                "newTypeId": {
                  "type": "string",
                  "format": "uuid"
                },
                "reason": {
                  "type": "string"
                }
              },
              "example": {
                "newTypeId": "660e8400-e29b-41d4-a716-446655440001",
                "reason": "Downgrade requested"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Certificate downgraded"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/certificates/{id}/history": {
      "get": {
        "tags": [
          "Certificates"
        ],
        "summary": "Certificate History",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR",
          "CLIENT"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Certificate change history"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/change-requests": {
      "post": {
        "tags": [
          "Change Requests"
        ],
        "summary": "Create Change Request",
        "x-roles": [
          "CLIENT",
          "ADMIN",
          "GM",
          "TM"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "entity_type": {
                    "type": "string"
                  },
                  "entity_id": {
                    "$ref": "#/components/schemas/UUID"
                  },
                  "change_description": {
                    "type": "string"
                  },
                  "old_value": {
                    "type": "string"
                  },
                  "new_value": {
                    "type": "string"
                  },
                  "priority": {
                    "type": "string"
                  }
                }
              },
              "example": {
                "entity_type": "VESSEL",
                "entity_id": "550e8400-e29b-41d4-a716-446655440000",
                "change_description": "Update vessel flag state",
                "old_value": "Panama",
                "new_value": "Liberia",
                "priority": "MEDIUM"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Change request created"
          }
        }
      },
      "get": {
        "tags": [
          "Change Requests"
        ],
        "summary": "List Change Requests",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM"
        ],
        "responses": {
          "200": {
            "description": "List of change requests"
          }
        }
      }
    },
    "/change-requests/{id}/approve": {
      "put": {
        "tags": [
          "Change Requests"
        ],
        "summary": "Approve Change Request",
        "x-roles": [
          "ADMIN",
          "GM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "remarks": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Request approved"
          }
        }
      }
    },
    "/change-requests/{id}/reject": {
      "put": {
        "tags": [
          "Change Requests"
        ],
        "summary": "Reject Change Request",
        "x-roles": [
          "ADMIN",
          "GM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "remarks": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Request rejected"
          }
        }
      }
    },
    "/jobs/{jobId}/checklist": {
      "get": {
        "tags": [
          "Checklists"
        ],
        "summary": "Get Checklist",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR",
          "CLIENT"
        ],
        "parameters": [
          {
            "name": "jobId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Checklist for job"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/clients": {
      "post": {
        "tags": [
          "Clients"
        ],
        "summary": "Create Client",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "company_name",
                  "company_code",
                  "email"
                ],
                "properties": {
                  "company_name": {
                    "type": "string",
                    "example": "Acme Shipping Ltd"
                  },
                  "company_code": {
                    "type": "string",
                    "example": "ACME-01"
                  },
                  "email": {
                    "type": "string",
                    "format": "email"
                  },
                  "address": {
                    "type": "string"
                  },
                  "country": {
                    "type": "string"
                  },
                  "phone": {
                    "type": "string"
                  },
                  "contact_person_name": {
                    "type": "string"
                  },
                  "contact_person_email": {
                    "type": "string"
                  },
                  "status": {
                    "type": "string",
                    "enum": [
                      "ACTIVE",
                      "INACTIVE"
                    ]
                  },
                  "user": {
                    "type": "object",
                    "properties": {
                      "name": {
                        "type": "string"
                      },
                      "email": {
                        "type": "string"
                      },
                      "password": {
                        "type": "string"
                      },
                      "role": {
                        "type": "string"
                      }
                    }
                  }
                }
              },
              "example": {
                "company_name": "Acme Shipping Ltd",
                "company_code": "ACME-01",
                "email": "contact@acme.com",
                "address": "123 Harbour Road",
                "country": "Singapore"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Client created"
          }
        }
      },
      "get": {
        "tags": [
          "Clients"
        ],
        "summary": "List Clients",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO"
        ],
        "responses": {
          "200": {
            "description": "List of clients"
          }
        }
      }
    },
    "/clients/{id}": {
      "get": {
        "tags": [
          "Clients"
        ],
        "summary": "Get Client by ID",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Client details"
          }
        }
      },
      "put": {
        "tags": [
          "Clients"
        ],
        "summary": "Update Client",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Client updated"
          }
        }
      },
      "delete": {
        "tags": [
          "Clients"
        ],
        "summary": "Delete Client",
        "x-roles": [
          "ADMIN"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Client deleted"
          }
        }
      }
    },
    "/compliance/export/{id}": {
      "get": {
        "tags": [
          "Compliance"
        ],
        "summary": "Export Compliance Data",
        "x-roles": [
          "ADMIN",
          "CLIENT"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Export data"
          }
        }
      }
    },
    "/compliance/anonymize/{id}": {
      "post": {
        "tags": [
          "Compliance"
        ],
        "summary": "Anonymize Compliance Data",
        "x-roles": [
          "ADMIN"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Data anonymized"
          }
        }
      }
    },
    "/dashboard": {
      "get": {
        "tags": [
          "Dashboard"
        ],
        "summary": "Get Dashboard",
        "description": "Role-specific dashboard summary (jobs pending, certificates expiring, etc.)",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR",
          "CLIENT"
        ],
        "responses": {
          "200": {
            "description": "Dashboard data",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DashboardResponse"
                },
                "example": {
                  "success": true,
                  "data": {
                    "jobsPending": 5,
                    "jobsInProgress": 3,
                    "certificatesExpiring": 2,
                    "paymentsDue": 1
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/documents/{entityType}/{entityId}": {
      "get": {
        "tags": [
          "Documents"
        ],
        "summary": "Get Documents",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR",
          "CLIENT"
        ],
        "parameters": [
          {
            "name": "entityType",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "example": "JOB"
            }
          },
          {
            "name": "entityId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of documents"
          }
        }
      },
      "post": {
        "tags": [
          "Documents"
        ],
        "summary": "Upload Document",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "CLIENT"
        ],
        "parameters": [
          {
            "name": "entityType",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "entityId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "file": {
                    "type": "string",
                    "format": "binary"
                  },
                  "document_type": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Document uploaded"
          }
        }
      }
    },
    "/documents/{id}": {
      "delete": {
        "tags": [
          "Documents"
        ],
        "summary": "Delete Document",
        "x-roles": [
          "ADMIN",
          "GM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Document deleted"
          }
        }
      }
    },
    "/customer-feedback": {
      "get": {
        "tags": [
          "Feedback"
        ],
        "summary": "List All Feedback",
        "x-roles": [
          "ADMIN",
          "GM"
        ],
        "responses": {
          "200": {
            "description": "List of feedback"
          }
        }
      }
    },
    "/customer-feedback/job/{jobId}": {
      "get": {
        "tags": [
          "Feedback"
        ],
        "summary": "Feedback for Job",
        "x-roles": [
          "ADMIN",
          "GM",
          "CLIENT"
        ],
        "parameters": [
          {
            "name": "jobId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Feedback for job"
          }
        }
      }
    },
    "/flags": {
      "post": {
        "tags": [
          "Flags"
        ],
        "summary": "Create Flag",
        "x-roles": [
          "ADMIN"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "flag_name",
                  "country",
                  "authority_name",
                  "contact_email"
                ],
                "properties": {
                  "flag_name": {
                    "type": "string",
                    "example": "Panama"
                  },
                  "country": {
                    "type": "string",
                    "example": "Panama"
                  },
                  "authority_name": {
                    "type": "string",
                    "example": "Panama Maritime Authority"
                  },
                  "contact_email": {
                    "type": "string",
                    "format": "email",
                    "example": "pma@panama.gob.pa"
                  }
                }
              },
              "example": {
                "flag_name": "Panama",
                "country": "Panama",
                "authority_name": "Panama Maritime Authority",
                "contact_email": "pma@panama.gob.pa"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Flag created"
          }
        }
      },
      "get": {
        "tags": [
          "Flags"
        ],
        "summary": "List Flags",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM"
        ],
        "responses": {
          "200": {
            "description": "List of flags"
          }
        }
      }
    },
    "/flags/{id}": {
      "put": {
        "tags": [
          "Flags"
        ],
        "summary": "Update Flag",
        "x-roles": [
          "ADMIN"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "flag_name": {
                    "type": "string"
                  },
                  "country": {
                    "type": "string"
                  },
                  "authority_name": {
                    "type": "string"
                  },
                  "contact_email": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Flag updated"
          }
        }
      }
    },
    "/health": {
      "get": {
        "tags": [
          "Public"
        ],
        "summary": "Health Check",
        "description": "System health - no auth required",
        "x-roles": [
          "PUBLIC"
        ],
        "security": [],
        "responses": {
          "200": {
            "description": "Service is UP",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "example": "UP"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                },
                "example": {
                  "status": "UP",
                  "timestamp": "2026-02-12T10:00:00.000Z"
                }
              }
            }
          }
        }
      }
    },
    "/incidents": {
      "post": {
        "tags": [
          "Incidents"
        ],
        "summary": "Report Incident",
        "x-roles": [
          "CLIENT",
          "ADMIN",
          "GM",
          "TM"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "incident_type": {
                    "type": "string"
                  },
                  "entity_type": {
                    "type": "string"
                  },
                  "entity_id": {
                    "$ref": "#/components/schemas/UUID"
                  },
                  "description": {
                    "type": "string"
                  },
                  "severity": {
                    "type": "string"
                  }
                }
              },
              "example": {
                "incident_type": "SAFETY",
                "entity_type": "JOB",
                "entity_id": "550e8400-e29b-41d4-a716-446655440000",
                "description": "Minor injury during survey",
                "severity": "LOW"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Incident reported"
          }
        }
      },
      "get": {
        "tags": [
          "Incidents"
        ],
        "summary": "List Incidents",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO"
        ],
        "responses": {
          "200": {
            "description": "List of incidents"
          }
        }
      }
    },
    "/incidents/{id}": {
      "get": {
        "tags": [
          "Incidents"
        ],
        "summary": "Get Incident",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Incident details"
          }
        }
      },
      "put": {
        "tags": [
          "Incidents"
        ],
        "summary": "Update Incident Status",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "status": {
                    "type": "string"
                  },
                  "resolution": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Status updated"
          }
        }
      }
    },
    "/jobs": {
      "get": {
        "tags": [
          "Jobs"
        ],
        "summary": "List Jobs",
        "description": "List jobs (filtered by role - CLIENT sees own, SURVEYOR sees assigned)",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR",
          "CLIENT"
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 10
            }
          },
          {
            "name": "status",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "CREATED",
                "GM_APPROVED",
                "TM_PRE_APPROVED",
                "ASSIGNED",
                "SURVEY_DONE",
                "TO_APPROVED",
                "TM_FINAL",
                "PAYMENT_DONE",
                "CERTIFIED",
                "REJECTED"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of jobs",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                },
                "example": {
                  "success": true,
                  "data": [
                    {
                      "id": "550e8400-e29b-41d4-a716-446655440000",
                      "vessel_id": "660e8400-e29b-41d4-a716-446655440001",
                      "job_status": "ASSIGNED",
                      "target_date": "2026-03-15",
                      "vessel": {
                        "vessel_name": "SEA MAJESTY",
                        "imo_number": "IMO9876543"
                      }
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "403": {
            "$ref": "#/components/responses/Forbidden"
          }
        }
      },
      "post": {
        "tags": [
          "Jobs"
        ],
        "summary": "Create Job",
        "x-roles": [
          "ADMIN",
          "GM",
          "CLIENT"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/JobCreateRequest"
              },
              "example": {
                "vessel_id": "550e8400-e29b-41d4-a716-446655440000",
                "certificate_type_id": "660e8400-e29b-41d4-a716-446655440001",
                "reason": "Annual survey and class renewal",
                "target_port": "Port of Singapore",
                "target_date": "2026-03-15"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Job created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                },
                "example": {
                  "success": true,
                  "data": {
                    "id": "770e8400-e29b-41d4-a716-446655440002",
                    "vessel_id": "550e8400-e29b-41d4-a716-446655440000",
                    "certificate_type_id": "660e8400-e29b-41d4-a716-446655440001",
                    "job_status": "CREATED",
                    "target_port": "Port of Singapore",
                    "target_date": "2026-03-15"
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/jobs/{id}": {
      "get": {
        "tags": [
          "Jobs"
        ],
        "summary": "Get Job by ID",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR",
          "CLIENT"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Job details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                },
                "example": {
                  "success": true,
                  "data": {
                    "id": "550e8400-e29b-41d4-a716-446655440000",
                    "vessel_id": "660e8400-e29b-41d4-a716-446655440001",
                    "job_status": "ASSIGNED",
                    "reason": "Annual survey",
                    "target_port": "Port of Singapore",
                    "target_date": "2026-03-15",
                    "vessel": {
                      "vessel_name": "SEA MAJESTY",
                      "imo_number": "IMO9876543"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/jobs/{id}/status": {
      "put": {
        "tags": [
          "Jobs"
        ],
        "summary": "Update Job Status",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/JobStatusUpdateRequest"
              },
              "example": {
                "status": "ASSIGNED",
                "remarks": "Job assigned to surveyor"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Status updated"
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/jobs/{id}/assign": {
      "put": {
        "tags": [
          "Jobs"
        ],
        "summary": "Assign Surveyor",
        "x-roles": [
          "ADMIN",
          "GM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/JobAssignRequest"
              },
              "example": {
                "surveyorId": "770e8400-e29b-41d4-a716-446655440002"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Surveyor assigned"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/jobs/{id}/reassign": {
      "put": {
        "tags": [
          "Jobs"
        ],
        "summary": "Reassign Surveyor",
        "x-roles": [
          "GM",
          "TM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/JobReassignRequest"
              },
              "example": {
                "surveyorId": "770e8400-e29b-41d4-a716-446655440002",
                "reason": "Original surveyor unavailable"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Surveyor reassigned"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/jobs/{id}/escalate": {
      "put": {
        "tags": [
          "Jobs"
        ],
        "summary": "Escalate Job",
        "x-roles": [
          "GM",
          "TM",
          "TO"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/JobEscalateRequest"
              },
              "example": {
                "reason": "Urgent client request",
                "target_role": "GM"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Job escalated"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/jobs/{id}/cancel": {
      "put": {
        "tags": [
          "Jobs"
        ],
        "summary": "Cancel Job",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "CLIENT"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/JobActionRequest"
              },
              "example": {
                "reason": "Client requested cancellation"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Job cancelled"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/jobs/{id}/hold": {
      "put": {
        "tags": [
          "Jobs"
        ],
        "summary": "Hold Job",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/JobActionRequest"
              },
              "example": {
                "reason": "Awaiting documents"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Job held"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/jobs/{id}/resume": {
      "put": {
        "tags": [
          "Jobs"
        ],
        "summary": "Resume Job",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/JobActionRequest"
              },
              "example": {
                "reason": "Documents received"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Job resumed"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/jobs/{id}/clone": {
      "post": {
        "tags": [
          "Jobs"
        ],
        "summary": "Clone Job",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Job cloned"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/jobs/{id}/priority": {
      "put": {
        "tags": [
          "Jobs"
        ],
        "summary": "Update Job Priority",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "priority": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Priority updated"
          }
        }
      }
    },
    "/jobs/{id}/notes": {
      "post": {
        "tags": [
          "Jobs"
        ],
        "summary": "Add Internal Note",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "note": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Note added"
          }
        }
      }
    },
    "/jobs/{id}/messages/external": {
      "get": {
        "tags": [
          "Jobs"
        ],
        "summary": "Get External Messages",
        "x-roles": [
          "CLIENT",
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "External messages"
          }
        }
      }
    },
    "/jobs/{id}/messages/internal": {
      "get": {
        "tags": [
          "Jobs"
        ],
        "summary": "Get Internal Messages",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Internal messages"
          }
        }
      }
    },
    "/jobs/{id}/messages": {
      "post": {
        "tags": [
          "Jobs"
        ],
        "summary": "Send Message",
        "x-roles": [
          "CLIENT",
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "message": {
                    "type": "string"
                  },
                  "attachment": {
                    "type": "string",
                    "format": "binary"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Message sent"
          }
        }
      }
    },
    "/jobs/{id}/history": {
      "get": {
        "tags": [
          "Jobs"
        ],
        "summary": "Get Job History",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Job status history"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/non-conformities": {
      "post": {
        "tags": [
          "Non-Conformities"
        ],
        "summary": "Create NC",
        "x-roles": [
          "SURVEYOR",
          "TO"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "job_id",
                  "description",
                  "severity"
                ],
                "properties": {
                  "job_id": {
                    "$ref": "#/components/schemas/UUID"
                  },
                  "description": {
                    "type": "string"
                  },
                  "severity": {
                    "type": "string",
                    "enum": [
                      "MINOR",
                      "MAJOR",
                      "CRITICAL"
                    ]
                  }
                }
              },
              "example": {
                "job_id": "550e8400-e29b-41d4-a716-446655440000",
                "description": "Crack found on hull plate",
                "severity": "MAJOR"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "NC created"
          }
        }
      }
    },
    "/non-conformities/{id}/close": {
      "put": {
        "tags": [
          "Non-Conformities"
        ],
        "summary": "Close NC",
        "x-roles": [
          "TM",
          "TO"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "closure_remarks"
                ],
                "properties": {
                  "closure_remarks": {
                    "type": "string"
                  }
                }
              },
              "example": {
                "closure_remarks": "Repair completed and verified"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "NC closed"
          }
        }
      }
    },
    "/non-conformities/job/{jobId}": {
      "get": {
        "tags": [
          "Non-Conformities"
        ],
        "summary": "Get NCs by Job",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR",
          "CLIENT"
        ],
        "parameters": [
          {
            "name": "jobId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "NCs for job"
          }
        }
      }
    },
    "/notifications": {
      "get": {
        "tags": [
          "Notifications"
        ],
        "summary": "List Notifications",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR",
          "CLIENT"
        ],
        "responses": {
          "200": {
            "description": "List of notifications"
          }
        }
      }
    },
    "/notifications/{id}/read": {
      "put": {
        "tags": [
          "Notifications"
        ],
        "summary": "Mark Notification Read",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR",
          "CLIENT"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Marked as read"
          }
        }
      }
    },
    "/notifications/read-all": {
      "put": {
        "tags": [
          "Notifications"
        ],
        "summary": "Mark All Read",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR",
          "CLIENT"
        ],
        "responses": {
          "200": {
            "description": "All marked as read"
          }
        }
      }
    },
    "/payments": {
      "get": {
        "tags": [
          "Payments"
        ],
        "summary": "List Payments",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "CLIENT"
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "status",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "UNPAID",
                "PAID",
                "ON_HOLD"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of payments",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                },
                "example": {
                  "success": true,
                  "data": [
                    {
                      "id": "550e8400-e29b-41d4-a716-446655440000",
                      "invoice_number": "INV-2026-001",
                      "amount": 3500,
                      "payment_status": "UNPAID"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/payments/summary": {
      "get": {
        "tags": [
          "Payments"
        ],
        "summary": "Financial Summary",
        "x-roles": [
          "ADMIN",
          "GM",
          "CLIENT"
        ],
        "responses": {
          "200": {
            "description": "Financial summary"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/payments/invoice": {
      "post": {
        "tags": [
          "Payments"
        ],
        "summary": "Create Invoice",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PaymentInvoiceRequest"
              },
              "example": {
                "job_id": "550e8400-e29b-41d4-a716-446655440000",
                "amount": 3500,
                "currency": "USD"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Invoice created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                },
                "example": {
                  "success": true,
                  "data": {
                    "id": "660e8400-e29b-41d4-a716-446655440001",
                    "invoice_number": "INV-2026-001",
                    "amount": 3500,
                    "payment_status": "UNPAID"
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          }
        }
      }
    },
    "/payments/writeoff": {
      "post": {
        "tags": [
          "Payments"
        ],
        "summary": "Write Off Payment",
        "x-roles": [
          "ADMIN"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PaymentWriteoffRequest"
              },
              "example": {
                "paymentId": "550e8400-e29b-41d4-a716-446655440000",
                "reason": "Bad debt"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Payment written off"
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          }
        }
      }
    },
    "/payments/{id}": {
      "get": {
        "tags": [
          "Payments"
        ],
        "summary": "Get Payment by ID",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "CLIENT"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Payment details"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/payments/{id}/pay": {
      "put": {
        "tags": [
          "Payments"
        ],
        "summary": "Mark Payment as Paid",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Payment marked as paid"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/payments/{id}/ledger": {
      "get": {
        "tags": [
          "Payments"
        ],
        "summary": "Get Payment Ledger",
        "x-roles": [
          "ADMIN",
          "GM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Ledger entries"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/providers": {
      "get": {
        "tags": [
          "Providers"
        ],
        "summary": "List Providers",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO"
        ],
        "responses": {
          "200": {
            "description": "List of providers"
          }
        }
      },
      "post": {
        "tags": [
          "Providers"
        ],
        "summary": "Create Provider",
        "x-roles": [
          "ADMIN",
          "GM"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "company_name": {
                    "type": "string"
                  },
                  "service_type": {
                    "type": "string"
                  },
                  "contact_person": {
                    "type": "string"
                  },
                  "email": {
                    "type": "string"
                  },
                  "phone": {
                    "type": "string"
                  }
                }
              },
              "example": {
                "company_name": "Marine Services Co",
                "service_type": "DRY_DOCK",
                "contact_person": "John Smith",
                "email": "john@marineservices.com",
                "phone": "+65 6123 4000"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Provider created"
          }
        }
      }
    },
    "/providers/{id}/status": {
      "put": {
        "tags": [
          "Providers"
        ],
        "summary": "Update Provider Status",
        "x-roles": [
          "ADMIN",
          "GM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "status": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Status updated"
          }
        }
      }
    },
    "/providers/{id}/evaluations": {
      "post": {
        "tags": [
          "Providers"
        ],
        "summary": "Evaluate Provider",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "rating": {
                    "type": "number"
                  },
                  "comment": {
                    "type": "string"
                  }
                }
              },
              "example": {
                "rating": 4.5,
                "comment": "Good quality work"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Evaluation submitted"
          }
        }
      },
      "get": {
        "tags": [
          "Providers"
        ],
        "summary": "Get Provider Evaluations",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of evaluations"
          }
        }
      }
    },
    "/public/certificate/verify/{number}": {
      "get": {
        "tags": [
          "Public"
        ],
        "summary": "Verify Certificate (Public)",
        "description": "No auth. Verify certificate by number.",
        "x-roles": [
          "PUBLIC"
        ],
        "security": [],
        "parameters": [
          {
            "name": "number",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "example": "GIR-CERT-2026-001"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Certificate valid"
          },
          "404": {
            "description": "Certificate not found"
          }
        }
      }
    },
    "/public/vessel/{imo}": {
      "get": {
        "tags": [
          "Public"
        ],
        "summary": "Verify Vessel (Public)",
        "description": "No auth. Verify vessel by IMO number.",
        "x-roles": [
          "PUBLIC"
        ],
        "security": [],
        "parameters": [
          {
            "name": "imo",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "example": "IMO9876543"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Vessel details"
          },
          "404": {
            "description": "Vessel not found"
          }
        }
      }
    },
    "/reports/certificates": {
      "get": {
        "tags": [
          "Reports"
        ],
        "summary": "Certificate Report",
        "x-roles": [
          "ADMIN",
          "GM"
        ],
        "responses": {
          "200": {
            "description": "Certificate report"
          }
        }
      }
    },
    "/reports/surveyors": {
      "get": {
        "tags": [
          "Reports"
        ],
        "summary": "Surveyor Report",
        "x-roles": [
          "ADMIN",
          "GM"
        ],
        "responses": {
          "200": {
            "description": "Surveyor report"
          }
        }
      }
    },
    "/reports/non-conformities": {
      "get": {
        "tags": [
          "Reports"
        ],
        "summary": "NC Report",
        "x-roles": [
          "ADMIN",
          "GM"
        ],
        "responses": {
          "200": {
            "description": "Non-conformity report"
          }
        }
      }
    },
    "/reports/financials": {
      "get": {
        "tags": [
          "Reports"
        ],
        "summary": "Financial Report",
        "x-roles": [
          "ADMIN",
          "GM"
        ],
        "responses": {
          "200": {
            "description": "Financial report"
          }
        }
      }
    },
    "/search": {
      "get": {
        "tags": [
          "Search"
        ],
        "summary": "Global Search",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR",
          "CLIENT"
        ],
        "parameters": [
          {
            "name": "q",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "Search query"
          },
          {
            "name": "type",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "Filter by type (vessels, jobs, etc.)"
          }
        ],
        "responses": {
          "200": {
            "description": "Search results"
          }
        }
      }
    },
    "/support": {
      "post": {
        "tags": [
          "Support"
        ],
        "summary": "Create Support Ticket",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR",
          "CLIENT"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "subject",
                  "description"
                ],
                "properties": {
                  "subject": {
                    "type": "string",
                    "example": "Cannot login"
                  },
                  "description": {
                    "type": "string",
                    "example": "I am getting 401 even with correct password"
                  },
                  "priority": {
                    "type": "string",
                    "enum": [
                      "LOW",
                      "MEDIUM",
                      "HIGH"
                    ]
                  }
                }
              },
              "example": {
                "subject": "Cannot login",
                "description": "I am getting 401 even with correct password",
                "priority": "HIGH"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Ticket created"
          }
        }
      },
      "get": {
        "tags": [
          "Support"
        ],
        "summary": "List Support Tickets",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR",
          "CLIENT"
        ],
        "responses": {
          "200": {
            "description": "List of tickets"
          }
        }
      }
    },
    "/support/{id}": {
      "get": {
        "tags": [
          "Support"
        ],
        "summary": "Get Support Ticket",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR",
          "CLIENT"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Ticket details"
          }
        }
      },
      "put": {
        "tags": [
          "Support"
        ],
        "summary": "Update Ticket Status",
        "x-roles": [
          "ADMIN",
          "GM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "status": {
                    "type": "string",
                    "enum": [
                      "OPEN",
                      "IN_PROGRESS",
                      "RESOLVED",
                      "CLOSED"
                    ]
                  },
                  "internal_note": {
                    "type": "string"
                  }
                }
              },
              "example": {
                "status": "RESOLVED",
                "internal_note": "User error. Reset password."
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Status updated"
          }
        }
      }
    },
    "/surveyors/apply": {
      "post": {
        "tags": [
          "Surveyors"
        ],
        "summary": "Surveyor Apply",
        "description": "Public endpoint - Apply to become a surveyor. Upload CV, ID proof, certificates.",
        "x-roles": [
          "PUBLIC"
        ],
        "security": [],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "required": [
                  "full_name",
                  "email",
                  "phone",
                  "nationality",
                  "qualification",
                  "years_of_experience"
                ],
                "properties": {
                  "full_name": {
                    "type": "string",
                    "example": "John Doe"
                  },
                  "email": {
                    "type": "string",
                    "format": "email",
                    "example": "john.doe@example.com"
                  },
                  "phone": {
                    "type": "string",
                    "example": "+1-234-567-8900"
                  },
                  "nationality": {
                    "type": "string",
                    "example": "United Kingdom"
                  },
                  "qualification": {
                    "type": "string",
                    "example": "Master Mariner (Class 1)"
                  },
                  "years_of_experience": {
                    "type": "integer",
                    "example": 12
                  },
                  "cv": {
                    "type": "string",
                    "format": "binary",
                    "description": "CV/Resume PDF"
                  },
                  "id_proof": {
                    "type": "string",
                    "format": "binary",
                    "description": "ID proof document"
                  },
                  "certificates": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "binary"
                    },
                    "description": "Qualification certificates (max 5)"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Application submitted",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "data": {
                    "id": "550e8400-e29b-41d4-a716-446655440000",
                    "status": "PENDING"
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          }
        }
      }
    },
    "/surveyors": {
      "post": {
        "tags": [
          "Surveyors"
        ],
        "summary": "Create Surveyor",
        "x-roles": [
          "ADMIN",
          "TM"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserCreateRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Surveyor created"
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          }
        }
      }
    },
    "/surveyors/applications": {
      "get": {
        "tags": [
          "Surveyors"
        ],
        "summary": "List Surveyor Applications",
        "x-roles": [
          "ADMIN",
          "TM"
        ],
        "responses": {
          "200": {
            "description": "List of applications"
          }
        }
      }
    },
    "/surveyors/applications/{id}/review": {
      "put": {
        "tags": [
          "Surveyors"
        ],
        "summary": "Review Application",
        "x-roles": [
          "ADMIN",
          "TM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "status"
                ],
                "properties": {
                  "status": {
                    "type": "string",
                    "enum": [
                      "APPROVED",
                      "REJECTED",
                      "DOCUMENTS_REQUIRED"
                    ]
                  },
                  "remarks": {
                    "type": "string"
                  }
                }
              },
              "example": {
                "status": "APPROVED",
                "remarks": "Documents verified"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Application reviewed"
          }
        }
      }
    },
    "/surveyors/{id}/profile": {
      "get": {
        "tags": [
          "Surveyors"
        ],
        "summary": "Get Surveyor Profile",
        "x-roles": [
          "ADMIN",
          "TM",
          "SURVEYOR"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Surveyor profile"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      },
      "put": {
        "tags": [
          "Surveyors"
        ],
        "summary": "Update Surveyor Profile",
        "x-roles": [
          "ADMIN",
          "TM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "license_number": {
                    "type": "string"
                  },
                  "status": {
                    "type": "string",
                    "enum": [
                      "ACTIVE",
                      "INACTIVE"
                    ]
                  }
                }
              },
              "example": {
                "license_number": "SURV-002",
                "status": "ACTIVE"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Profile updated"
          }
        }
      }
    },
    "/surveyors/{id}/location-history": {
      "get": {
        "tags": [
          "Surveyors"
        ],
        "summary": "Get GPS History",
        "x-roles": [
          "ADMIN",
          "TM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Location history"
          }
        }
      }
    },
    "/surveys": {
      "get": {
        "tags": [
          "Surveys"
        ],
        "summary": "List Survey Reports",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO"
        ],
        "responses": {
          "200": {
            "description": "List of survey reports"
          }
        }
      }
    },
    "/surveys/{id}/timeline": {
      "get": {
        "tags": [
          "Surveys"
        ],
        "summary": "Survey Timeline",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Timeline data"
          }
        }
      }
    },
    "/surveys/{id}/violation": {
      "post": {
        "tags": [
          "Surveys"
        ],
        "summary": "Flag Violation",
        "x-roles": [
          "ADMIN",
          "TM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "description": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Violation flagged"
          }
        }
      }
    },
    "/system/health": {
      "get": {
        "tags": [
          "System"
        ],
        "summary": "System Health",
        "x-roles": [
          "PUBLIC"
        ],
        "security": [],
        "responses": {
          "200": {
            "description": "Health status"
          }
        }
      }
    },
    "/system/readiness": {
      "get": {
        "tags": [
          "System"
        ],
        "summary": "Readiness Check",
        "x-roles": [
          "PUBLIC"
        ],
        "security": [],
        "responses": {
          "200": {
            "description": "Ready status"
          }
        }
      }
    },
    "/system/version": {
      "get": {
        "tags": [
          "System"
        ],
        "summary": "API Version",
        "x-roles": [
          "PUBLIC"
        ],
        "security": [],
        "responses": {
          "200": {
            "description": "Version info"
          }
        }
      }
    },
    "/system/metrics": {
      "get": {
        "tags": [
          "System"
        ],
        "summary": "System Metrics",
        "x-roles": [
          "ADMIN"
        ],
        "responses": {
          "200": {
            "description": "Metrics data"
          }
        }
      }
    },
    "/system/audit-logs": {
      "get": {
        "tags": [
          "System"
        ],
        "summary": "Audit Logs",
        "x-roles": [
          "ADMIN"
        ],
        "responses": {
          "200": {
            "description": "Audit log entries"
          }
        }
      }
    },
    "/system/users/{id}/logout": {
      "post": {
        "tags": [
          "System"
        ],
        "summary": "Force User Logout",
        "x-roles": [
          "ADMIN"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "User logged out"
          }
        }
      }
    },
    "/system/migrations": {
      "get": {
        "tags": [
          "System"
        ],
        "summary": "List Migrations",
        "x-roles": [
          "ADMIN"
        ],
        "responses": {
          "200": {
            "description": "Migration status"
          }
        }
      }
    },
    "/system/jobs/failed": {
      "get": {
        "tags": [
          "System"
        ],
        "summary": "Failed Jobs",
        "x-roles": [
          "ADMIN"
        ],
        "responses": {
          "200": {
            "description": "Failed job list"
          }
        }
      }
    },
    "/system/jobs/{id}/retry": {
      "post": {
        "tags": [
          "System"
        ],
        "summary": "Retry Job",
        "x-roles": [
          "ADMIN"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Job retried"
          }
        }
      }
    },
    "/system/maintenance/{action}": {
      "post": {
        "tags": [
          "System"
        ],
        "summary": "Maintenance Action",
        "x-roles": [
          "ADMIN"
        ],
        "parameters": [
          {
            "name": "action",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Action executed"
          }
        }
      }
    },
    "/system/feature-flags": {
      "get": {
        "tags": [
          "System"
        ],
        "summary": "Feature Flags",
        "x-roles": [
          "ADMIN"
        ],
        "responses": {
          "200": {
            "description": "Feature flags"
          }
        }
      }
    },
    "/system/locales": {
      "get": {
        "tags": [
          "System"
        ],
        "summary": "Locales",
        "x-roles": [
          "ADMIN"
        ],
        "responses": {
          "200": {
            "description": "Supported locales"
          }
        }
      }
    },
    "/toca": {
      "post": {
        "tags": [
          "TOCA"
        ],
        "summary": "Create TOCA",
        "x-roles": [
          "TM"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "vessel_id",
                  "losing_class_society",
                  "gaining_class_society",
                  "request_date"
                ],
                "properties": {
                  "vessel_id": {
                    "$ref": "#/components/schemas/UUID"
                  },
                  "losing_class_society": {
                    "type": "string",
                    "example": "Lloyd's Register"
                  },
                  "gaining_class_society": {
                    "type": "string",
                    "example": "DNV"
                  },
                  "request_date": {
                    "type": "string",
                    "format": "date"
                  }
                }
              },
              "example": {
                "vessel_id": "550e8400-e29b-41d4-a716-446655440000",
                "losing_class_society": "Lloyd's Register",
                "gaining_class_society": "DNV",
                "request_date": "2026-06-01"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "TOCA created"
          }
        }
      },
      "get": {
        "tags": [
          "TOCA"
        ],
        "summary": "List TOCAs",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM"
        ],
        "responses": {
          "200": {
            "description": "List of TOCAs"
          }
        }
      }
    },
    "/toca/{id}/status": {
      "put": {
        "tags": [
          "TOCA"
        ],
        "summary": "Update TOCA Status",
        "x-roles": [
          "ADMIN",
          "TM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "status"
                ],
                "properties": {
                  "status": {
                    "type": "string",
                    "enum": [
                      "ACCEPTED",
                      "REJECTED"
                    ]
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Status updated"
          }
        }
      }
    },
    "/users/me": {
      "get": {
        "tags": [
          "Users"
        ],
        "summary": "Get My Profile",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "TA",
          "SURVEYOR",
          "CLIENT"
        ],
        "responses": {
          "200": {
            "description": "Current user profile"
          }
        }
      }
    },
    "/users": {
      "get": {
        "tags": [
          "Users"
        ],
        "summary": "List Users",
        "x-roles": [
          "ADMIN"
        ],
        "responses": {
          "200": {
            "description": "List of users"
          }
        }
      },
      "post": {
        "tags": [
          "Users"
        ],
        "summary": "Create User",
        "x-roles": [
          "ADMIN"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserCreateRequest"
              },
              "example": {
                "name": "Full Name",
                "email": "user@girik.com",
                "password": "Password123!",
                "role": "TM",
                "phone": "+919876543210"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "User created"
          }
        }
      }
    },
    "/users/{id}": {
      "put": {
        "tags": [
          "Users"
        ],
        "summary": "Update User",
        "x-roles": [
          "ADMIN"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "email": {
                    "type": "string"
                  },
                  "role": {
                    "type": "string"
                  },
                  "phone": {
                    "type": "string"
                  },
                  "status": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "User updated"
          }
        }
      },
      "delete": {
        "tags": [
          "Users"
        ],
        "summary": "Delete User",
        "x-roles": [
          "ADMIN"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "User deleted"
          }
        }
      }
    },
    "/users/{id}/status": {
      "put": {
        "tags": [
          "Users"
        ],
        "summary": "Update User Status",
        "x-roles": [
          "ADMIN"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "status"
                ],
                "properties": {
                  "status": {
                    "type": "string",
                    "enum": [
                      "ACTIVE",
                      "SUSPENDED",
                      "INACTIVE"
                    ]
                  }
                }
              },
              "example": {
                "status": "SUSPENDED"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Status updated"
          }
        }
      }
    },
    "/vessels": {
      "get": {
        "tags": [
          "Vessels"
        ],
        "summary": "List Vessels",
        "description": "List vessels (CLIENT sees only their vessels)",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR",
          "CLIENT"
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 10
            }
          },
          {
            "name": "client_id",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of vessels",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                },
                "example": {
                  "success": true,
                  "data": [
                    {
                      "id": "550e8400-e29b-41d4-a716-446655440000",
                      "vessel_name": "SEA MAJESTY",
                      "imo_number": "IMO9876543",
                      "flag_state": "Panama",
                      "ship_type": "Cargo"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      },
      "post": {
        "tags": [
          "Vessels"
        ],
        "summary": "Create Vessel",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/VesselCreateRequest"
              },
              "example": {
                "client_id": "550e8400-e29b-41d4-a716-446655440000",
                "vessel_name": "SEA MAJESTY",
                "imo_number": "IMO9876543",
                "flag_state": "Panama",
                "ship_type": "Cargo",
                "year_built": 2015,
                "gross_tonnage": 25000,
                "net_tonnage": 12000
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Vessel created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                },
                "example": {
                  "success": true,
                  "data": {
                    "id": "660e8400-e29b-41d4-a716-446655440001",
                    "vessel_name": "SEA MAJESTY",
                    "imo_number": "IMO9876543",
                    "flag_state": "Panama"
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          }
        }
      }
    },
    "/vessels/{id}": {
      "get": {
        "tags": [
          "Vessels"
        ],
        "summary": "Get Vessel by ID",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR",
          "CLIENT"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Vessel details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                },
                "example": {
                  "success": true,
                  "data": {
                    "id": "550e8400-e29b-41d4-a716-446655440000",
                    "vessel_name": "SEA MAJESTY",
                    "imo_number": "IMO9876543",
                    "flag_state": "Panama",
                    "ship_type": "Cargo",
                    "Client": {
                      "company_name": "Acme Shipping Ltd"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      },
      "put": {
        "tags": [
          "Vessels"
        ],
        "summary": "Update Vessel",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/VesselUpdateRequest"
              },
              "example": {
                "vessel_name": "SEA MAJESTY II",
                "flag_state": "Liberia"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Vessel updated"
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    }
  },
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "description": "Use token from POST /auth/login"
      }
    },
    "responses": {
      "Unauthorized": {
        "description": "Unauthorized - Token missing or invalid",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ErrorResponse"
            },
            "example": {
              "success": false,
              "message": "Unauthorized - Token missing or invalid"
            }
          }
        }
      },
      "Forbidden": {
        "description": "Forbidden - Insufficient role",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ErrorResponse"
            },
            "example": {
              "success": false,
              "message": "Forbidden - You do not have the required role"
            }
          }
        }
      },
      "NotFound": {
        "description": "Resource not found",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ErrorResponse"
            },
            "example": {
              "success": false,
              "message": "Resource not found"
            }
          }
        }
      },
      "BadRequest": {
        "description": "Validation error",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ErrorResponse"
            },
            "example": {
              "success": false,
              "message": "Validation Error",
              "error": "vessel_id is required"
            }
          }
        }
      }
    },
    "schemas": {
      "UserCreateRequest": {
        "type": "object",
        "required": [
          "name",
          "email",
          "password",
          "role"
        ],
        "properties": {
          "name": {
            "type": "string",
            "example": "John Doe"
          },
          "email": {
            "type": "string",
            "format": "email",
            "example": "user@girik.com"
          },
          "password": {
            "type": "string",
            "format": "password",
            "example": "Password123!"
          },
          "role": {
            "type": "string",
            "enum": [
              "ADMIN",
              "GM",
              "TM",
              "TO",
              "TA",
              "SURVEYOR",
              "CLIENT",
              "FLAG_ADMIN"
            ],
            "example": "SURVEYOR"
          },
          "phone": {
            "type": "string",
            "example": "+919876543210"
          },
          "client_id": {
            "$ref": "#/components/schemas/UUID"
          }
        }
      },
      "LoginRequest": {
        "type": "object",
        "required": [
          "email",
          "password"
        ],
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "example": "admin@girik.com"
          },
          "password": {
            "type": "string",
            "format": "password",
            "example": "admin123"
          }
        }
      },
      "LoginResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "data": {
            "type": "object",
            "properties": {
              "token": {
                "type": "string",
                "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
              },
              "refreshToken": {
                "type": "string"
              },
              "user": {
                "type": "object",
                "properties": {
                  "id": {
                    "$ref": "#/components/schemas/UUID"
                  },
                  "email": {
                    "type": "string"
                  },
                  "name": {
                    "type": "string"
                  },
                  "role": {
                    "type": "string",
                    "enum": [
                      "ADMIN",
                      "GM",
                      "TM",
                      "TO",
                      "TA",
                      "SURVEYOR",
                      "CLIENT",
                      "FLAG_ADMIN"
                    ]
                  }
                }
              }
            }
          }
        }
      },
      "CertificateGenerateRequest": {
        "type": "object",
        "required": [
          "job_id"
        ],
        "properties": {
          "job_id": {
            "$ref": "#/components/schemas/UUID",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "validity_years": {
            "type": "integer",
            "minimum": 1,
            "maximum": 5,
            "example": 1
          }
        }
      },
      "CertificateActionRequest": {
        "type": "object",
        "required": [
          "reason"
        ],
        "properties": {
          "reason": {
            "type": "string",
            "example": "Administrative suspension"
          }
        }
      },
      "CertificateRenewRequest": {
        "type": "object",
        "required": [
          "validity_years",
          "reason"
        ],
        "properties": {
          "validity_years": {
            "type": "integer",
            "minimum": 1,
            "maximum": 5,
            "example": 2
          },
          "reason": {
            "type": "string",
            "example": "Standard renewal"
          }
        }
      },
      "CertificateResponse": {
        "type": "object",
        "properties": {
          "id": {
            "$ref": "#/components/schemas/UUID"
          },
          "job_id": {
            "$ref": "#/components/schemas/UUID"
          },
          "vessel_id": {
            "$ref": "#/components/schemas/UUID"
          },
          "certificate_type_id": {
            "$ref": "#/components/schemas/UUID"
          },
          "certificate_number": {
            "type": "string",
            "example": "GIR-CERT-2026-001"
          },
          "issue_date": {
            "type": "string",
            "format": "date"
          },
          "expiry_date": {
            "type": "string",
            "format": "date"
          },
          "status": {
            "type": "string",
            "enum": [
              "VALID",
              "EXPIRED",
              "SUSPENDED",
              "REVOKED"
            ]
          },
          "qr_code_url": {
            "type": "string"
          },
          "pdf_file_url": {
            "type": "string"
          }
        }
      },
      "CertificateTypeResponse": {
        "type": "object",
        "properties": {
          "id": {
            "$ref": "#/components/schemas/UUID"
          },
          "name": {
            "type": "string"
          },
          "code": {
            "type": "string"
          },
          "description": {
            "type": "string"
          }
        }
      },
      "UUID": {
        "type": "string",
        "format": "uuid",
        "example": "550e8400-e29b-41d4-a716-446655440000"
      },
      "Date": {
        "type": "string",
        "format": "date",
        "example": "2026-03-15"
      },
      "DateTime": {
        "type": "string",
        "format": "date-time",
        "example": "2026-03-15T10:00:00.000Z"
      },
      "ErrorResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": false
          },
          "message": {
            "type": "string",
            "example": "Internal Server Error"
          },
          "error": {
            "type": "string",
            "description": "Validation or error detail"
          }
        }
      },
      "SuccessResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "data": {
            "type": "object",
            "description": "Response payload"
          },
          "message": {
            "type": "string",
            "example": "Operation successful"
          }
        }
      },
      "PaginationMeta": {
        "type": "object",
        "properties": {
          "page": {
            "type": "integer",
            "example": 1
          },
          "limit": {
            "type": "integer",
            "example": 10
          },
          "total": {
            "type": "integer",
            "example": 50
          },
          "totalPages": {
            "type": "integer",
            "example": 5
          }
        }
      },
      "PaginationResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "data": {
            "type": "array",
            "items": {}
          },
          "meta": {
            "$ref": "#/components/schemas/PaginationMeta"
          }
        }
      },
      "DashboardResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "data": {
            "type": "object",
            "description": "Role-specific dashboard summary",
            "properties": {
              "jobsPending": {
                "type": "integer",
                "example": 5
              },
              "jobsInProgress": {
                "type": "integer",
                "example": 3
              },
              "certificatesExpiring": {
                "type": "integer",
                "example": 2
              },
              "paymentsDue": {
                "type": "integer",
                "example": 1
              }
            }
          }
        }
      },
      "JobCreateRequest": {
        "type": "object",
        "required": [
          "vessel_id",
          "certificate_type_id",
          "reason",
          "target_port",
          "target_date"
        ],
        "properties": {
          "vessel_id": {
            "$ref": "#/components/schemas/UUID",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "certificate_type_id": {
            "$ref": "#/components/schemas/UUID",
            "example": "660e8400-e29b-41d4-a716-446655440001"
          },
          "reason": {
            "type": "string",
            "example": "Annual survey and class renewal"
          },
          "target_port": {
            "type": "string",
            "example": "Port of Singapore"
          },
          "target_date": {
            "type": "string",
            "format": "date",
            "example": "2026-03-15"
          }
        }
      },
      "JobAssignRequest": {
        "type": "object",
        "required": [
          "surveyorId"
        ],
        "properties": {
          "surveyorId": {
            "$ref": "#/components/schemas/UUID",
            "example": "770e8400-e29b-41d4-a716-446655440002"
          }
        }
      },
      "JobStatusUpdateRequest": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string",
            "enum": [
              "CREATED",
              "GM_APPROVED",
              "TM_PRE_APPROVED",
              "ASSIGNED",
              "SURVEY_DONE",
              "TO_APPROVED",
              "TM_FINAL",
              "PAYMENT_DONE",
              "CERTIFIED",
              "REJECTED"
            ],
            "example": "ASSIGNED"
          },
          "remarks": {
            "type": "string",
            "example": "Job assigned to surveyor"
          }
        }
      },
      "JobReassignRequest": {
        "type": "object",
        "required": [
          "surveyorId",
          "reason"
        ],
        "properties": {
          "surveyorId": {
            "$ref": "#/components/schemas/UUID"
          },
          "reason": {
            "type": "string",
            "example": "Original surveyor unavailable"
          }
        }
      },
      "JobEscalateRequest": {
        "type": "object",
        "required": [
          "reason",
          "target_role"
        ],
        "properties": {
          "reason": {
            "type": "string",
            "example": "Urgent client request"
          },
          "target_role": {
            "type": "string",
            "enum": [
              "GM",
              "ADMIN"
            ],
            "example": "GM"
          }
        }
      },
      "JobActionRequest": {
        "type": "object",
        "properties": {
          "reason": {
            "type": "string",
            "example": "Client requested cancellation"
          }
        }
      },
      "VesselSummary": {
        "type": "object",
        "properties": {
          "id": {
            "$ref": "#/components/schemas/UUID"
          },
          "vessel_name": {
            "type": "string",
            "example": "SEA MAJESTY"
          },
          "imo_number": {
            "type": "string",
            "example": "IMO9876543"
          },
          "flag_state": {
            "type": "string",
            "example": "Panama"
          }
        }
      },
      "JobResponse": {
        "type": "object",
        "properties": {
          "id": {
            "$ref": "#/components/schemas/UUID"
          },
          "vessel_id": {
            "$ref": "#/components/schemas/UUID"
          },
          "certificate_type_id": {
            "$ref": "#/components/schemas/UUID"
          },
          "reason": {
            "type": "string"
          },
          "target_port": {
            "type": "string"
          },
          "target_date": {
            "type": "string",
            "format": "date"
          },
          "job_status": {
            "type": "string",
            "enum": [
              "CREATED",
              "GM_APPROVED",
              "TM_PRE_APPROVED",
              "ASSIGNED",
              "SURVEY_DONE",
              "TO_APPROVED",
              "TM_FINAL",
              "PAYMENT_DONE",
              "CERTIFIED",
              "REJECTED"
            ]
          },
          "vessel": {
            "$ref": "#/components/schemas/VesselSummary"
          },
          "surveyor": {
            "type": "object",
            "properties": {
              "id": {
                "$ref": "#/components/schemas/UUID"
              },
              "name": {
                "type": "string"
              }
            }
          },
          "createdAt": {
            "$ref": "#/components/schemas/DateTime"
          }
        }
      },
      "PaymentInvoiceRequest": {
        "type": "object",
        "required": [
          "job_id",
          "amount"
        ],
        "properties": {
          "job_id": {
            "$ref": "#/components/schemas/UUID",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "amount": {
            "type": "number",
            "format": "double",
            "example": 3500
          },
          "currency": {
            "type": "string",
            "default": "USD",
            "example": "USD"
          }
        }
      },
      "PaymentWriteoffRequest": {
        "type": "object",
        "required": [
          "paymentId",
          "reason"
        ],
        "properties": {
          "paymentId": {
            "$ref": "#/components/schemas/UUID"
          },
          "reason": {
            "type": "string",
            "example": "Bad debt"
          }
        }
      },
      "PaymentResponse": {
        "type": "object",
        "properties": {
          "id": {
            "$ref": "#/components/schemas/UUID"
          },
          "job_id": {
            "$ref": "#/components/schemas/UUID"
          },
          "invoice_number": {
            "type": "string",
            "example": "INV-2026-001"
          },
          "amount": {
            "type": "number"
          },
          "currency": {
            "type": "string"
          },
          "payment_status": {
            "type": "string",
            "enum": [
              "UNPAID",
              "PAID",
              "ON_HOLD"
            ]
          },
          "payment_date": {
            "type": "string",
            "format": "date-time"
          },
          "receipt_url": {
            "type": "string"
          }
        }
      },
      "VesselCreateRequest": {
        "type": "object",
        "required": [
          "client_id",
          "vessel_name",
          "imo_number",
          "flag_state",
          "ship_type"
        ],
        "properties": {
          "client_id": {
            "$ref": "#/components/schemas/UUID",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "vessel_name": {
            "type": "string",
            "example": "SEA MAJESTY"
          },
          "imo_number": {
            "type": "string",
            "example": "IMO9876543"
          },
          "call_sign": {
            "type": "string",
            "example": "HPAB"
          },
          "mmsi_number": {
            "type": "string",
            "example": "370961000"
          },
          "flag_state": {
            "type": "string",
            "example": "Panama"
          },
          "port_of_registry": {
            "type": "string"
          },
          "year_built": {
            "type": "integer",
            "example": 2015
          },
          "ship_type": {
            "type": "string",
            "example": "Cargo"
          },
          "gross_tonnage": {
            "type": "number",
            "example": 25000
          },
          "net_tonnage": {
            "type": "number",
            "example": 12000
          },
          "deadweight": {
            "type": "number"
          },
          "class_status": {
            "type": "string",
            "enum": [
              "ACTIVE",
              "SUSPENDED",
              "WITHDRAWN"
            ]
          },
          "current_class_society": {
            "type": "string"
          },
          "engine_type": {
            "type": "string"
          },
          "builder_name": {
            "type": "string"
          }
        }
      },
      "VesselUpdateRequest": {
        "type": "object",
        "properties": {
          "client_id": {
            "$ref": "#/components/schemas/UUID"
          },
          "vessel_name": {
            "type": "string"
          },
          "imo_number": {
            "type": "string"
          },
          "call_sign": {
            "type": "string"
          },
          "mmsi_number": {
            "type": "string"
          },
          "flag_state": {
            "type": "string"
          },
          "port_of_registry": {
            "type": "string"
          },
          "year_built": {
            "type": "integer"
          },
          "ship_type": {
            "type": "string"
          },
          "gross_tonnage": {
            "type": "number"
          },
          "net_tonnage": {
            "type": "number"
          },
          "deadweight": {
            "type": "number"
          },
          "class_status": {
            "type": "string",
            "enum": [
              "ACTIVE",
              "SUSPENDED",
              "WITHDRAWN"
            ]
          },
          "current_class_society": {
            "type": "string"
          },
          "engine_type": {
            "type": "string"
          },
          "builder_name": {
            "type": "string"
          }
        }
      },
      "VesselResponse": {
        "type": "object",
        "properties": {
          "id": {
            "$ref": "#/components/schemas/UUID"
          },
          "client_id": {
            "$ref": "#/components/schemas/UUID"
          },
          "vessel_name": {
            "type": "string"
          },
          "imo_number": {
            "type": "string"
          },
          "call_sign": {
            "type": "string"
          },
          "mmsi_number": {
            "type": "string"
          },
          "flag_state": {
            "type": "string"
          },
          "port_of_registry": {
            "type": "string"
          },
          "year_built": {
            "type": "integer"
          },
          "ship_type": {
            "type": "string"
          },
          "gross_tonnage": {
            "type": "number"
          },
          "net_tonnage": {
            "type": "number"
          },
          "deadweight": {
            "type": "number"
          },
          "class_status": {
            "type": "string",
            "enum": [
              "ACTIVE",
              "SUSPENDED",
              "WITHDRAWN"
            ]
          },
          "current_class_society": {
            "type": "string"
          },
          "engine_type": {
            "type": "string"
          },
          "builder_name": {
            "type": "string"
          },
          "Client": {
            "type": "object",
            "properties": {
              "id": {
                "$ref": "#/components/schemas/UUID"
              },
              "company_name": {
                "type": "string"
              }
            }
          }
        }
      }
    }
  },
  "security": [
    {
      "bearerAuth": []
    }
  ]
}