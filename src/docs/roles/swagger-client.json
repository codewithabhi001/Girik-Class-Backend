{
  "openapi": "3.0.0",
  "info": {
    "title": "GIRIK API - CLIENT",
    "version": "1.0.0",
    "description": "# üö¢ Marine Certification and Operations Management System\n\nWelcome to the GIRIK Backend API. This documentation covers all interactions with the system.\n\n---\n\n## üìã Quick Start\n\n<details>\n<summary>üîê <b>Authentication Flow</b> (Click to expand)</summary>\n\n1. **Register** a new account or **Login** with existing credentials.\n2. Receive a **JWT Token**.\n3. Use the token in the `Authorization` header: `Bearer <token>`.\n\n</details>\n\n<details>\n<summary>üåê <b>Public Verification</b> (Click to expand)</summary>\n\nanyone can verify certificates and vessel details using the public endpoints without logging in.\n\n</details>\n"
  },
  "servers": [
    {
      "url": "http://localhost:3000/api/v1",
      "description": "Local Development Server"
    },
    {
      "url": "https://api.girik.com/api/v1",
      "description": "Production Server"
    }
  ],
  "tags": [
    {
      "name": "üîê Authentication",
      "description": "Public endpoints for user authentication and session management"
    },
    {
      "name": "üåê Public Access",
      "description": "Publicly accessible endpoints for verification (No Auth Required)"
    },
    {
      "name": "üè¢ Client Portal",
      "description": "Client dashboard and view"
    },
    {
      "name": "üìù Activity Requests",
      "description": "Client activity requests"
    },
    {
      "name": "üí¨ Feedback",
      "description": "Customer feedback"
    }
  ],
  "paths": {
    "/public/certificate/verify/{number}": {
      "get": {
        "tags": [
          "üåê Public Access"
        ],
        "summary": "Verify Certificate (Public)",
        "description": "Verify the validity of a certificate by its unique number. No login required.",
        "security": [],
        "parameters": [
          {
            "in": "path",
            "name": "number",
            "schema": {
              "type": "string"
            },
            "required": true,
            "description": "Unique Certificate Number (e.g., CERT-2024-001)"
          }
        ],
        "responses": {
          "200": {
            "description": "‚úÖ Certificate found and valid",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "isValid": {
                      "type": "boolean",
                      "example": true
                    },
                    "certificate": {
                      "type": "object",
                      "properties": {
                        "number": {
                          "type": "string"
                        },
                        "vesselName": {
                          "type": "string"
                        },
                        "issueDate": {
                          "type": "string",
                          "format": "date"
                        },
                        "expiryDate": {
                          "type": "string",
                          "format": "date"
                        },
                        "status": {
                          "type": "string",
                          "example": "VALID"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "üîç Certificate not found"
          }
        }
      }
    },
    "/public/vessel/{imo}": {
      "get": {
        "tags": [
          "üåê Public Access"
        ],
        "summary": "Verify Vessel (Public)",
        "description": "Get basic public details of a vessel by its IMO number.",
        "security": [],
        "parameters": [
          {
            "in": "path",
            "name": "imo",
            "schema": {
              "type": "string"
            },
            "required": true,
            "description": "Vessel IMO Number"
          }
        ],
        "responses": {
          "200": {
            "description": "‚úÖ Vessel found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "name": {
                      "type": "string"
                    },
                    "imo": {
                      "type": "string"
                    },
                    "flag": {
                      "type": "string"
                    },
                    "status": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "üîç Vessel not found"
          }
        }
      }
    },
    "/auth/login": {
      "post": {
        "tags": [
          "üîê Authentication"
        ],
        "summary": "User Login",
        "description": "Authenticate with email and password to receive a JWT access token.",
        "security": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "email",
                  "password"
                ],
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email",
                    "example": "admin@girik.com"
                  },
                  "password": {
                    "type": "string",
                    "format": "password",
                    "example": "password123"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "‚úÖ Login successful",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "token": {
                      "type": "string",
                      "description": "JWT Access Token"
                    },
                    "user": {
                      "$ref": "#/components/schemas/User"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "‚ùå Invalid credentials"
          }
        }
      }
    },
    "/auth/register": {
      "post": {
        "tags": [
          "üîê Authentication"
        ],
        "summary": "Register New User",
        "description": "Create a new user account.",
        "security": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "name",
                  "email",
                  "password"
                ],
                "properties": {
                  "name": {
                    "type": "string",
                    "example": "New User"
                  },
                  "email": {
                    "type": "string",
                    "format": "email",
                    "example": "user@example.com"
                  },
                  "password": {
                    "type": "string",
                    "format": "password",
                    "example": "securePass123"
                  },
                  "phone": {
                    "type": "string",
                    "example": "+1234567890"
                  },
                  "role": {
                    "type": "string",
                    "enum": [
                      "CLIENT",
                      "SURVEYOR"
                    ],
                    "default": "CLIENT"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "‚úÖ User created successfully"
          },
          "400": {
            "description": "‚ùå Validation error or email exists"
          }
        }
      }
    },
    "/auth/forgot-password": {
      "post": {
        "tags": [
          "üîê Authentication"
        ],
        "summary": "Forgot Password",
        "description": "Initiate password reset process via email.",
        "security": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "email"
                ],
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email",
                    "example": "forgot@example.com"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "‚úÖ Reset email sent"
          }
        }
      }
    },
    "/auth/reset-password": {
      "post": {
        "tags": [
          "üîê Authentication"
        ],
        "summary": "Reset Password",
        "description": "Complete password reset using token received in email.",
        "security": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "token",
                  "newPassword"
                ],
                "properties": {
                  "token": {
                    "type": "string",
                    "description": "Reset token from email"
                  },
                  "newPassword": {
                    "type": "string",
                    "format": "password"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "‚úÖ Password reset successful"
          }
        }
      }
    },
    "/auth/refresh-token": {
      "post": {
        "tags": [
          "üîê Authentication"
        ],
        "summary": "Refresh Access Token",
        "description": "Get a new access token using a valid refresh token (usually via cookie or body).",
        "security": [],
        "responses": {
          "200": {
            "description": "‚úÖ Token refreshed",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "token": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/client/dashboard": {
      "get": {
        "tags": [
          "üè¢ Client Portal"
        ],
        "summary": "Client Dashboard",
        "responses": {
          "200": {
            "description": "Success"
          }
        }
      }
    },
    "/client/jobs": {
      "get": {
        "tags": [
          "üè¢ Client Portal"
        ],
        "summary": "Client Jobs",
        "responses": {
          "200": {
            "description": "Success"
          }
        }
      }
    },
    "/client/certificates": {
      "get": {
        "tags": [
          "üè¢ Client Portal"
        ],
        "summary": "Client Certificates",
        "responses": {
          "200": {
            "description": "Success"
          }
        }
      }
    },
    "/activity-requests": {
      "post": {
        "tags": [
          "üìù Activity Requests"
        ],
        "summary": "Create Request",
        "responses": {
          "201": {
            "description": "Created"
          }
        }
      },
      "get": {
        "tags": [
          "üìù Activity Requests"
        ],
        "summary": "List Requests",
        "responses": {
          "200": {
            "description": "Success"
          }
        }
      }
    },
    "/activity-requests/{id}": {
      "get": {
        "tags": [
          "üìù Activity Requests"
        ],
        "summary": "Get Request",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success"
          }
        }
      }
    },
    "/activity-requests/{id}/approve": {
      "post": {
        "tags": [
          "üìù Activity Requests"
        ],
        "summary": "Approve Request",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Approved"
          }
        }
      }
    },
    "/activity-requests/{id}/reject": {
      "post": {
        "tags": [
          "üìù Activity Requests"
        ],
        "summary": "Reject Request",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Rejected"
          }
        }
      }
    },
    "/customer-feedback": {
      "post": {
        "tags": [
          "üí¨ Feedback"
        ],
        "summary": "Submit Feedback",
        "responses": {
          "201": {
            "description": "Submitted"
          }
        }
      },
      "get": {
        "tags": [
          "üí¨ Feedback"
        ],
        "summary": "Get All Feedback",
        "responses": {
          "200": {
            "description": "Success"
          }
        }
      }
    },
    "/customer-feedback/job/{jobId}": {
      "get": {
        "tags": [
          "üí¨ Feedback"
        ],
        "summary": "Get Job Feedback",
        "parameters": [
          {
            "name": "jobId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success"
          }
        }
      }
    }
  },
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      }
    },
    "schemas": {
      "User": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "name": {
            "type": "string"
          },
          "email": {
            "type": "string"
          },
          "role": {
            "type": "string",
            "enum": [
              "ADMIN",
              "GM",
              "TM",
              "TO",
              "TA",
              "SURVEYOR",
              "CLIENT",
              "FLAG_ADMIN"
            ]
          }
        }
      }
    }
  }
}