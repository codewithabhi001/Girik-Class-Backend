paths:
  /change-requests:
    get:
      summary: List Change Requests
      description: Retrieve a list of all system entity change requests.
      tags: [Change Requests]
      security:
        - bearerAuth: []
      x-roles: [ADMIN, GM, TM]
      responses:
        '200':
          description: List of change requests
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

    post:
      summary: Create Change Request
      description: Submit a request to change an existing system entity (e.g., vessel name update).
      tags: [Change Requests]
      security:
        - bearerAuth: []
      x-roles: [CLIENT, ADMIN, GM, TM]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [entity_type, entity_id, change_description]
              properties:
                entity_type:
                  type: string
                  enum: [VESSEL, CLIENT, USER, OTHER]
                entity_id:
                  type: string
                  format: uuid
                change_description:
                  type: string
                old_value:
                  type: string
                new_value:
                  type: string
      responses:
        '201':
          description: Request created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /change-requests/{id}/approve:
    put:
      summary: Approve Change Request
      description: Approve and execute the requested change.
      tags: [Change Requests]
      security:
        - bearerAuth: []
      x-roles: [ADMIN, GM]
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                remarks:
                  type: string
      responses:
        '200':
          description: Request approved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /change-requests/{id}/reject:
    put:
      summary: Reject Change Request
      description: Deny the requested change.
      tags: [Change Requests]
      security:
        - bearerAuth: []
      x-roles: [ADMIN, GM]
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                remarks:
                  type: string
      responses:
        '200':
          description: Request rejected
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
