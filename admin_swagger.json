{
  "openapi": "3.0.3",
  "info": {
    "title": "Girik Marine Backend API (ADMIN view)",
    "description": "Production-grade API documentation for Girik Marine Backend.\nUse role-specific docs: `/api-docs/admin`, `/api-docs/gm`, `/api-docs/tm`, `/api-docs/surveyor`, `/api-docs/client`\n\n\n**Filtered view:** Only endpoints accessible to role **ADMIN**.",
    "version": "1.0.0",
    "contact": {
      "name": "Girik Marine"
    }
  },
  "servers": [
    {
      "url": "/",
      "description": "Relative (same host)"
    },
    {
      "url": "http://localhost:3000",
      "description": "Local development"
    }
  ],
  "security": [
    {
      "bearerAuth": []
    }
  ],
  "tags": [
    {
      "name": "Auth",
      "description": "Authentication and session management"
    },
    {
      "name": "Public",
      "description": "Public APIs (no auth)"
    },
    {
      "name": "Jobs",
      "description": "Job lifecycle management"
    },
    {
      "name": "Vessels",
      "description": "Vessel registry and management"
    },
    {
      "name": "Certificates",
      "description": "Certificate management and verification"
    },
    {
      "name": "Payments",
      "description": "Payment and invoice management"
    },
    {
      "name": "Dashboard",
      "description": "Role-based dashboard data"
    },
    {
      "name": "Clients",
      "description": "Client management"
    },
    {
      "name": "Health",
      "description": "Health check"
    },
    {
      "name": "Surveys",
      "description": "Survey management"
    },
    {
      "name": "Surveyors",
      "description": "Surveyor management"
    },
    {
      "name": "Checklists",
      "description": "Checklist operations"
    },
    {
      "name": "Checklist Templates",
      "description": "Checklist template management"
    },
    {
      "name": "Support",
      "description": "Support tickets"
    },
    {
      "name": "Search",
      "description": "Global search"
    },
    {
      "name": "Compliance",
      "description": "Compliance and data export"
    },
    {
      "name": "Notifications",
      "description": "User notifications"
    },
    {
      "name": "Users",
      "description": "User management"
    },
    {
      "name": "Documents",
      "description": "Document upload and management"
    },
    {
      "name": "System",
      "description": "System administration"
    },
    {
      "name": "Reports",
      "description": "Reports"
    },
    {
      "name": "Non-Conformities",
      "description": "NC management"
    },
    {
      "name": "TOCA",
      "description": "Transfer of Class"
    },
    {
      "name": "Flags",
      "description": "Flag administration"
    },
    {
      "name": "Approvals",
      "description": "Approval workflows"
    },
    {
      "name": "Change Requests",
      "description": "Change requests"
    },
    {
      "name": "Certificate Templates",
      "description": "Certificate template management"
    },
    {
      "name": "Incidents",
      "description": "Incident reporting"
    },
    {
      "name": "Activity Requests",
      "description": "Activity planning requests"
    },
    {
      "name": "Feedback",
      "description": "Customer feedback"
    },
    {
      "name": "Contact",
      "description": "Website contact / enquiry management"
    }
  ],
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "description": "JWT access token from login or refresh-token. Use in header: Authorization: Bearer &lt;accessToken&gt;"
      }
    },
    "schemas": {
      "ErrorResponse": {
        "type": "object",
        "required": [
          "success",
          "message"
        ],
        "properties": {
          "success": {
            "type": "boolean",
            "example": false
          },
          "message": {
            "type": "string",
            "example": "Validation Error"
          },
          "error": {
            "type": "string",
            "description": "Detailed error message (e.g. from Joi validation)"
          }
        },
        "example": {
          "success": false,
          "message": "Validation Error",
          "error": "vessel_id is required"
        }
      },
      "LoginRequest": {
        "type": "object",
        "required": [
          "email",
          "password"
        ],
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "example": "admin@girik.com"
          },
          "password": {
            "type": "string",
            "format": "password",
            "example": "SecurePass123!"
          }
        },
        "example": {
          "email": "admin@girik.com",
          "password": "SecurePass123!"
        }
      },
      "LoginResponse": {
        "type": "object",
        "description": "Returns user and both tokens. Use accessToken for API calls (Bearer header); use refreshToken only at POST /auth/refresh-token. Store tokens securely.",
        "properties": {
          "user": {
            "$ref": "#/components/schemas/UserSummary"
          },
          "accessToken": {
            "type": "string",
            "description": "Short-lived JWT for API auth. Send in header: Authorization Bearer &lt;accessToken&gt;",
            "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
          },
          "refreshToken": {
            "type": "string",
            "description": "Long-lived JWT; use only to get new access token via POST /auth/refresh-token",
            "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
          }
        },
        "example": {
          "user": {
            "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
            "name": "John Doe",
            "email": "admin@girik.com",
            "role": "CLIENT"
          },
          "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
          "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
        }
      },
      "LogoutResponse": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string",
            "example": "Logged out successfully"
          },
          "accessToken": {
            "type": "string",
            "nullable": true,
            "description": "Always null after logout"
          },
          "refreshToken": {
            "type": "string",
            "nullable": true,
            "description": "Always null after logout"
          }
        }
      },
      "RefreshTokenRequest": {
        "type": "object",
        "description": "Send refresh token in body (refreshToken or token). Cookie refreshToken is also accepted.",
        "properties": {
          "refreshToken": {
            "type": "string",
            "description": "Refresh token from login/register or previous refresh"
          },
          "token": {
            "type": "string",
            "description": "Alias for refreshToken (legacy)"
          }
        }
      },
      "RefreshTokenResponse": {
        "type": "object",
        "properties": {
          "user": {
            "$ref": "#/components/schemas/UserSummary"
          },
          "accessToken": {
            "type": "string",
            "description": "New short-lived access token for API calls"
          },
          "refreshToken": {
            "type": "string",
            "description": "New long-lived refresh token; store and use for next refresh"
          }
        }
      },
      "ForgotPasswordRequest": {
        "type": "object",
        "required": [
          "email"
        ],
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "example": "user@girik.com"
          }
        }
      },
      "ResetPasswordRequest": {
        "type": "object",
        "required": [
          "token",
          "newPassword"
        ],
        "properties": {
          "token": {
            "type": "string",
            "description": "Reset token from email"
          },
          "newPassword": {
            "type": "string",
            "format": "password",
            "minLength": 8,
            "pattern": "^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)",
            "example": "SecurePass123"
          }
        }
      },
      "CertificateResponse": {
        "type": "object",
        "properties": {
          "id": {
            "$ref": "#/components/schemas/UUID"
          },
          "vessel_id": {
            "$ref": "#/components/schemas/UUID"
          },
          "certificate_type_id": {
            "$ref": "#/components/schemas/UUID"
          },
          "certificate_number": {
            "type": "string",
            "example": "GIR-CERT-2026-001234"
          },
          "issue_date": {
            "type": "string",
            "format": "date"
          },
          "expiry_date": {
            "type": "string",
            "format": "date"
          },
          "status": {
            "type": "string",
            "enum": [
              "VALID",
              "EXPIRED",
              "SUSPENDED",
              "REVOKED"
            ],
            "example": "VALID"
          },
          "qr_code_url": {
            "type": "string",
            "format": "uri"
          },
          "pdf_file_url": {
            "type": "string",
            "format": "uri"
          },
          "CertificateType": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string",
                "example": "Safety Construction",
                "description": "Name of the certificate type"
              }
            }
          },
          "Vessel": {
            "type": "object",
            "properties": {
              "vessel_name": {
                "type": "string",
                "example": "Ocean Pioneer"
              },
              "imo_number": {
                "type": "string",
                "example": "9123456"
              }
            }
          }
        },
        "example": {
          "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
          "certificate_number": "GIR-CERT-2026-001234",
          "status": "VALID",
          "issue_date": "2026-01-15",
          "expiry_date": "2027-01-14"
        }
      },
      "GenerateCertificateRequest": {
        "type": "object",
        "required": [
          "job_id"
        ],
        "properties": {
          "job_id": {
            "type": "string",
            "format": "uuid",
            "example": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f"
          },
          "validity_years": {
            "type": "integer",
            "minimum": 1,
            "maximum": 5,
            "default": 1
          }
        },
        "example": {
          "job_id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
          "validity_years": 1
        }
      },
      "CertificateTypeCreateRequest": {
        "type": "object",
        "required": [
          "name",
          "issuing_authority",
          "validity_years"
        ],
        "properties": {
          "name": {
            "type": "string"
          },
          "issuing_authority": {
            "type": "string",
            "enum": [
              "CLASS",
              "FLAG"
            ]
          },
          "validity_years": {
            "type": "integer"
          },
          "status": {
            "type": "string",
            "enum": [
              "ACTIVE",
              "INACTIVE"
            ]
          },
          "description": {
            "type": "string"
          },
          "requires_survey": {
            "type": "boolean",
            "default": true
          },
          "required_documents": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "document_name": {
                  "type": "string"
                },
                "is_mandatory": {
                  "type": "boolean"
                }
              }
            }
          }
        },
        "example": {
          "name": "Safety Construction",
          "issuing_authority": "CLASS",
          "validity_years": 5,
          "status": "ACTIVE",
          "description": "Main classification certificate for construction",
          "requires_survey": true,
          "required_documents": [
            {
              "document_name": "Bill of Sale",
              "is_mandatory": true
            },
            {
              "document_name": "Builder Certificate",
              "is_mandatory": false
            }
          ]
        }
      },
      "CertificateTypeDetailResponse": {
        "type": "object",
        "description": "Full certificate type detail — returned by GET /types/:id, POST /types, and PUT /types/:id.",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "name": {
            "type": "string",
            "example": "Class Certificate"
          },
          "issuing_authority": {
            "type": "string",
            "enum": [
              "CLASS",
              "FLAG"
            ]
          },
          "validity_years": {
            "type": "integer",
            "example": 5
          },
          "status": {
            "type": "string",
            "enum": [
              "ACTIVE",
              "INACTIVE"
            ]
          },
          "description": {
            "type": "string",
            "nullable": true,
            "example": "Annual classification survey certificate"
          },
          "requires_survey": {
            "type": "boolean",
            "example": true
          },
          "CertificateRequiredDocuments": {
            "type": "array",
            "description": "All required documents for this certificate type, ordered by name.",
            "items": {
              "$ref": "#/components/schemas/CertificateRequiredDocument"
            }
          }
        },
        "example": {
          "id": "019c79a4-55ba-773c-9454-f6bee169ab03",
          "name": "Class Certificate",
          "issuing_authority": "CLASS",
          "validity_years": 5,
          "status": "ACTIVE",
          "description": "Annual classification survey certificate",
          "requires_survey": true,
          "CertificateRequiredDocuments": [
            {
              "id": "019c79a4-0001-0000-0000-000000000001",
              "document_name": "Registry Certificate",
              "is_mandatory": true
            },
            {
              "id": "019c79a4-0001-0000-0000-000000000002",
              "document_name": "Previous Survey Report",
              "is_mandatory": false
            }
          ]
        }
      },
      "CertificateTypeUpdateRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "issuing_authority": {
            "type": "string",
            "enum": [
              "CLASS",
              "FLAG"
            ]
          },
          "validity_years": {
            "type": "integer"
          },
          "status": {
            "type": "string",
            "enum": [
              "ACTIVE",
              "INACTIVE"
            ]
          },
          "description": {
            "type": "string"
          },
          "requires_survey": {
            "type": "boolean"
          },
          "required_documents": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "document_name": {
                  "type": "string"
                },
                "is_mandatory": {
                  "type": "boolean"
                }
              }
            }
          }
        },
        "example": {
          "name": "Safety Construction (Updated)",
          "issuing_authority": "CLASS",
          "validity_years": 5,
          "status": "ACTIVE",
          "description": "Updated classification certificate for construction",
          "requires_survey": true,
          "required_documents": [
            {
              "document_name": "Bill of Sale",
              "is_mandatory": true
            },
            {
              "document_name": "Builder Certificate",
              "is_mandatory": false
            },
            {
              "document_name": "Previous Registry Certificate",
              "is_mandatory": true
            }
          ]
        }
      },
      "CertActionRequest": {
        "type": "object",
        "required": [
          "reason"
        ],
        "properties": {
          "reason": {
            "type": "string",
            "example": "Administrative suspension"
          }
        },
        "example": {
          "reason": "Administrative suspension"
        }
      },
      "RenewCertRequest": {
        "type": "object",
        "required": [
          "validity_years",
          "reason"
        ],
        "properties": {
          "validity_years": {
            "type": "integer",
            "minimum": 1,
            "maximum": 5
          },
          "reason": {
            "type": "string"
          }
        },
        "example": {
          "validity_years": 1,
          "reason": "Standard renewal"
        }
      },
      "ChecklistResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ChecklistItem"
            }
          }
        },
        "example": {
          "success": true,
          "data": [
            {
              "id": "019c675a-eead-752b-b2ea-e8b5932b0cfc",
              "job_id": "019c6152-5b55-736c-a0d3-0dc3f6f1c4ec",
              "question_code": "LSE001",
              "question_text": "Are life jackets available?",
              "answer": "YES",
              "remarks": "",
              "file_url": null,
              "createdAt": "2026-02-16T16:48:58.000Z",
              "updatedAt": "2026-02-16T16:48:58.000Z"
            },
            {
              "id": "019c675a-eead-752b-b2ea-ed0e46e9bbc7",
              "job_id": "019c6152-5b55-736c-a0d3-0dc3f6f1c4ec",
              "question_code": "LSE002",
              "question_text": "Number of life jackets",
              "answer": "YES",
              "remarks": "24 units",
              "file_url": null,
              "createdAt": "2026-02-16T16:48:58.000Z",
              "updatedAt": "2026-02-16T16:48:58.000Z"
            }
          ]
        }
      },
      "ClientResponse": {
        "type": "object",
        "properties": {
          "id": {
            "$ref": "#/components/schemas/UUID"
          },
          "company_name": {
            "type": "string"
          },
          "company_code": {
            "type": "string"
          },
          "email": {
            "type": "string",
            "format": "email"
          },
          "address": {
            "type": "string"
          },
          "country": {
            "type": "string"
          },
          "status": {
            "type": "string",
            "enum": [
              "ACTIVE",
              "INACTIVE"
            ]
          }
        }
      },
      "ClientCreateRequest": {
        "type": "object",
        "required": [
          "company_name",
          "company_code",
          "email"
        ],
        "properties": {
          "company_name": {
            "type": "string",
            "example": "Marine Shipping Co"
          },
          "company_code": {
            "type": "string",
            "example": "MSC001"
          },
          "email": {
            "type": "string",
            "format": "email",
            "example": "contact@marineshipping.com"
          },
          "address": {
            "type": "string"
          },
          "country": {
            "type": "string"
          },
          "phone": {
            "type": "string"
          },
          "contact_person_name": {
            "type": "string"
          },
          "contact_person_email": {
            "type": "string",
            "format": "email"
          },
          "status": {
            "type": "string",
            "enum": [
              "ACTIVE",
              "INACTIVE"
            ]
          },
          "user": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string"
              },
              "email": {
                "type": "string",
                "format": "email"
              },
              "password": {
                "type": "string",
                "format": "password",
                "minLength": 8,
                "pattern": "^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)",
                "example": "SecurePass123"
              },
              "role": {
                "type": "string",
                "enum": [
                  "CLIENT"
                ],
                "default": "CLIENT"
              },
              "phone": {
                "type": "string"
              }
            }
          }
        },
        "example": {
          "company_name": "Marine Shipping Co",
          "company_code": "MSC001",
          "email": "contact@marineshipping.com"
        }
      },
      "WebsiteContact": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "example": "a1b2c3d4-e5f6-7890-abcd-ef1234567890"
          },
          "full_name": {
            "type": "string",
            "example": "John Maritime"
          },
          "company": {
            "type": "string",
            "example": "Pacific Shipping Co. Ltd"
          },
          "corporate_email": {
            "type": "string",
            "format": "email",
            "example": "john@pacificshipping.com"
          },
          "message": {
            "type": "string",
            "example": "We are interested in classification services for our fleet."
          },
          "phone": {
            "type": "string",
            "example": "+91 98765 43210"
          },
          "subject": {
            "type": "string",
            "example": "Fleet Classification Inquiry"
          },
          "status": {
            "type": "string",
            "enum": [
              "NEW",
              "READ",
              "REPLIED",
              "ARCHIVED"
            ],
            "example": "NEW"
          },
          "internal_note": {
            "type": "string",
            "nullable": true,
            "example": "Responded via email on 20 Feb 2026."
          },
          "replied_by": {
            "type": "string",
            "format": "uuid",
            "nullable": true
          },
          "replied_at": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "ip_address": {
            "type": "string",
            "nullable": true,
            "example": "192.168.1.1"
          },
          "source_page": {
            "type": "string",
            "example": "CONTACT"
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time"
          },
          "Responder": {
            "type": "object",
            "nullable": true,
            "properties": {
              "id": {
                "type": "string",
                "format": "uuid"
              },
              "name": {
                "type": "string",
                "example": "Admin User"
              },
              "email": {
                "type": "string",
                "example": "admin@girik.com"
              }
            }
          }
        }
      },
      "DashboardResponse": {
        "type": "object",
        "description": "Role-specific dashboard data. Structure varies by role (ADMIN, GM, TM, TO, SURVEYOR, CLIENT)",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "data": {
            "type": "object",
            "properties": {
              "stats": {
                "type": "object",
                "additionalProperties": true,
                "description": "Key metrics (e.g. pendingJobs, totalCertificates)"
              },
              "recentJobs": {
                "type": "array",
                "items": {}
              },
              "expiringCertificates": {
                "type": "array",
                "items": {}
              },
              "alerts": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "type": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        },
        "example": {
          "success": true,
          "data": {
            "stats": {
              "pendingJobs": 5,
              "totalCertificates": 120
            },
            "recentJobs": [],
            "expiringCertificates": []
          }
        }
      },
      "JobResponse": {
        "type": "object",
        "properties": {
          "id": {
            "$ref": "#/components/schemas/UUID"
          },
          "vessel_id": {
            "$ref": "#/components/schemas/UUID"
          },
          "certificate_type_id": {
            "$ref": "#/components/schemas/UUID"
          },
          "reason": {
            "type": "string"
          },
          "target_port": {
            "type": "string"
          },
          "target_date": {
            "type": "string",
            "format": "date"
          },
          "assigned_surveyor_id": {
            "$ref": "#/components/schemas/UUID",
            "nullable": true
          },
          "assigned_by_user_id": {
            "$ref": "#/components/schemas/UUID",
            "nullable": true
          },
          "approved_by_user_id": {
            "$ref": "#/components/schemas/UUID",
            "nullable": true
          },
          "generated_certificate_id": {
            "$ref": "#/components/schemas/UUID",
            "nullable": true
          },
          "remarks": {
            "type": "string"
          },
          "job_status": {
            "type": "string",
            "enum": [
              "CREATED",
              "DOCUMENT_VERIFIED",
              "APPROVED",
              "ASSIGNED",
              "SURVEY_AUTHORIZED",
              "IN_PROGRESS",
              "SURVEY_DONE",
              "REVIEWED",
              "FINALIZED",
              "REWORK_REQUESTED",
              "PAYMENT_DONE",
              "CERTIFIED",
              "REJECTED"
            ],
            "example": "CREATED"
          },
          "survey": {
            "type": "object",
            "nullable": true,
            "properties": {
              "id": {
                "$ref": "#/components/schemas/UUID"
              },
              "survey_status": {
                "type": "string",
                "enum": [
                  "NOT_STARTED",
                  "STARTED",
                  "CHECKLIST_SUBMITTED",
                  "PROOF_UPLOADED",
                  "SUBMITTED",
                  "REWORK_REQUIRED",
                  "FINALIZED"
                ],
                "example": "NOT_STARTED"
              },
              "survey_statement_status": {
                "type": "string",
                "enum": [
                  "NOT_PREPARED",
                  "DRAFT",
                  "ISSUED"
                ],
                "example": "NOT_PREPARED"
              },
              "started_at": {
                "type": "string",
                "format": "date-time",
                "nullable": true
              },
              "submitted_at": {
                "type": "string",
                "format": "date-time",
                "nullable": true
              },
              "start_latitude": {
                "type": "number",
                "nullable": true
              },
              "start_longitude": {
                "type": "number",
                "nullable": true
              },
              "submit_latitude": {
                "type": "number",
                "nullable": true
              },
              "submit_longitude": {
                "type": "number",
                "nullable": true
              },
              "declared_by": {
                "$ref": "#/components/schemas/UUID",
                "nullable": true
              },
              "declared_at": {
                "type": "string",
                "format": "date-time",
                "nullable": true
              },
              "declaration_hash": {
                "type": "string",
                "nullable": true
              },
              "SurveyStatusHistories": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "$ref": "#/components/schemas/UUID"
                    },
                    "previous_status": {
                      "type": "string",
                      "nullable": true
                    },
                    "new_status": {
                      "type": "string"
                    },
                    "changed_by": {
                      "$ref": "#/components/schemas/UUID"
                    },
                    "reason": {
                      "type": "string",
                      "nullable": true
                    },
                    "created_at": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          },
          "priority": {
            "type": "string",
            "enum": [
              "LOW",
              "NORMAL",
              "HIGH",
              "URGENT"
            ],
            "default": "NORMAL",
            "description": "Management priority flag. Set/changed via PUT /jobs/:id/priority — not accepted at creation time."
          },
          "vessel": {
            "$ref": "#/components/schemas/VesselSummary"
          },
          "certificate_type": {
            "type": "object",
            "properties": {
              "id": {
                "$ref": "#/components/schemas/UUID"
              },
              "name": {
                "type": "string"
              }
            }
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time"
          }
        },
        "example": {
          "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
          "vessel_id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
          "job_status": "CREATED",
          "reason": "Annual survey due",
          "target_port": "Singapore",
          "target_date": "2026-03-15"
        }
      },
      "JobCreateRequest": {
        "type": "object",
        "required": [
          "vessel_id",
          "certificate_type_id",
          "reason",
          "target_port",
          "target_date"
        ],
        "properties": {
          "vessel_id": {
            "$ref": "#/components/schemas/UUID"
          },
          "certificate_type_id": {
            "$ref": "#/components/schemas/UUID"
          },
          "reason": {
            "type": "string",
            "example": "Annual survey due"
          },
          "target_port": {
            "type": "string",
            "example": "Singapore"
          },
          "target_date": {
            "type": "string",
            "format": "date",
            "example": "2026-03-15"
          },
          "remarks": {
            "type": "string"
          }
        }
      },
      "AssignSurveyorRequest": {
        "type": "object",
        "required": [
          "surveyorId"
        ],
        "properties": {
          "surveyorId": {
            "$ref": "#/components/schemas/UUID"
          }
        }
      },
      "RescheduleJobRequest": {
        "type": "object",
        "required": [
          "reason"
        ],
        "properties": {
          "new_target_date": {
            "type": "string",
            "format": "date"
          },
          "new_target_port": {
            "type": "string"
          },
          "reason": {
            "type": "string"
          }
        }
      },
      "JobHistoryItem": {
        "type": "object",
        "properties": {
          "id": {
            "$ref": "#/components/schemas/UUID"
          },
          "job_id": {
            "$ref": "#/components/schemas/UUID"
          },
          "old_status": {
            "type": "string",
            "nullable": true
          },
          "new_status": {
            "type": "string"
          },
          "changed_by": {
            "$ref": "#/components/schemas/UUID"
          },
          "change_reason": {
            "type": "string"
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          },
          "User": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string"
              },
              "email": {
                "type": "string"
              },
              "role": {
                "type": "string"
              }
            }
          }
        }
      },
      "AddNoteRequest": {
        "type": "object",
        "required": [
          "note_text"
        ],
        "properties": {
          "note_text": {
            "type": "string"
          },
          "is_internal": {
            "type": "boolean",
            "default": true
          }
        }
      },
      "JobNoteResponse": {
        "type": "object",
        "properties": {
          "id": {
            "$ref": "#/components/schemas/UUID"
          },
          "job_id": {
            "$ref": "#/components/schemas/UUID"
          },
          "user_id": {
            "$ref": "#/components/schemas/UUID"
          },
          "note_text": {
            "type": "string"
          },
          "is_internal": {
            "type": "boolean"
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "JobMessageResponse": {
        "type": "object",
        "properties": {
          "id": {
            "$ref": "#/components/schemas/UUID"
          },
          "job_id": {
            "$ref": "#/components/schemas/UUID"
          },
          "sender_id": {
            "$ref": "#/components/schemas/UUID"
          },
          "message_text": {
            "type": "string"
          },
          "is_internal": {
            "type": "boolean"
          },
          "attachment_url": {
            "type": "string",
            "format": "uri",
            "nullable": true
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          },
          "Sender": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string"
              },
              "role": {
                "type": "string"
              }
            }
          }
        }
      },
      "PaymentResponse": {
        "type": "object",
        "properties": {
          "id": {
            "$ref": "#/components/schemas/UUID"
          },
          "job_id": {
            "$ref": "#/components/schemas/UUID"
          },
          "invoice_number": {
            "type": "string",
            "example": "INV-2026-001234"
          },
          "amount": {
            "type": "number",
            "format": "decimal",
            "example": 1500
          },
          "currency": {
            "type": "string",
            "example": "USD"
          },
          "payment_status": {
            "type": "string",
            "enum": [
              "UNPAID",
              "PAID",
              "ON_HOLD"
            ],
            "example": "UNPAID"
          },
          "payment_date": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "receipt_url": {
            "type": "string",
            "format": "uri",
            "nullable": true
          }
        },
        "example": {
          "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
          "invoice_number": "INV-2026-001234",
          "amount": 1500,
          "currency": "USD",
          "payment_status": "UNPAID"
        }
      },
      "FinancialSummaryResponse": {
        "type": "object",
        "properties": {
          "total_outstanding": {
            "type": "number"
          },
          "total_paid": {
            "type": "number"
          },
          "total_invoiced": {
            "type": "number"
          },
          "payments": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/PaymentResponse"
            }
          }
        }
      },
      "CreateInvoiceRequest": {
        "type": "object",
        "required": [
          "job_id",
          "amount"
        ],
        "properties": {
          "job_id": {
            "type": "string",
            "format": "uuid"
          },
          "amount": {
            "type": "number",
            "format": "decimal",
            "minimum": 0
          },
          "currency": {
            "type": "string",
            "default": "USD"
          }
        },
        "example": {
          "job_id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
          "amount": 1500,
          "currency": "USD"
        }
      },
      "PartialPaymentRequest": {
        "type": "object",
        "required": [
          "amount"
        ],
        "properties": {
          "amount": {
            "type": "number",
            "format": "decimal",
            "minimum": 0
          },
          "remarks": {
            "type": "string"
          }
        }
      },
      "VesselSummary": {
        "type": "object",
        "properties": {
          "id": {
            "$ref": "#/components/schemas/UUID"
          },
          "vessel_name": {
            "type": "string",
            "example": "Ocean Pioneer"
          },
          "imo_number": {
            "type": "string",
            "example": "9123456"
          },
          "flag_administration_id": {
            "$ref": "#/components/schemas/UUID"
          },
          "ship_type": {
            "type": "string",
            "example": "Cargo"
          }
        },
        "example": {
          "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
          "vessel_name": "Ocean Pioneer",
          "imo_number": "9123456",
          "flag_administration_id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
          "ship_type": "Cargo"
        }
      },
      "SurveyReportResponse": {
        "type": "object",
        "properties": {
          "id": {
            "$ref": "#/components/schemas/UUID"
          },
          "job_id": {
            "$ref": "#/components/schemas/UUID"
          },
          "surveyor_id": {
            "$ref": "#/components/schemas/UUID"
          },
          "survey_status": {
            "type": "string",
            "enum": [
              "NOT_STARTED",
              "STARTED",
              "CHECKLIST_SUBMITTED",
              "PROOF_UPLOADED",
              "SUBMITTED",
              "REWORK_REQUIRED",
              "FINALIZED"
            ]
          },
          "submission_count": {
            "type": "integer"
          },
          "declared_by": {
            "$ref": "#/components/schemas/UUID"
          },
          "declared_at": {
            "type": "string",
            "format": "date-time"
          },
          "start_latitude": {
            "type": "number"
          },
          "start_longitude": {
            "type": "number"
          },
          "submit_latitude": {
            "type": "number"
          },
          "submit_longitude": {
            "type": "number"
          },
          "attendance_photo_url": {
            "type": "string",
            "format": "uri"
          },
          "evidence_proof_url": {
            "type": "string",
            "format": "uri"
          },
          "signature_url": {
            "type": "string",
            "format": "uri"
          },
          "declaration_hash": {
            "type": "string"
          },
          "survey_statement": {
            "type": "string"
          },
          "started_at": {
            "type": "string",
            "format": "date-time"
          },
          "submitted_at": {
            "type": "string",
            "format": "date-time"
          },
          "finalized_at": {
            "type": "string",
            "format": "date-time"
          }
        },
        "example": {
          "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
          "job_id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
          "survey_status": "SUBMITTED",
          "submission_count": 1,
          "submit_latitude": 1.3521,
          "submit_longitude": 103.8198,
          "survey_statement": "Survey completed successfully.",
          "declared_by": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
          "declared_at": "2026-02-25T12:00:00Z",
          "declaration_hash": "a591a6d40bf420404a011733cfb7b190d62c65bf0bcda32b57b277d9ad9f146e",
          "started_at": "2026-02-25T10:00:00Z",
          "submitted_at": "2026-02-25T12:00:00Z"
        }
      },
      "SurveyTimelineResponse": {
        "type": "object",
        "properties": {
          "job_id": {
            "$ref": "#/components/schemas/UUID"
          },
          "gps_trace": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "latitude": {
                  "type": "number"
                },
                "longitude": {
                  "type": "number"
                },
                "timestamp": {
                  "type": "string",
                  "format": "date-time"
                }
              }
            }
          },
          "survey_details": {
            "$ref": "#/components/schemas/SurveyReportResponse"
          }
        }
      },
      "VesselResponse": {
        "allOf": [
          {
            "$ref": "#/components/schemas/VesselSummary"
          },
          {
            "type": "object",
            "properties": {
              "client_id": {
                "$ref": "#/components/schemas/UUID"
              },
              "call_sign": {
                "type": "string"
              },
              "mmsi_number": {
                "type": "string"
              },
              "port_of_registry": {
                "type": "string"
              },
              "year_built": {
                "type": "integer"
              },
              "gross_tonnage": {
                "type": "number"
              },
              "net_tonnage": {
                "type": "number"
              },
              "deadweight": {
                "type": "number"
              },
              "class_status": {
                "type": "string",
                "enum": [
                  "ACTIVE",
                  "SUSPENDED",
                  "WITHDRAWN"
                ]
              },
              "current_class_society": {
                "type": "string"
              },
              "engine_type": {
                "type": "string"
              },
              "builder_name": {
                "type": "string"
              }
            }
          }
        ],
        "example": {
          "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
          "vessel_name": "Ocean Pioneer",
          "imo_number": "9123456",
          "flag_administration_id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
          "ship_type": "Cargo",
          "client_id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
          "call_sign": "9VSP",
          "mmsi_number": "563123456",
          "port_of_registry": "Singapore",
          "year_built": 2015,
          "gross_tonnage": 30000,
          "net_tonnage": 15000,
          "deadweight": 45000,
          "class_status": "ACTIVE",
          "current_class_society": "DNV",
          "engine_type": "Diesel",
          "builder_name": "Hyundai Heavy Industries"
        }
      },
      "VesselCreateRequest": {
        "type": "object",
        "required": [
          "client_id",
          "vessel_name",
          "imo_number",
          "flag_administration_id",
          "ship_type"
        ],
        "properties": {
          "client_id": {
            "type": "string",
            "format": "uuid",
            "example": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f"
          },
          "vessel_name": {
            "type": "string",
            "example": "Ocean Pioneer"
          },
          "imo_number": {
            "type": "string",
            "example": "9123456"
          },
          "call_sign": {
            "type": "string",
            "example": "9VSP"
          },
          "mmsi_number": {
            "type": "string",
            "example": "563123456"
          },
          "flag_administration_id": {
            "type": "string",
            "format": "uuid",
            "example": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f"
          },
          "port_of_registry": {
            "type": "string",
            "example": "Singapore"
          },
          "year_built": {
            "type": "integer",
            "example": 2015
          },
          "ship_type": {
            "type": "string",
            "example": "Cargo"
          },
          "gross_tonnage": {
            "type": "number",
            "format": "float"
          },
          "net_tonnage": {
            "type": "number",
            "format": "float"
          },
          "deadweight": {
            "type": "number",
            "format": "float"
          },
          "class_status": {
            "type": "string",
            "enum": [
              "ACTIVE",
              "SUSPENDED",
              "WITHDRAWN"
            ]
          },
          "current_class_society": {
            "type": "string"
          },
          "engine_type": {
            "type": "string"
          },
          "builder_name": {
            "type": "string"
          },
          "uploaded_documents": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "file_url": {
                  "type": "string",
                  "format": "uri"
                },
                "document_type": {
                  "type": "string"
                },
                "description": {
                  "type": "string"
                }
              }
            },
            "example": [
              {
                "file_url": "https://bucket.s3.amazonaws.com/cert.pdf",
                "document_type": "REGISTRY_CERTIFICATE",
                "description": "Ship Registry Certificate"
              }
            ]
          }
        },
        "example": {
          "client_id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
          "vessel_name": "Ocean Pioneer",
          "imo_number": "9123456",
          "call_sign": "9VSP",
          "mmsi_number": "563123456",
          "flag_administration_id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
          "port_of_registry": "Singapore",
          "year_built": 2015,
          "ship_type": "Cargo",
          "gross_tonnage": 30000,
          "net_tonnage": 15000,
          "deadweight": 45000,
          "class_status": "ACTIVE",
          "current_class_society": "DNV",
          "engine_type": "Diesel",
          "builder_name": "Hyundai Heavy Industries",
          "uploaded_documents": [
            {
              "file_url": "https://example-bucket.s3.amazonaws.com/cert.pdf",
              "document_type": "REGISTRY_CERTIFICATE",
              "description": "Ship Registry Certificate"
            }
          ]
        }
      },
      "VesselUpdateRequest": {
        "type": "object",
        "properties": {
          "client_id": {
            "type": "string",
            "format": "uuid"
          },
          "vessel_name": {
            "type": "string"
          },
          "imo_number": {
            "type": "string"
          },
          "call_sign": {
            "type": "string"
          },
          "mmsi_number": {
            "type": "string"
          },
          "flag_administration_id": {
            "type": "string",
            "format": "uuid"
          },
          "port_of_registry": {
            "type": "string"
          },
          "year_built": {
            "type": "integer"
          },
          "ship_type": {
            "type": "string"
          },
          "gross_tonnage": {
            "type": "number"
          },
          "net_tonnage": {
            "type": "number"
          },
          "deadweight": {
            "type": "number"
          },
          "class_status": {
            "type": "string",
            "enum": [
              "ACTIVE",
              "SUSPENDED",
              "WITHDRAWN"
            ]
          },
          "current_class_society": {
            "type": "string"
          },
          "engine_type": {
            "type": "string"
          },
          "builder_name": {
            "type": "string"
          }
        },
        "example": {
          "vessel_name": "Ocean Pioneer II",
          "class_status": "SUSPENDED",
          "deadweight": 50000.5
        }
      },
      "WebsiteVideo": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "example": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f"
          },
          "section": {
            "type": "string",
            "example": "HOME",
            "description": "Section of the website where the video belongs (e.g., HOME, PORTFOLIO)"
          },
          "title": {
            "type": "string",
            "example": "Introduction Video"
          },
          "description": {
            "type": "string",
            "example": "A brief introduction to our services."
          },
          "video_url": {
            "type": "string",
            "format": "uri",
            "nullable": true,
            "example": "https://bucket.s3.region.amazonaws.com/website/videos/video.mp4"
          },
          "thumbnail_url": {
            "type": "string",
            "format": "uri",
            "example": "https://bucket.s3.region.amazonaws.com/website/videos/thumb.jpg"
          },
          "uploaded_by": {
            "type": "string",
            "format": "uuid",
            "example": "01933c5e-user-id"
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "UUID": {
        "type": "string",
        "format": "uuid",
        "example": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f"
      },
      "ChecklistItem": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "job_id": {
            "type": "string",
            "format": "uuid"
          },
          "question_code": {
            "type": "string"
          },
          "question_text": {
            "type": "string"
          },
          "answer": {
            "type": "string"
          },
          "remarks": {
            "type": "string"
          },
          "file_url": {
            "type": "string",
            "nullable": true
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        },
        "example": {
          "id": "019c675a-eead-752b-b2ea-e8b5932b0cfc",
          "job_id": "019c6152-5b55-736c-a0d3-0dc3f6f1c4ec",
          "question_code": "LSE001",
          "question_text": "Are life jackets available?",
          "answer": "YES",
          "remarks": "",
          "file_url": null,
          "createdAt": "2026-02-16T16:48:58.000Z",
          "updatedAt": "2026-02-16T16:48:58.000Z"
        }
      },
      "CertificateRequiredDocument": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "document_name": {
            "type": "string",
            "example": "Bill of Sale"
          },
          "is_mandatory": {
            "type": "boolean",
            "example": true
          }
        }
      },
      "UserSummary": {
        "type": "object",
        "properties": {
          "id": {
            "$ref": "#/components/schemas/UUID"
          },
          "name": {
            "type": "string",
            "example": "John Doe"
          },
          "email": {
            "type": "string",
            "format": "email",
            "example": "admin@girik.com"
          },
          "role": {
            "type": "string",
            "enum": [
              "ADMIN",
              "GM",
              "TM",
              "TO",
              "TA",
              "SURVEYOR",
              "CLIENT",
              "FLAG_ADMIN"
            ],
            "example": "CLIENT"
          },
          "client_id": {
            "$ref": "#/components/schemas/UUID",
            "nullable": true
          }
        }
      }
    }
  },
  "paths": {
    "/api/v1/activity-requests": {
      "post": {
        "tags": [
          "Activity Requests"
        ],
        "summary": "Create activity request",
        "operationId": "createActivityRequest",
        "x-roles": [
          "CLIENT",
          "ADMIN",
          "GM",
          "TM"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "job_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "activity_type": {
                    "type": "string"
                  },
                  "requested_date": {
                    "type": "string",
                    "format": "date"
                  },
                  "notes": {
                    "type": "string"
                  }
                }
              },
              "example": {
                "job_id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                "activity_type": "SURVEY",
                "requested_date": "2026-03-20",
                "notes": "Prefer morning slot"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Request created",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "Activity Requests"
        ],
        "summary": "Get activity requests",
        "operationId": "getActivityRequests",
        "x-roles": [
          "CLIENT",
          "ADMIN",
          "GM",
          "TM",
          "TO"
        ],
        "responses": {
          "200": {
            "description": "List of requests",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/activity-requests/{id}": {
      "get": {
        "tags": [
          "Activity Requests"
        ],
        "summary": "Get request by ID",
        "operationId": "getActivityRequestById",
        "x-roles": [
          "CLIENT",
          "ADMIN",
          "GM",
          "TM",
          "TO"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Request details",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/activity-requests/{id}/status": {
      "put": {
        "tags": [
          "Activity Requests"
        ],
        "summary": "Update request status",
        "operationId": "updateActivityRequestStatus",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "status"
                ],
                "properties": {
                  "status": {
                    "type": "string",
                    "enum": [
                      "PENDING",
                      "APPROVED",
                      "REJECTED",
                      "COMPLETED"
                    ]
                  },
                  "remarks": {
                    "type": "string"
                  }
                }
              },
              "example": {
                "status": "APPROVED",
                "remarks": "Surveyor assigned"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Status updated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/approvals": {
      "post": {
        "tags": [
          "Approvals"
        ],
        "summary": "Create approval",
        "operationId": "createApproval",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "job_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "step": {
                    "type": "string"
                  },
                  "action": {
                    "type": "string",
                    "enum": [
                      "APPROVE",
                      "REJECT"
                    ]
                  },
                  "remarks": {
                    "type": "string"
                  }
                }
              },
              "example": {
                "job_id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                "step": "GM_APPROVAL",
                "action": "APPROVE",
                "remarks": "Approved for survey"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Approval created",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/approvals/{id}/step": {
      "put": {
        "tags": [
          "Approvals"
        ],
        "summary": "Update approval step",
        "operationId": "updateApprovalStep",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "action": {
                    "type": "string",
                    "enum": [
                      "APPROVE",
                      "REJECT"
                    ]
                  },
                  "remarks": {
                    "type": "string"
                  }
                }
              },
              "example": {
                "action": "APPROVE",
                "remarks": "Step completed"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Step updated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/login": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Login",
        "description": "Authenticate with email and password. Returns user, **accessToken** (short-lived, for API calls), and **refreshToken** (long-lived, for getting new access tokens).\nUse **accessToken** in header: `Authorization: Bearer &lt;accessToken&gt;`. Store tokens securely.\n\n\n**Note:** Default credentials for **ADMIN** have been pre-filled for testing.",
        "security": [],
        "operationId": "login",
        "x-roles": [
          "PUBLIC"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginRequest"
              },
              "example": {
                "email": "admin@girik.com",
                "password": "Password@123"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Login successful",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LoginResponse"
                },
                "example": {
                  "user": {
                    "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                    "name": "John Doe",
                    "email": "admin@girik.com",
                    "role": "CLIENT"
                  },
                  "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
                  "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          },
          "401": {
            "description": "Invalid credentials",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Invalid email or password"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/logout": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Logout",
        "description": "Invalidate current session. Clears tokens; response includes accessToken and refreshToken as null.",
        "operationId": "logout",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "TA",
          "SURVEYOR",
          "CLIENT",
          "FLAG_ADMIN"
        ],
        "responses": {
          "200": {
            "description": "Logged out successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LogoutResponse"
                },
                "example": {
                  "message": "Logged out successfully",
                  "accessToken": null,
                  "refreshToken": null
                }
              }
            }
          },
          "401": {
            "description": "Not authenticated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/refresh-token": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Refresh token",
        "description": "Get new **accessToken** and **refreshToken** using a valid refresh token. Send refresh token in body (`refreshToken` or `token`) or in cookie. Response returns both tokens.\n",
        "security": [],
        "operationId": "refreshToken",
        "x-roles": [
          "PUBLIC"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RefreshTokenRequest"
              },
              "example": {
                "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Tokens refreshed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RefreshTokenResponse"
                },
                "example": {
                  "user": {
                    "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                    "name": "John Doe",
                    "email": "admin@girik.com",
                    "role": "CLIENT"
                  },
                  "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
                  "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                }
              }
            }
          },
          "401": {
            "description": "Invalid or expired refresh token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/forgot-password": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Forgot password",
        "description": "Request password reset email.",
        "security": [],
        "operationId": "forgotPassword",
        "x-roles": [
          "PUBLIC"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ForgotPasswordRequest"
              },
              "example": {
                "email": "user@girik.com"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Password reset email sent",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Password reset email sent"
                    }
                  }
                },
                "example": {
                  "message": "Password reset email sent"
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/reset-password": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Reset password",
        "description": "Reset password using token from email.",
        "security": [],
        "operationId": "resetPassword",
        "x-roles": [
          "PUBLIC"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ResetPasswordRequest"
              },
              "example": {
                "token": "reset-token-from-email",
                "newPassword": "NewSecurePass123!"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Password reset successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Password reset successfully"
                    }
                  }
                },
                "example": {
                  "message": "Password reset successfully"
                }
              }
            }
          },
          "400": {
            "description": "Invalid or expired token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/certificates/verify/{number}": {
      "get": {
        "tags": [
          "Certificates"
        ],
        "summary": "Verify certificate (public)",
        "description": "Public verification of certificate by number. No auth required.",
        "security": [],
        "operationId": "verifyCertificate",
        "x-roles": [
          "PUBLIC"
        ],
        "parameters": [
          {
            "name": "number",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "example": "GIR-CERT-2026-001234"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Certificate verified",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "valid": {
                      "type": "boolean"
                    },
                    "certificate": {
                      "$ref": "#/components/schemas/CertificateResponse"
                    }
                  }
                },
                "example": {
                  "valid": true,
                  "certificate": {
                    "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                    "certificate_number": "GIR-CERT-2026-001234",
                    "status": "VALID",
                    "issue_date": "2026-01-15",
                    "expiry_date": "2027-01-14"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Certificate not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/certificates": {
      "get": {
        "tags": [
          "Certificates"
        ],
        "summary": "List certificates",
        "description": "List certificates with strict RBAC and ownership filtering.\n**Access:**\n- **ADMIN / GM / TM / TO:** All certificates.\n- **SURVEYOR:** Only certificates for vessels in jobs assigned to them.\n- **CLIENT:** Only certificates for their own company vessels.\n",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "operationId": "getCertificates",
        "x-roles": [
          "CLIENT",
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR"
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 20
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of certificates",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/CertificateResponse"
                      }
                    }
                  }
                },
                "example": {
                  "success": true,
                  "data": [
                    {
                      "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                      "certificate_number": "GIR-CERT-2026-001234",
                      "status": "VALID",
                      "issue_date": "2026-01-15",
                      "expiry_date": "2027-01-14"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Certificates"
        ],
        "summary": "Generate certificate",
        "description": "Generate a new certificate for a completed job. ADMIN, GM, TM only.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "operationId": "generateCertificate",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GenerateCertificateRequest"
              },
              "example": {
                "job_id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                "validity_years": 1
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Certificate generated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Certificate generated successfully"
                    },
                    "data": {
                      "$ref": "#/components/schemas/CertificateResponse"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Certificate generated successfully",
                  "data": {
                    "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                    "certificate_number": "GIR-CERT-2026-001234",
                    "status": "VALID",
                    "issue_date": "2026-01-15",
                    "expiry_date": "2027-01-14"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/certificates/types": {
      "get": {
        "tags": [
          "Certificates"
        ],
        "summary": "List certificate types (minimal)",
        "description": "Returns a lightweight list of all active certificate types.\n**Does NOT include `required_documents`** — use `GET /types/:id` to fetch\nthe full detail with required documents for a specific type.\n\nPass `?include_inactive=true` (ADMIN / GM only) to also see inactive types.\n\n**Roles:** CLIENT, ADMIN, GM, TM, TO, SURVEYOR\n",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "operationId": "getCertificateTypes",
        "x-roles": [
          "CLIENT",
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR"
        ],
        "parameters": [
          {
            "name": "include_inactive",
            "in": "query",
            "description": "Include INACTIVE types (ADMIN / GM only)",
            "schema": {
              "type": "boolean",
              "default": false
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Minimal list of certificate types",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "name": {
                            "type": "string",
                            "example": "Class Certificate"
                          },
                          "issuing_authority": {
                            "type": "string",
                            "enum": [
                              "CLASS",
                              "FLAG"
                            ]
                          },
                          "validity_years": {
                            "type": "integer",
                            "example": 5
                          },
                          "status": {
                            "type": "string",
                            "enum": [
                              "ACTIVE",
                              "INACTIVE"
                            ]
                          },
                          "requires_survey": {
                            "type": "boolean",
                            "example": true
                          }
                        }
                      }
                    }
                  }
                },
                "example": {
                  "success": true,
                  "data": [
                    {
                      "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                      "name": "Class Certificate",
                      "issuing_authority": "CLASS",
                      "validity_years": 5,
                      "status": "ACTIVE",
                      "requires_survey": true
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Certificates"
        ],
        "summary": "Create certificate type",
        "description": "Create a new certificate type with optional required documents. ADMIN only.",
        "operationId": "createCertificateType",
        "x-roles": [
          "ADMIN"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CertificateTypeCreateRequest"
              },
              "example": {
                "name": "Safety Construction",
                "issuing_authority": "CLASS",
                "validity_years": 5,
                "status": "ACTIVE",
                "description": "Main classification certificate for construction",
                "requires_survey": true,
                "required_documents": [
                  {
                    "document_name": "Bill of Sale",
                    "is_mandatory": true
                  },
                  {
                    "document_name": "Builder Certificate",
                    "is_mandatory": false
                  }
                ]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Certificate type created",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Certificate type created"
                    },
                    "data": {
                      "$ref": "#/components/schemas/CertificateTypeDetailResponse"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Certificate type created",
                  "data": {
                    "id": "019c79a4-55ba-773c-9454-f6bee169ab03",
                    "name": "Class Certificate",
                    "issuing_authority": "CLASS",
                    "validity_years": 5,
                    "status": "ACTIVE",
                    "description": "Annual classification survey certificate",
                    "requires_survey": true,
                    "CertificateRequiredDocuments": [
                      {
                        "id": "019c79a4-0001-0000-0000-000000000001",
                        "document_name": "Registry Certificate",
                        "is_mandatory": true
                      },
                      {
                        "id": "019c79a4-0001-0000-0000-000000000002",
                        "document_name": "Previous Survey Report",
                        "is_mandatory": false
                      }
                    ]
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          },
          "409": {
            "description": "A certificate type with this name already exists",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/certificates/types/{id}": {
      "get": {
        "tags": [
          "Certificates"
        ],
        "summary": "Get certificate type detail (with required documents)",
        "description": "Returns the **full detail** of a single certificate type, including:\n- All metadata fields (`description`, `requires_survey`, etc.)\n- The complete list of `required_documents` with their `is_mandatory` flag\n\nThis is the endpoint to call **before creating a job** to know which\ndocuments must be uploaded.\n\n**Roles:** CLIENT, ADMIN, GM, TM, TO, SURVEYOR\n",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "operationId": "getCertificateTypeById",
        "x-roles": [
          "CLIENT",
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "Certificate type UUID",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Certificate type detail with required documents",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/CertificateTypeDetailResponse"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "data": {
                    "id": "019c79a4-55ba-773c-9454-f6bee169ab03",
                    "name": "Class Certificate",
                    "issuing_authority": "CLASS",
                    "validity_years": 5,
                    "status": "ACTIVE",
                    "description": "Annual classification survey certificate",
                    "requires_survey": true,
                    "CertificateRequiredDocuments": [
                      {
                        "id": "019c79a4-0001-0000-0000-000000000001",
                        "document_name": "Registry Certificate",
                        "is_mandatory": true
                      },
                      {
                        "id": "019c79a4-0001-0000-0000-000000000002",
                        "document_name": "Previous Survey Report",
                        "is_mandatory": false
                      }
                    ]
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          },
          "404": {
            "description": "Certificate type not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Certificates"
        ],
        "summary": "Update certificate type",
        "description": "Update an existing certificate type and its required documents. ADMIN or TM only.",
        "operationId": "updateCertificateType",
        "x-roles": [
          "ADMIN",
          "TM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CertificateTypeUpdateRequest"
              },
              "example": {
                "name": "Safety Construction (Updated)",
                "issuing_authority": "CLASS",
                "validity_years": 5,
                "status": "ACTIVE",
                "description": "Updated classification certificate for construction",
                "requires_survey": true,
                "required_documents": [
                  {
                    "document_name": "Bill of Sale",
                    "is_mandatory": true
                  },
                  {
                    "document_name": "Builder Certificate",
                    "is_mandatory": false
                  },
                  {
                    "document_name": "Previous Registry Certificate",
                    "is_mandatory": true
                  }
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Certificate type updated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/CertificateTypeDetailResponse"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "data": {
                    "id": "019c79a4-55ba-773c-9454-f6bee169ab03",
                    "name": "Class Certificate",
                    "issuing_authority": "CLASS",
                    "validity_years": 5,
                    "status": "ACTIVE",
                    "description": "Annual classification survey certificate",
                    "requires_survey": true,
                    "CertificateRequiredDocuments": [
                      {
                        "id": "019c79a4-0001-0000-0000-000000000001",
                        "document_name": "Registry Certificate",
                        "is_mandatory": true
                      },
                      {
                        "id": "019c79a4-0001-0000-0000-000000000002",
                        "document_name": "Previous Survey Report",
                        "is_mandatory": false
                      }
                    ]
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          },
          "404": {
            "description": "Certificate type not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/certificates/bulk-renew": {
      "post": {
        "tags": [
          "Certificates"
        ],
        "summary": "Bulk renew certificates",
        "description": "Renew multiple certificates in one operation. ADMIN, TM only.",
        "operationId": "bulkRenewCertificates",
        "x-roles": [
          "ADMIN",
          "TM"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "certificate_ids"
                ],
                "properties": {
                  "certificate_ids": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "uuid"
                    }
                  },
                  "validity_years": {
                    "type": "integer",
                    "default": 1
                  },
                  "reason": {
                    "type": "string"
                  }
                }
              },
              "example": {
                "certificate_ids": [
                  "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Bulk renewal completed",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/certificates/expiring": {
      "get": {
        "tags": [
          "Certificates"
        ],
        "summary": "Get expiring certificates",
        "description": "Get certificates expiring within a date range. ADMIN, GM, TM, TO, CLIENT.",
        "operationId": "getExpiringCertificates",
        "x-roles": [
          "CLIENT",
          "ADMIN",
          "GM",
          "TM",
          "TO"
        ],
        "parameters": [
          {
            "name": "days",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 90
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Expiring certificates",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/CertificateResponse"
                      }
                    }
                  }
                },
                "example": {
                  "success": true,
                  "data": [
                    {
                      "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                      "certificate_number": "GIR-CERT-2026-001234",
                      "status": "VALID",
                      "issue_date": "2026-01-15",
                      "expiry_date": "2027-01-14"
                    }
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/certificates/job/{jobId}": {
      "get": {
        "tags": [
          "Certificates"
        ],
        "summary": "Get certificate by job ID",
        "description": "Get the certificate associated with a specific job ID.\n**Access:** Limited by job ownership/assignment.\n",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "operationId": "getCertificateByJobId",
        "x-roles": [
          "CLIENT",
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR"
        ],
        "parameters": [
          {
            "name": "jobId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Certificate details",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Certificate for job fetched successfully"
                    },
                    "data": {
                      "$ref": "#/components/schemas/CertificateResponse"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Certificate for job fetched successfully",
                  "data": {
                    "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                    "certificate_number": "GIR-CERT-2026-001234",
                    "status": "VALID",
                    "issue_date": "2026-01-15",
                    "expiry_date": "2027-01-14"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Job not found or certificate not yet generated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/certificates/vessel/{vesselId}": {
      "get": {
        "tags": [
          "Certificates"
        ],
        "summary": "Get certificates by vessel",
        "description": "Get all certificates for a specific vessel. Scope restricted (SURVEYOR only assigned, CLIENT only owned).",
        "operationId": "getCertificatesByVessel",
        "x-roles": [
          "CLIENT",
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR"
        ],
        "parameters": [
          {
            "name": "vesselId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Vessel certificates",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/CertificateResponse"
                      }
                    }
                  }
                },
                "example": {
                  "success": true,
                  "data": [
                    {
                      "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                      "certificate_number": "GIR-CERT-2026-001234",
                      "status": "VALID",
                      "issue_date": "2026-01-15",
                      "expiry_date": "2027-01-14"
                    }
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/certificates/{id}": {
      "get": {
        "tags": [
          "Certificates"
        ],
        "summary": "Get certificate by ID",
        "description": "Get certificate details by ID. Same RBAC as list: ADMIN/GM/TM/TO see all; SURVEYOR only assigned jobs' vessels; CLIENT only own company. Returns 403 if certificate exists but user has no access.\n",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "operationId": "getCertificateById",
        "x-roles": [
          "CLIENT",
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Certificate details",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/CertificateResponse"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "data": {
                    "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                    "certificate_number": "GIR-CERT-2026-001234",
                    "status": "VALID",
                    "issue_date": "2026-01-15",
                    "expiry_date": "2027-01-14"
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - certificate exists but user has no access",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          },
          "404": {
            "description": "Certificate not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/certificates/{id}/download": {
      "get": {
        "tags": [
          "Certificates"
        ],
        "summary": "Download certificate PDF",
        "description": "Redirects to the certificate PDF URL for download. If the certificate has a stored PDF (pdf_file_url), returns 302 redirect to that URL so the browser can open or download the file.\nCLIENT can only download certificates for their vessels.\n",
        "operationId": "downloadCertificate",
        "x-roles": [
          "CLIENT",
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Certificate ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful download (in case of direct file stream rather than redirect)",
            "content": {
              "application/pdf": {
                "schema": {
                  "type": "string",
                  "format": "binary"
                },
                "example": "file.bin"
              }
            }
          },
          "302": {
            "description": "Redirect to certificate PDF URL",
            "headers": {
              "Location": {
                "description": "URL of the certificate PDF",
                "schema": {
                  "type": "string",
                  "example": "https://storage.example.com/certificates/abc-123.pdf"
                }
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "404": {
            "description": "Certificate not found or PDF not available",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "Certificate PDF is not available for download yet."
                    }
                  }
                },
                "example": {
                  "success": false,
                  "message": "Certificate PDF is not available for download yet."
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/certificates/{id}/suspend": {
      "put": {
        "tags": [
          "Certificates"
        ],
        "summary": "Suspend certificate",
        "description": "Suspend a certificate. ADMIN, TM only.",
        "operationId": "suspendCertificate",
        "x-roles": [
          "ADMIN",
          "TM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CertActionRequest"
              },
              "example": {
                "reason": "Administrative suspension"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Certificate suspended",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string"
                    },
                    "data": {
                      "$ref": "#/components/schemas/CertificateResponse"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "string",
                  "data": {
                    "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                    "certificate_number": "GIR-CERT-2026-001234",
                    "status": "VALID",
                    "issue_date": "2026-01-15",
                    "expiry_date": "2027-01-14"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/certificates/{id}/revoke": {
      "put": {
        "tags": [
          "Certificates"
        ],
        "summary": "Revoke certificate",
        "description": "Revoke a certificate. ADMIN, TM only.",
        "operationId": "revokeCertificate",
        "x-roles": [
          "ADMIN",
          "TM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CertActionRequest"
              },
              "example": {
                "reason": "Vessel sold"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Certificate revoked",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string"
                    },
                    "data": {
                      "$ref": "#/components/schemas/CertificateResponse"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "string",
                  "data": {
                    "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                    "certificate_number": "GIR-CERT-2026-001234",
                    "status": "VALID",
                    "issue_date": "2026-01-15",
                    "expiry_date": "2027-01-14"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/certificates/{id}/restore": {
      "put": {
        "tags": [
          "Certificates"
        ],
        "summary": "Restore certificate",
        "description": "Restore a suspended certificate. ADMIN, TM only.",
        "operationId": "restoreCertificate",
        "x-roles": [
          "ADMIN",
          "TM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CertActionRequest"
              },
              "example": {
                "reason": "Issue resolved"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Certificate restored",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string"
                    },
                    "data": {
                      "$ref": "#/components/schemas/CertificateResponse"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "string",
                  "data": {
                    "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                    "certificate_number": "GIR-CERT-2026-001234",
                    "status": "VALID",
                    "issue_date": "2026-01-15",
                    "expiry_date": "2027-01-14"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/certificates/{id}/renew": {
      "put": {
        "tags": [
          "Certificates"
        ],
        "summary": "Renew certificate",
        "description": "Renew an expiring certificate. ADMIN, TM only.",
        "operationId": "renewCertificate",
        "x-roles": [
          "ADMIN",
          "TM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RenewCertRequest"
              },
              "example": {
                "validity_years": 1,
                "reason": "Standard renewal"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Certificate renewed",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string"
                    },
                    "data": {
                      "$ref": "#/components/schemas/CertificateResponse"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "string",
                  "data": {
                    "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                    "certificate_number": "GIR-CERT-2026-001234",
                    "status": "VALID",
                    "issue_date": "2026-01-15",
                    "expiry_date": "2027-01-14"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/certificates/{id}/reissue": {
      "post": {
        "tags": [
          "Certificates"
        ],
        "summary": "Reissue certificate",
        "description": "Reissue a certificate (e.g. after loss). ADMIN, TM only.",
        "operationId": "reissueCertificate",
        "x-roles": [
          "ADMIN",
          "TM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CertActionRequest"
              },
              "example": {
                "reason": "Original lost"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Certificate reissued",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string"
                    },
                    "data": {
                      "$ref": "#/components/schemas/CertificateResponse"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "string",
                  "data": {
                    "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                    "certificate_number": "GIR-CERT-2026-001234",
                    "status": "VALID",
                    "issue_date": "2026-01-15",
                    "expiry_date": "2027-01-14"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/certificates/{id}/transfer": {
      "post": {
        "tags": [
          "Certificates"
        ],
        "summary": "Transfer certificate",
        "description": "Transfer certificate ownership/association. ADMIN, GM only.",
        "operationId": "transferCertificate",
        "x-roles": [
          "ADMIN",
          "GM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CertActionRequest"
              },
              "example": {
                "reason": "Administrative suspension"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Certificate transferred",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/certificates/{id}/extend": {
      "post": {
        "tags": [
          "Certificates"
        ],
        "summary": "Extend certificate",
        "description": "Extend certificate validity. ADMIN, GM only.",
        "operationId": "extendCertificate",
        "x-roles": [
          "ADMIN",
          "GM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CertActionRequest"
              },
              "example": {
                "reason": "Administrative suspension"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Certificate extended",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/certificates/{id}/downgrade": {
      "put": {
        "tags": [
          "Certificates"
        ],
        "summary": "Downgrade certificate",
        "description": "Downgrade certificate classification/type. ADMIN, GM only.",
        "operationId": "downgradeCertificate",
        "x-roles": [
          "ADMIN",
          "GM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CertActionRequest"
              },
              "example": {
                "reason": "Administrative suspension"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Certificate downgraded",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/certificates/{id}/preview": {
      "get": {
        "tags": [
          "Certificates"
        ],
        "summary": "Preview certificate",
        "description": "Get certificate preview/PDF. ADMIN, GM, TM, TO, SURVEYOR, CLIENT.",
        "operationId": "previewCertificate",
        "x-roles": [
          "CLIENT",
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Certificate preview",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "data": {}
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/certificates/{id}/sign": {
      "post": {
        "tags": [
          "Certificates"
        ],
        "summary": "Sign certificate",
        "description": "Digitally sign a certificate. ADMIN, GM only.",
        "operationId": "signCertificate",
        "x-roles": [
          "ADMIN",
          "GM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Certificate signed",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "string"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/certificates/{id}/signature": {
      "get": {
        "tags": [
          "Certificates"
        ],
        "summary": "Get certificate signature",
        "description": "Get signature details for a certificate.",
        "operationId": "getCertificateSignature",
        "x-roles": [
          "CLIENT",
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Signature details",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                },
                "example": {}
              }
            }
          }
        }
      }
    },
    "/api/v1/certificates/{id}/history": {
      "get": {
        "tags": [
          "Certificates"
        ],
        "summary": "Get certificate history",
        "description": "Get certificate change history.",
        "operationId": "getCertificateHistory",
        "x-roles": [
          "CLIENT",
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Certificate history",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "array"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "data": []
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/change-requests": {
      "post": {
        "tags": [
          "Change Requests"
        ],
        "summary": "Create change request",
        "operationId": "createChangeRequest",
        "x-roles": [
          "CLIENT",
          "ADMIN",
          "GM",
          "TM"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "entity_type": {
                    "type": "string"
                  },
                  "entity_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "change_type": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string"
                  },
                  "requested_changes": {
                    "type": "object"
                  }
                }
              },
              "example": {
                "entity_type": "VESSEL",
                "entity_id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                "change_type": "UPDATE",
                "description": "Request to update vessel IMO number",
                "requested_changes": {
                  "imo_number": "9123457"
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Change request created",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "Change Requests"
        ],
        "summary": "Get change requests",
        "operationId": "getChangeRequests",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM"
        ],
        "responses": {
          "200": {
            "description": "List of change requests",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/change-requests/{id}/approve": {
      "put": {
        "tags": [
          "Change Requests"
        ],
        "summary": "Approve change request",
        "operationId": "approveChangeRequest",
        "x-roles": [
          "ADMIN",
          "GM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Request approved",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/change-requests/{id}/reject": {
      "put": {
        "tags": [
          "Change Requests"
        ],
        "summary": "Reject change request",
        "operationId": "rejectChangeRequest",
        "x-roles": [
          "ADMIN",
          "GM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Request rejected",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/checklist-templates": {
      "post": {
        "tags": [
          "Checklist Templates"
        ],
        "summary": "Create checklist template",
        "operationId": "createChecklistTemplate",
        "x-roles": [
          "ADMIN"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "name",
                  "code",
                  "sections"
                ],
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "code": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string"
                  },
                  "certificate_type_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "sections": {
                    "type": "array"
                  },
                  "status": {
                    "type": "string",
                    "enum": [
                      "ACTIVE",
                      "INACTIVE",
                      "DRAFT"
                    ]
                  }
                }
              },
              "example": {
                "name": "Safety Equipment Inspection",
                "code": "SAFETY_EQUIP_001",
                "description": "Standard safety equipment checklist",
                "certificate_type_id": "01933c5e-7f2b-7a00-8000-1a2b3c4d5e6f",
                "sections": [
                  {
                    "title": "Life-Saving Equipment",
                    "items": [
                      {
                        "code": "LSE001",
                        "text": "Are life jackets available?",
                        "type": "YES_NO_NA"
                      },
                      {
                        "code": "LSE002",
                        "text": "Number of life jackets",
                        "type": "NUMBER"
                      }
                    ]
                  }
                ],
                "status": "ACTIVE"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Template created",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "Checklist Templates"
        ],
        "summary": "Get checklist templates",
        "operationId": "getChecklistTemplates",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "SURVEYOR"
        ],
        "parameters": [
          {
            "name": "status",
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "certificate_type_id",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of templates",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/checklist-templates/job/{jobId}": {
      "get": {
        "tags": [
          "Checklist Templates"
        ],
        "summary": "Get template for job",
        "operationId": "getChecklistTemplateForJob",
        "x-roles": [
          "SURVEYOR",
          "ADMIN",
          "GM",
          "TM",
          "TO"
        ],
        "parameters": [
          {
            "name": "jobId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Template for job",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/checklist-templates/{id}": {
      "get": {
        "tags": [
          "Checklist Templates"
        ],
        "summary": "Get template by ID",
        "operationId": "getChecklistTemplateById",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "SURVEYOR"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Template details",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Checklist Templates"
        ],
        "summary": "Update template",
        "operationId": "updateChecklistTemplate",
        "x-roles": [
          "ADMIN"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "code": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string"
                  },
                  "status": {
                    "type": "string",
                    "enum": [
                      "ACTIVE",
                      "INACTIVE",
                      "DRAFT"
                    ]
                  }
                }
              },
              "example": {
                "name": "Safety Equipment Inspection (Updated)",
                "status": "ACTIVE"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Template updated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Checklist Templates"
        ],
        "summary": "Delete template",
        "operationId": "deleteChecklistTemplate",
        "x-roles": [
          "ADMIN"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Template deleted",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/checklist-templates/{id}/activate": {
      "put": {
        "tags": [
          "Checklist Templates"
        ],
        "summary": "Activate template",
        "operationId": "activateChecklistTemplate",
        "x-roles": [
          "ADMIN"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Template activated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/checklist-templates/{id}/clone": {
      "post": {
        "tags": [
          "Checklist Templates"
        ],
        "summary": "Clone template",
        "operationId": "cloneChecklistTemplate",
        "x-roles": [
          "ADMIN"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Template cloned",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/checklists/jobs/{jobId}": {
      "get": {
        "tags": [
          "Checklists"
        ],
        "summary": "Get checklist for a job",
        "description": "Retrieve the checklist items for a specific job. Can be filtered by answer or question code.",
        "operationId": "getChecklist",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "jobId",
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": true,
            "description": "Unique identifier of the job"
          },
          {
            "in": "query",
            "name": "answer",
            "schema": {
              "type": "string",
              "enum": [
                "YES",
                "NO",
                "NA"
              ]
            },
            "description": "Filter by answer status"
          },
          {
            "in": "query",
            "name": "question_code",
            "schema": {
              "type": "string"
            },
            "description": "Filter by specific question code"
          },
          {
            "in": "query",
            "name": "search",
            "schema": {
              "type": "string"
            },
            "description": "Search in question text or remarks"
          }
        ],
        "responses": {
          "200": {
            "description": "Checklist retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ChecklistResponse"
                },
                "example": {
                  "success": true,
                  "data": [
                    {
                      "id": "019c675a-eead-752b-b2ea-e8b5932b0cfc",
                      "job_id": "019c6152-5b55-736c-a0d3-0dc3f6f1c4ec",
                      "question_code": "LSE001",
                      "question_text": "Are life jackets available?",
                      "answer": "YES",
                      "remarks": "",
                      "file_url": null,
                      "createdAt": "2026-02-16T16:48:58.000Z",
                      "updatedAt": "2026-02-16T16:48:58.000Z"
                    },
                    {
                      "id": "019c675a-eead-752b-b2ea-ed0e46e9bbc7",
                      "job_id": "019c6152-5b55-736c-a0d3-0dc3f6f1c4ec",
                      "question_code": "LSE002",
                      "question_text": "Number of life jackets",
                      "answer": "YES",
                      "remarks": "24 units",
                      "file_url": null,
                      "createdAt": "2026-02-16T16:48:58.000Z",
                      "updatedAt": "2026-02-16T16:48:58.000Z"
                    }
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/clients": {
      "get": {
        "tags": [
          "Clients"
        ],
        "summary": "List clients",
        "description": "List all clients. ADMIN, GM, TM, TO only.",
        "operationId": "getClients",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO"
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 20
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of clients",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/ClientResponse"
                      }
                    }
                  }
                },
                "example": {
                  "success": true,
                  "data": [
                    {
                      "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                      "company_name": "string",
                      "company_code": "string",
                      "email": "user@example.com",
                      "address": "string",
                      "country": "string",
                      "status": "ACTIVE"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Clients"
        ],
        "summary": "Create client",
        "description": "Create a new client. ADMIN, GM, TM only.",
        "operationId": "createClient",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ClientCreateRequest"
              },
              "example": {
                "company_name": "Marine Shipping Co",
                "company_code": "MSC001",
                "email": "contact@marineshipping.com"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Client created",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/ClientResponse"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "data": {
                    "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                    "company_name": "string",
                    "company_code": "string",
                    "email": "user@example.com",
                    "address": "string",
                    "country": "string",
                    "status": "ACTIVE"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/clients/{id}/documents": {
      "get": {
        "tags": [
          "Clients",
          "Documents"
        ],
        "summary": "Get client documents by ID",
        "description": "Get all documents related to a specific client (Vessels, Jobs, Surveys, Profile). ADMIN, GM, TM, TO only.",
        "operationId": "getClientDocumentsById",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of documents",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "count": {
                      "type": "integer",
                      "example": 5
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object"
                      }
                    }
                  }
                },
                "example": {
                  "success": true,
                  "count": 5,
                  "data": [
                    {}
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/clients/{id}": {
      "get": {
        "tags": [
          "Clients"
        ],
        "summary": "Get client by ID",
        "description": "Get client details by ID. ADMIN, GM, TM, TO only.",
        "operationId": "getClientById",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Client details",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/ClientResponse"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "data": {
                    "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                    "company_name": "string",
                    "company_code": "string",
                    "email": "user@example.com",
                    "address": "string",
                    "country": "string",
                    "status": "ACTIVE"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Client not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Clients"
        ],
        "summary": "Update client",
        "description": "Update client details. ADMIN, GM, TM only.",
        "operationId": "updateClient",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "company_name": {
                    "type": "string"
                  },
                  "company_code": {
                    "type": "string"
                  },
                  "email": {
                    "type": "string"
                  },
                  "address": {
                    "type": "string"
                  },
                  "country": {
                    "type": "string"
                  },
                  "status": {
                    "type": "string",
                    "enum": [
                      "ACTIVE",
                      "INACTIVE"
                    ]
                  }
                }
              },
              "example": {
                "company_name": "Marine Shipping Co Ltd",
                "address": "123 Harbour Road",
                "country": "Singapore",
                "status": "ACTIVE"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Client updated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/ClientResponse"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "data": {
                    "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                    "company_name": "string",
                    "company_code": "string",
                    "email": "user@example.com",
                    "address": "string",
                    "country": "string",
                    "status": "ACTIVE"
                  }
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Clients"
        ],
        "summary": "Delete client",
        "description": "Delete a client. ADMIN only.",
        "operationId": "deleteClient",
        "x-roles": [
          "ADMIN"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Client deleted",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "string"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/compliance/export/{id}": {
      "get": {
        "tags": [
          "Compliance"
        ],
        "summary": "Export data",
        "operationId": "complianceExport",
        "x-roles": [
          "ADMIN",
          "CLIENT"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Export data",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/compliance/anonymize/{id}": {
      "post": {
        "tags": [
          "Compliance"
        ],
        "summary": "Anonymize data",
        "operationId": "complianceAnonymize",
        "x-roles": [
          "ADMIN"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Data anonymized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/contact": {
      "post": {
        "tags": [
          "Contact"
        ],
        "summary": "Submit a contact enquiry (public)",
        "operationId": "submitContactEnquiry",
        "description": "Anyone visiting the Girik Shipping portfolio website can send a message via this endpoint. No authentication is required.\n",
        "x-roles": [
          "PUBLIC"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "full_name",
                  "corporate_email",
                  "message"
                ],
                "properties": {
                  "full_name": {
                    "type": "string",
                    "minLength": 2,
                    "maxLength": 100,
                    "example": "John Maritime"
                  },
                  "company": {
                    "type": "string",
                    "maxLength": 150,
                    "example": "Pacific Shipping Co. Ltd"
                  },
                  "corporate_email": {
                    "type": "string",
                    "format": "email",
                    "example": "john@pacificshipping.com"
                  },
                  "message": {
                    "type": "string",
                    "minLength": 10,
                    "maxLength": 5000,
                    "example": "We are interested in classification services for our fleet of 5 vessels."
                  },
                  "phone": {
                    "type": "string",
                    "maxLength": 30,
                    "example": "+91 98765 43210"
                  },
                  "subject": {
                    "type": "string",
                    "maxLength": 200,
                    "example": "Fleet Classification Inquiry"
                  },
                  "source_page": {
                    "type": "string",
                    "maxLength": 50,
                    "example": "CONTACT",
                    "description": "Page on the website the form was filled from."
                  }
                }
              },
              "example": {
                "full_name": "John Maritime",
                "corporate_email": "john@pacificshipping.com",
                "message": "We are interested in classification services for our fleet of 5 vessels."
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Enquiry submitted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Your message has been received. We will get back to you shortly."
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "full_name": {
                          "type": "string"
                        },
                        "created_at": {
                          "type": "string",
                          "format": "date-time"
                        }
                      }
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Your message has been received. We will get back to you shortly.",
                  "data": {
                    "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                    "full_name": "string",
                    "created_at": "2026-03-15T10:00:00.000Z"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "Contact"
        ],
        "summary": "List all enquiries (Admin/GM)",
        "operationId": "getAllContactEnquiries",
        "description": "Retrieve all contact form submissions with optional filters and pagination.",
        "x-roles": [
          "ADMIN",
          "GM"
        ],
        "parameters": [
          {
            "in": "query",
            "name": "status",
            "schema": {
              "type": "string",
              "enum": [
                "NEW",
                "READ",
                "REPLIED",
                "ARCHIVED"
              ]
            },
            "description": "Filter by enquiry status"
          },
          {
            "in": "query",
            "name": "source_page",
            "schema": {
              "type": "string"
            },
            "description": "Filter by the page the form was submitted from"
          },
          {
            "in": "query",
            "name": "q",
            "schema": {
              "type": "string"
            },
            "description": "Full-text search across name, email, company, message"
          },
          {
            "in": "query",
            "name": "from_date",
            "schema": {
              "type": "string",
              "format": "date"
            },
            "description": "Filter: submitted on or after this date (YYYY-MM-DD)"
          },
          {
            "in": "query",
            "name": "to_date",
            "schema": {
              "type": "string",
              "format": "date"
            },
            "description": "Filter: submitted on or before this date (YYYY-MM-DD)"
          },
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer",
              "default": 1
            }
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer",
              "default": 20
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Paginated list of enquiries",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "total": {
                      "type": "integer",
                      "example": 42
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/WebsiteContact"
                      }
                    }
                  }
                },
                "example": {
                  "success": true,
                  "total": 42,
                  "data": [
                    {
                      "id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
                      "full_name": "John Maritime",
                      "company": "Pacific Shipping Co. Ltd",
                      "corporate_email": "john@pacificshipping.com",
                      "message": "We are interested in classification services for our fleet.",
                      "phone": "+91 98765 43210",
                      "subject": "Fleet Classification Inquiry",
                      "status": "NEW",
                      "internal_note": "Responded via email on 20 Feb 2026.",
                      "replied_by": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                      "replied_at": "2026-03-15T10:00:00.000Z",
                      "ip_address": "192.168.1.1",
                      "source_page": "CONTACT",
                      "created_at": "2026-03-15T10:00:00.000Z",
                      "updated_at": "2026-03-15T10:00:00.000Z",
                      "Responder": {
                        "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                        "name": "Admin User",
                        "email": "admin@girik.com"
                      }
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/contact/stats": {
      "get": {
        "tags": [
          "Contact"
        ],
        "summary": "Enquiry stats by status (Admin/GM)",
        "operationId": "getContactEnquiryStats",
        "description": "Returns counts of enquiries grouped by status, useful for a dashboard widget.",
        "x-roles": [
          "ADMIN",
          "GM"
        ],
        "responses": {
          "200": {
            "description": "Enquiry counts by status",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "NEW": {
                          "type": "integer",
                          "example": 5
                        },
                        "READ": {
                          "type": "integer",
                          "example": 12
                        },
                        "REPLIED": {
                          "type": "integer",
                          "example": 20
                        },
                        "ARCHIVED": {
                          "type": "integer",
                          "example": 3
                        },
                        "TOTAL": {
                          "type": "integer",
                          "example": 40
                        }
                      }
                    }
                  }
                },
                "example": {
                  "success": true,
                  "data": {
                    "NEW": 5,
                    "READ": 12,
                    "REPLIED": 20,
                    "ARCHIVED": 3,
                    "TOTAL": 40
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/contact/{id}": {
      "get": {
        "tags": [
          "Contact"
        ],
        "summary": "Get a single enquiry (Admin/GM)",
        "operationId": "getContactEnquiryById",
        "x-roles": [
          "ADMIN",
          "GM"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Enquiry details",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "$ref": "#/components/schemas/WebsiteContact"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "data": {
                    "id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
                    "full_name": "John Maritime",
                    "company": "Pacific Shipping Co. Ltd",
                    "corporate_email": "john@pacificshipping.com",
                    "message": "We are interested in classification services for our fleet.",
                    "phone": "+91 98765 43210",
                    "subject": "Fleet Classification Inquiry",
                    "status": "NEW",
                    "internal_note": "Responded via email on 20 Feb 2026.",
                    "replied_by": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                    "replied_at": "2026-03-15T10:00:00.000Z",
                    "ip_address": "192.168.1.1",
                    "source_page": "CONTACT",
                    "created_at": "2026-03-15T10:00:00.000Z",
                    "updated_at": "2026-03-15T10:00:00.000Z",
                    "Responder": {
                      "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                      "name": "Admin User",
                      "email": "admin@girik.com"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Contact"
        ],
        "summary": "Delete an enquiry (Admin only)",
        "operationId": "deleteContactEnquiry",
        "x-roles": [
          "ADMIN"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "404": {
            "description": "Not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/contact/{id}/status": {
      "patch": {
        "tags": [
          "Contact"
        ],
        "summary": "Update enquiry status / internal note (Admin/GM)",
        "operationId": "updateContactEnquiryStatus",
        "x-roles": [
          "ADMIN",
          "GM"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "status"
                ],
                "properties": {
                  "status": {
                    "type": "string",
                    "enum": [
                      "NEW",
                      "READ",
                      "REPLIED",
                      "ARCHIVED"
                    ],
                    "example": "REPLIED"
                  },
                  "internal_note": {
                    "type": "string",
                    "maxLength": 2000,
                    "example": "Responded via email on 20 Feb 2026."
                  }
                }
              },
              "example": {
                "status": "REPLIED"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Enquiry updated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string"
                    },
                    "data": {
                      "$ref": "#/components/schemas/WebsiteContact"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "string",
                  "data": {
                    "id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
                    "full_name": "John Maritime",
                    "company": "Pacific Shipping Co. Ltd",
                    "corporate_email": "john@pacificshipping.com",
                    "message": "We are interested in classification services for our fleet.",
                    "phone": "+91 98765 43210",
                    "subject": "Fleet Classification Inquiry",
                    "status": "NEW",
                    "internal_note": "Responded via email on 20 Feb 2026.",
                    "replied_by": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                    "replied_at": "2026-03-15T10:00:00.000Z",
                    "ip_address": "192.168.1.1",
                    "source_page": "CONTACT",
                    "created_at": "2026-03-15T10:00:00.000Z",
                    "updated_at": "2026-03-15T10:00:00.000Z",
                    "Responder": {
                      "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                      "name": "Admin User",
                      "email": "admin@girik.com"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          },
          "404": {
            "description": "Not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/dashboard": {
      "get": {
        "tags": [
          "Dashboard"
        ],
        "summary": "Get dashboard",
        "description": "Get role-specific dashboard data. Structure varies by user role:\n- ADMIN: System-wide stats, pending approvals\n- GM: Management dashboard\n- TM: Technical manager view\n- TO: Technical officer view\n- SURVEYOR: Assigned jobs, availability\n- CLIENT: Vessel/job overview\n",
        "operationId": "getDashboard",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "TA",
          "SURVEYOR",
          "CLIENT",
          "FLAG_ADMIN"
        ],
        "responses": {
          "200": {
            "description": "Dashboard data",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DashboardResponse"
                },
                "example": {
                  "success": true,
                  "data": {
                    "stats": {
                      "pendingJobs": 5,
                      "totalCertificates": 120
                    },
                    "recentJobs": [],
                    "expiringCertificates": []
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/documents/upload": {
      "post": {
        "tags": [
          "Documents"
        ],
        "summary": "Upload a standalone document file (No Entity needed yet)",
        "description": "Upload a file strictly to standard storage and receive its URL. Useful for uploading files before creating vessels or jobs.",
        "operationId": "uploadStandaloneFile",
        "x-roles": [
          "CLIENT",
          "ADMIN",
          "GM",
          "TM",
          "SURVEYOR"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "required": [
                  "file"
                ],
                "properties": {
                  "file": {
                    "type": "string",
                    "format": "binary"
                  },
                  "folder": {
                    "type": "string",
                    "description": "Optional folder name for grouping (e.g. 'vessels', 'user-docs')"
                  }
                }
              },
              "example": {
                "file": "file.bin"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "File uploaded successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "file_url": {
                          "type": "string",
                          "example": "https://bucket.s3.amazonaws.com/temp/my-file.pdf"
                        }
                      }
                    }
                  }
                },
                "example": {
                  "success": true,
                  "data": {
                    "file_url": "https://bucket.s3.amazonaws.com/temp/my-file.pdf"
                  }
                }
              }
            }
          },
          "400": {
            "description": "No file provided",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/documents/{entityType}/{entityId}": {
      "get": {
        "tags": [
          "Documents"
        ],
        "summary": "Get documents",
        "operationId": "getDocuments",
        "x-roles": [
          "CLIENT",
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR"
        ],
        "parameters": [
          {
            "name": "entityType",
            "in": "path",
            "required": true,
            "description": "The type of entity (e.g., VESSEL, JOB, CERTIFICATE, USER, SURVEY)",
            "schema": {
              "type": "string",
              "example": "JOB"
            }
          },
          {
            "name": "entityId",
            "in": "path",
            "required": true,
            "description": "The UUID of the specific entity",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of documents retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "entity_type": {
                            "type": "string"
                          },
                          "entity_id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "file_url": {
                            "type": "string"
                          },
                          "uploaded_at": {
                            "type": "string",
                            "format": "date-time"
                          }
                        }
                      }
                    }
                  }
                },
                "example": {
                  "success": true,
                  "data": [
                    {
                      "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                      "entity_type": "string",
                      "entity_id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                      "file_url": "string",
                      "uploaded_at": "2026-03-15T10:00:00.000Z"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Documents"
        ],
        "summary": "Upload document",
        "operationId": "uploadDocument",
        "x-roles": [
          "CLIENT",
          "ADMIN",
          "GM",
          "TM",
          "SURVEYOR"
        ],
        "parameters": [
          {
            "name": "entityType",
            "in": "path",
            "required": true,
            "description": "The type of entity to attach the document to (e.g., VESSEL, JOB, CERTIFICATE, USER, SURVEY)",
            "schema": {
              "type": "string",
              "example": "JOB"
            }
          },
          {
            "name": "entityId",
            "in": "path",
            "required": true,
            "description": "The UUID of the specific entity",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "required": [
                  "files"
                ],
                "properties": {
                  "files": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "binary"
                    }
                  },
                  "document_type": {
                    "type": "string",
                    "description": "Type of document (e.g., EVIDENCE, REPORT)"
                  },
                  "description": {
                    "type": "string",
                    "description": "Optional description of the document"
                  }
                }
              },
              "example": {
                "files": [
                  "(Binary file data 1)",
                  "(Binary file data 2)"
                ],
                "document_type": "EVIDENCE",
                "description": "Photos of cracked hull"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Documents uploaded successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "count": {
                      "type": "integer",
                      "example": 2
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "file_url": {
                            "type": "string"
                          },
                          "document_type": {
                            "type": "string"
                          },
                          "description": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  }
                },
                "example": {
                  "success": true,
                  "count": 2,
                  "data": [
                    {
                      "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                      "file_url": "string",
                      "document_type": "string",
                      "description": "string"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/documents/{id}": {
      "get": {
        "tags": [
          "Documents"
        ],
        "summary": "Get document by ID",
        "operationId": "getDocumentById",
        "x-roles": [
          "CLIENT",
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Document retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "entity_type": {
                          "type": "string"
                        },
                        "entity_id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "file_url": {
                          "type": "string"
                        },
                        "uploaded_at": {
                          "type": "string",
                          "format": "date-time"
                        }
                      }
                    }
                  }
                },
                "example": {
                  "success": true,
                  "data": {
                    "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                    "entity_type": "string",
                    "entity_id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                    "file_url": "string",
                    "uploaded_at": "2026-03-15T10:00:00.000Z"
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          },
          "404": {
            "description": "Document not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Documents"
        ],
        "summary": "Delete document",
        "operationId": "deleteDocument",
        "x-roles": [
          "ADMIN",
          "GM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Document deleted",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/customer-feedback": {
      "get": {
        "tags": [
          "Feedback"
        ],
        "summary": "Get all feedback",
        "operationId": "getAllFeedback",
        "x-roles": [
          "ADMIN",
          "GM"
        ],
        "responses": {
          "200": {
            "description": "List of feedback",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/customer-feedback/job/{jobId}": {
      "get": {
        "tags": [
          "Feedback"
        ],
        "summary": "Get feedback for job",
        "operationId": "getFeedbackForJob",
        "x-roles": [
          "ADMIN",
          "GM",
          "CLIENT"
        ],
        "parameters": [
          {
            "name": "jobId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Job feedback",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/flags": {
      "post": {
        "tags": [
          "Flags"
        ],
        "summary": "Create flag",
        "operationId": "createFlag",
        "x-roles": [
          "ADMIN"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "flag_state_name",
                  "country",
                  "authority_name",
                  "contact_email"
                ],
                "properties": {
                  "flag_state_name": {
                    "type": "string"
                  },
                  "country": {
                    "type": "string"
                  },
                  "authority_name": {
                    "type": "string"
                  },
                  "contact_email": {
                    "type": "string",
                    "format": "email"
                  }
                }
              },
              "example": {
                "flag_state_name": "Singapore",
                "country": "Singapore",
                "authority_name": "Maritime and Port Authority",
                "contact_email": "mpa@gov.sg"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Flag created",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "Flags"
        ],
        "summary": "Get flags",
        "operationId": "getFlags",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO"
        ],
        "responses": {
          "200": {
            "description": "List of flags",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/flags/{id}": {
      "put": {
        "tags": [
          "Flags"
        ],
        "summary": "Update flag",
        "operationId": "updateFlag",
        "x-roles": [
          "ADMIN"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "flag_state_name": {
                    "type": "string"
                  },
                  "country": {
                    "type": "string"
                  },
                  "authority_name": {
                    "type": "string"
                  },
                  "contact_email": {
                    "type": "string",
                    "format": "email"
                  }
                }
              },
              "example": {
                "authority_name": "Maritime and Port Authority of Singapore"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Flag updated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/health": {
      "get": {
        "tags": [
          "Health"
        ],
        "summary": "Health check",
        "description": "Returns server health status. No authentication required.",
        "security": [],
        "operationId": "getHealth",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "TA",
          "SURVEYOR",
          "CLIENT",
          "FLAG_ADMIN"
        ],
        "responses": {
          "200": {
            "description": "Server is healthy",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "example": "UP"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                },
                "example": {
                  "status": "UP",
                  "timestamp": "2026-02-13T10:00:00.000Z"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/incidents": {
      "post": {
        "tags": [
          "Incidents"
        ],
        "summary": "Report incident",
        "operationId": "reportIncident",
        "x-roles": [
          "CLIENT",
          "ADMIN",
          "GM",
          "TM"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "description"
                ],
                "properties": {
                  "job_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "vessel_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "title": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string"
                  },
                  "severity": {
                    "type": "string",
                    "enum": [
                      "LOW",
                      "MEDIUM",
                      "HIGH",
                      "CRITICAL"
                    ]
                  }
                }
              },
              "example": {
                "job_id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                "title": "Equipment malfunction",
                "description": "Lifeboat davit not functioning properly during drill",
                "severity": "HIGH"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Incident reported",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "Incidents"
        ],
        "summary": "Get incidents",
        "operationId": "getIncidents",
        "x-roles": [
          "CLIENT",
          "ADMIN",
          "GM",
          "TM",
          "TO"
        ],
        "responses": {
          "200": {
            "description": "List of incidents",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/incidents/{id}": {
      "get": {
        "tags": [
          "Incidents"
        ],
        "summary": "Get incident by ID",
        "operationId": "getIncidentById",
        "x-roles": [
          "CLIENT",
          "ADMIN",
          "GM",
          "TM",
          "TO"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Incident details",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/incidents/{id}/status": {
      "put": {
        "tags": [
          "Incidents"
        ],
        "summary": "Update incident status",
        "operationId": "updateIncidentStatus",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "status"
                ],
                "properties": {
                  "status": {
                    "type": "string",
                    "enum": [
                      "REPORTED",
                      "UNDER_REVIEW",
                      "RESOLVED",
                      "CLOSED"
                    ]
                  },
                  "resolution_notes": {
                    "type": "string"
                  }
                }
              },
              "example": {
                "status": "RESOLVED",
                "resolution_notes": "Davits repaired. Verified during re-inspection."
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Status updated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/jobs": {
      "get": {
        "tags": [
          "Jobs"
        ],
        "summary": "List jobs (role-filtered)",
        "description": "Returns a paginated list of job requests. Visible set depends on caller role:\n- **CLIENT** – Only jobs for their fleet (vessel_id filtered to client).\n- **SURVEYOR** – Only jobs assigned to them (`assigned_surveyor_id = me`).\n- **ADMIN / GM / TM / TO / TA / FLAG_ADMIN** – All jobs; defaults to last 30 days\n  unless explicit filters are supplied.\n\nSupply `status` as a **comma-separated** string to filter by multiple statuses,\ne.g. `?status=ASSIGNED,SURVEY_AUTHORIZED`.\n",
        "operationId": "getJobs",
        "x-roles": [
          "CLIENT",
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "TA",
          "FLAG_ADMIN",
          "SURVEYOR"
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "description": "Page number (1-indexed)",
            "schema": {
              "type": "integer",
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Records per page",
            "schema": {
              "type": "integer",
              "default": 10
            }
          },
          {
            "name": "status",
            "in": "query",
            "description": "Filter by status (single value or comma-separated list)",
            "schema": {
              "type": "string",
              "example": "ASSIGNED,SURVEY_AUTHORIZED"
            }
          },
          {
            "name": "vessel_id",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "certificate_type_id",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "assigned_surveyor_id",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "target_port",
            "in": "query",
            "schema": {
              "type": "string",
              "example": "Singapore"
            }
          },
          {
            "name": "created_from",
            "in": "query",
            "description": "ISO date string – start of creation window",
            "schema": {
              "type": "string",
              "format": "date"
            }
          },
          {
            "name": "created_to",
            "in": "query",
            "description": "ISO date string – end of creation window",
            "schema": {
              "type": "string",
              "format": "date"
            }
          },
          {
            "name": "recent_days",
            "in": "query",
            "description": "(Internal roles only) Shortcut to filter to last N days when no other date\nfilter is given. Default is 30.\n",
            "schema": {
              "type": "integer",
              "example": 30
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Paginated list of jobs",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "total": {
                          "type": "integer",
                          "example": 42
                        },
                        "page": {
                          "type": "integer",
                          "example": 1
                        },
                        "limit": {
                          "type": "integer",
                          "example": 10
                        },
                        "totalPages": {
                          "type": "integer",
                          "example": 5
                        },
                        "jobs": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/JobResponse"
                          }
                        }
                      }
                    }
                  }
                },
                "example": {
                  "success": true,
                  "data": {
                    "total": 42,
                    "page": 1,
                    "limit": 10,
                    "totalPages": 5,
                    "jobs": [
                      {
                        "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                        "vessel_id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                        "job_status": "CREATED",
                        "reason": "Annual survey due",
                        "target_port": "Singapore",
                        "target_date": "2026-03-15"
                      }
                    ]
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized – missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden – role not allowed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Jobs"
        ],
        "summary": "Create job request",
        "description": "Opens a new certification job request in **CREATED** status.\n- **CLIENT** – Can only submit for vessels that belong to their account.\n- **ADMIN / GM** – Can submit for any vessel.\n\nIf the selected `certificate_type_id` has mandatory required documents\n(`CertificateRequiredDocument` where `is_mandatory=true`), each must be\nincluded in `uploaded_documents`; otherwise the request will be rejected\nwith a `400` listing the missing documents.\n",
        "operationId": "createJob",
        "x-roles": [
          "CLIENT",
          "ADMIN",
          "GM"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/JobCreateRequest"
              },
              "example": {
                "vessel_id": "019c574f-0991-7758-b696-03bb416c7433",
                "certificate_type_id": "019c79a4-55ba-773c-9454-f6bee169ab03",
                "reason": "Annual survey due",
                "target_port": "Singapore",
                "target_date": "2026-04-15",
                "uploaded_documents": [
                  {
                    "required_document_id": "019c4001-0002-7000-a000-000000000001",
                    "file_url": "https://cdn.example.com/docs/reg-cert.pdf"
                  }
                ]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Job created successfully (status = CREATED)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/JobResponse"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "data": {
                    "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                    "vessel_id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                    "job_status": "CREATED",
                    "reason": "Annual survey due",
                    "target_port": "Singapore",
                    "target_date": "2026-03-15"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Validation error or missing mandatory documents",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "Missing mandatory documents for job creation."
                    },
                    "missing_documents": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "name": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  }
                },
                "example": {
                  "success": false,
                  "message": "Missing mandatory documents for job creation.",
                  "missing_documents": [
                    {
                      "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                      "name": "string"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/jobs/{id}": {
      "get": {
        "tags": [
          "Jobs"
        ],
        "summary": "Get job details",
        "description": "Returns full job detail including vessel, certificate type, status history,\nuploaded documents, reschedule records, and certificate (with signed URL if\napplicable).\n- **CLIENT** – Own fleet only.\n- **SURVEYOR** – Only if assigned to them.\n- **ADMIN / GM / TM / TO** – Any job.\n",
        "operationId": "getJobById",
        "x-roles": [
          "CLIENT",
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "Job UUID",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Job details",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/JobResponse"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "data": {
                    "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                    "vessel_id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                    "job_status": "CREATED",
                    "reason": "Annual survey due",
                    "target_port": "Singapore",
                    "target_date": "2026-03-15"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          },
          "404": {
            "description": "Job not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/jobs/{id}/approve-request": {
      "put": {
        "tags": [
          "Jobs"
        ],
        "summary": "GM/ADMIN: Approve request → APPROVED",
        "description": "**Transition:** `DOCUMENT_VERIFIED → APPROVED`\n\nGeneral Manager or Admin formally approves the job request after document\nverification. Records `approved_by_user_id` on the job.\n\n**Roles:** ADMIN, GM\n",
        "operationId": "approveRequest",
        "x-roles": [
          "ADMIN",
          "GM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "remarks": {
                    "type": "string",
                    "example": "All documents verified. Request approved."
                  }
                }
              },
              "example": {
                "remarks": "All documents verified. Request approved."
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Job approved. Status → APPROVED.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Job approved."
                    },
                    "data": {
                      "$ref": "#/components/schemas/JobResponse"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Job approved.",
                  "data": {
                    "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                    "vessel_id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                    "job_status": "CREATED",
                    "reason": "Annual survey due",
                    "target_port": "Singapore",
                    "target_date": "2026-03-15"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Job not in DOCUMENT_VERIFIED state",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden – only ADMIN or GM",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          },
          "404": {
            "description": "Job not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/jobs/{id}/finalize": {
      "put": {
        "tags": [
          "Jobs"
        ],
        "summary": "ADMIN/GM/TM: Finalize non-survey job → FINALIZED",
        "description": "**Transition:** `APPROVED → FINALIZED`\n\nOnly applicable to jobs where `is_survey_required = false`. For jobs that\nrequire a survey, finalization happens automatically when the survey is\ncompleted and the TM finalizes the survey report.\n\n**Roles:** ADMIN, GM, TM\n",
        "operationId": "finalizeJob",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "remarks": {
                    "type": "string",
                    "example": "No survey required. Finalizing."
                  }
                }
              },
              "example": {
                "remarks": "No survey required. Finalizing."
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Job finalized. Status → FINALIZED.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Job finalized."
                    },
                    "data": {
                      "$ref": "#/components/schemas/JobResponse"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Job finalized.",
                  "data": {
                    "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                    "vessel_id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                    "job_status": "CREATED",
                    "reason": "Annual survey due",
                    "target_port": "Singapore",
                    "target_date": "2026-03-15"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Job requires a survey (is_survey_required=true), or not in APPROVED state",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          },
          "404": {
            "description": "Job not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/jobs/{id}/assign": {
      "put": {
        "tags": [
          "Jobs"
        ],
        "summary": "ADMIN/GM: Assign surveyor → ASSIGNED",
        "description": "**Transition:** `APPROVED → ASSIGNED`\n\nAssigns a surveyor to the job. The target user must exist and have\n`role = SURVEYOR`. Records `assigned_surveyor_id` and `assigned_by_user_id`\nand sends a push notification to the surveyor.\n\n**Roles:** ADMIN, GM\n",
        "operationId": "assignSurveyor",
        "x-roles": [
          "ADMIN",
          "GM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AssignSurveyorRequest"
              },
              "example": {
                "surveyorId": "019c79a4-4930-71fd-aa73-887301791935"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Surveyor assigned. Status → ASSIGNED.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Surveyor assigned."
                    },
                    "data": {
                      "$ref": "#/components/schemas/JobResponse"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Surveyor assigned.",
                  "data": {
                    "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                    "vessel_id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                    "job_status": "CREATED",
                    "reason": "Annual survey due",
                    "target_port": "Singapore",
                    "target_date": "2026-03-15"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Job not in APPROVED state, or surveyorId is invalid / not a SURVEYOR",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden – only ADMIN or GM",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          },
          "404": {
            "description": "Job not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/jobs/{id}/authorize-survey": {
      "put": {
        "tags": [
          "Jobs"
        ],
        "summary": "ADMIN/TM: Authorize survey → SURVEY_AUTHORIZED",
        "description": "**Transition:** `ASSIGNED → SURVEY_AUTHORIZED`\n\nAdmin or Technical Manager formally authorizes the survey to proceed.\nRequires a surveyor to already be assigned. Notifies the surveyor and the\nclient. The surveyor can now call `POST /api/v1/surveys/start` to begin.\n\n**Roles:** ADMIN, TM\n",
        "operationId": "authorizeSurvey",
        "x-roles": [
          "ADMIN",
          "TM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "remarks": {
                    "type": "string",
                    "example": "Authorization granted. Proceed to vessel."
                  }
                }
              },
              "example": {
                "remarks": "Authorization granted. Proceed to vessel."
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Survey authorized. Status → SURVEY_AUTHORIZED.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Survey authorized. Surveyor can now begin field work."
                    },
                    "data": {
                      "$ref": "#/components/schemas/JobResponse"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Survey authorized. Surveyor can now begin field work.",
                  "data": {
                    "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                    "vessel_id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                    "job_status": "CREATED",
                    "reason": "Annual survey due",
                    "target_port": "Singapore",
                    "target_date": "2026-03-15"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Job not in ASSIGNED state, or no surveyor assigned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden – only ADMIN or TM",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          },
          "404": {
            "description": "Job not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/jobs/{id}/send-back": {
      "put": {
        "tags": [
          "Jobs"
        ],
        "summary": "ADMIN/TM/TO: Request rework → REWORK_REQUESTED",
        "description": "**Transition:** `SURVEY_DONE` or `REVIEWED → REWORK_REQUESTED`\n\nSends the job back to the surveyor for corrections.\nNotifies the assigned surveyor with the `remarks` reason.\n\nRole-specific from-state constraints:\n- **ADMIN** – Any non-terminal state.\n- **TM** – `SURVEY_DONE` or `REVIEWED`.\n- **TO** – `SURVEY_DONE` only.\n\n**Roles:** ADMIN, TM, TO\n",
        "operationId": "sendBackJob",
        "x-roles": [
          "ADMIN",
          "TM",
          "TO"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "remarks": {
                    "type": "string",
                    "example": "Engine section checklist is incomplete. Please revise."
                  }
                }
              },
              "example": {
                "remarks": "Engine section checklist is incomplete. Please revise."
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Rework requested. Status → REWORK_REQUESTED.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Rework requested. Surveyor has been notified."
                    },
                    "data": {
                      "$ref": "#/components/schemas/JobResponse"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Rework requested. Surveyor has been notified.",
                  "data": {
                    "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                    "vessel_id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                    "job_status": "CREATED",
                    "reason": "Annual survey due",
                    "target_port": "Singapore",
                    "target_date": "2026-03-15"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Role-state constraint violation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          },
          "404": {
            "description": "Job not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/jobs/{id}/reschedule": {
      "put": {
        "tags": [
          "Jobs"
        ],
        "summary": "ADMIN/GM: Reschedule job date/port",
        "description": "Updates `target_date` and/or `target_port` for an existing job.\nAllowed when the job is in any of: `CREATED`, `DOCUMENT_VERIFIED`,\n`APPROVED`, `ASSIGNED`, `SURVEY_AUTHORIZED`.  \nNot allowed after survey starts or in terminal states.\n\nLogs the old and new values in `job_reschedules` and notifies the\nassigned surveyor (if any).\n\n**Roles:** ADMIN, GM\n",
        "operationId": "rescheduleJob",
        "x-roles": [
          "ADMIN",
          "GM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RescheduleJobRequest"
              },
              "example": {
                "new_target_date": "2026-05-01",
                "new_target_port": "Rotterdam",
                "reason": "Port congestion at Singapore. Rerouted to Rotterdam."
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Job rescheduled successfully.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Job rescheduled successfully."
                    },
                    "data": {
                      "$ref": "#/components/schemas/JobResponse"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Job rescheduled successfully.",
                  "data": {
                    "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                    "vessel_id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                    "job_status": "CREATED",
                    "reason": "Annual survey due",
                    "target_port": "Singapore",
                    "target_date": "2026-03-15"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Rescheduling not allowed in current state (e.g. IN_PROGRESS or terminal),\nor `reason` is missing.\n",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden – only ADMIN or GM",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          },
          "404": {
            "description": "Job not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/jobs/{id}/reject": {
      "put": {
        "tags": [
          "Jobs"
        ],
        "summary": "ADMIN/GM/TM: Reject job → REJECTED (terminal)",
        "description": "**Terminal transition** – moves job to `REJECTED` permanently.\n\nRole-specific constraints:\n- **ADMIN** – Any non-terminal job.\n- **GM** – Only in `CREATED` state.\n- **TM** – Only in `ASSIGNED`, `SURVEY_DONE`, or `REVIEWED` states.\n\n**Roles:** ADMIN, GM, TM\n",
        "operationId": "rejectJob",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "remarks": {
                    "type": "string",
                    "example": "Insufficient documentation. Cannot proceed."
                  }
                }
              },
              "example": {
                "remarks": "Insufficient documentation. Cannot proceed."
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Job rejected. Status → REJECTED (terminal).",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Job rejected."
                    },
                    "data": {
                      "$ref": "#/components/schemas/JobResponse"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Job rejected.",
                  "data": {
                    "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                    "vessel_id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                    "job_status": "CREATED",
                    "reason": "Annual survey due",
                    "target_port": "Singapore",
                    "target_date": "2026-03-15"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Job already in terminal state, or role-state constraint violated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          },
          "404": {
            "description": "Job not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/jobs/{id}/cancel": {
      "put": {
        "tags": [
          "Jobs"
        ],
        "summary": "CLIENT/GM/TM/ADMIN: Cancel job → REJECTED (terminal)",
        "description": "Cancels the job. Maps internally to the `REJECTED` terminal state.\n\n- **CLIENT** – Must own the vessel; cannot cancel once `FINALIZED`,\n  `CERTIFIED`, or `REJECTED`.\n- **GM / TM / ADMIN** – Any non-terminal job.\n\n**Roles:** CLIENT, GM, TM, ADMIN\n",
        "operationId": "cancelJob",
        "x-roles": [
          "CLIENT",
          "GM",
          "TM",
          "ADMIN"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "reason": {
                    "type": "string",
                    "example": "No longer required."
                  }
                }
              },
              "example": {
                "reason": "No longer required."
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Job cancelled. Status → REJECTED.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Job cancelled."
                    },
                    "data": {
                      "$ref": "#/components/schemas/JobResponse"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Job cancelled.",
                  "data": {
                    "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                    "vessel_id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                    "job_status": "CREATED",
                    "reason": "Annual survey due",
                    "target_port": "Singapore",
                    "target_date": "2026-03-15"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Job already in terminal state",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden – CLIENT trying to cancel a job for a vessel they don't own",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          },
          "404": {
            "description": "Job not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/jobs/{id}/priority": {
      "put": {
        "tags": [
          "Jobs"
        ],
        "summary": "ADMIN/GM/TM: Update job priority",
        "description": "Updates the `priority` field of a job. Creates an audit log entry with\nthe old and new values plus an optional reason.\n\nPriority does **not** affect the job workflow or status — it is a\nmanagement flag only, used to sort / filter jobs in dashboards.\n\n| Value | Meaning |\n|---|---|\n| `LOW` | Non-urgent, can wait |\n| `NORMAL` | Standard priority (default) |\n| `HIGH` | Requires prompt attention |\n| `URGENT` | Must be actioned immediately |\n\n**Roles:** ADMIN, GM, TM\n",
        "operationId": "updateJobPriority",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "priority"
                ],
                "properties": {
                  "priority": {
                    "type": "string",
                    "enum": [
                      "LOW",
                      "NORMAL",
                      "HIGH",
                      "URGENT"
                    ],
                    "example": "HIGH"
                  },
                  "reason": {
                    "type": "string",
                    "example": "Client requested expedited review."
                  }
                }
              },
              "example": {
                "priority": "HIGH"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Priority updated successfully.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/JobResponse"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "data": {
                    "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                    "vessel_id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                    "job_status": "CREATED",
                    "reason": "Annual survey due",
                    "target_port": "Singapore",
                    "target_date": "2026-03-15"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          },
          "404": {
            "description": "Job not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/jobs/{id}/history": {
      "get": {
        "tags": [
          "Jobs"
        ],
        "summary": "ADMIN/GM/TM/TO: Job status history & audit trail",
        "description": "Returns a chronological list of all status transitions for the job,\nincluding who made each change and the reason.\n\n**Roles:** ADMIN, GM, TM, TO\n",
        "operationId": "getJobHistory",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Status history list",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/JobHistoryItem"
                      }
                    }
                  }
                },
                "example": {
                  "success": true,
                  "data": [
                    {
                      "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                      "job_id": "string",
                      "old_status": "string",
                      "new_status": "string",
                      "changed_by": "string",
                      "change_reason": "string",
                      "created_at": "2026-03-15T10:00:00.000Z",
                      "User": {
                        "name": "string",
                        "email": "string",
                        "role": "string"
                      }
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          },
          "404": {
            "description": "Job not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/jobs/{id}/notes": {
      "post": {
        "tags": [
          "Jobs"
        ],
        "summary": "ADMIN/GM/TM/TO: Add internal staff note",
        "description": "Attaches a private (internal) note to the job visible only to staff roles.\nNotes are not visible to CLIENT or SURVEYOR.\n\n**Roles:** ADMIN, GM, TM, TO\n",
        "operationId": "addInternalNote",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AddNoteRequest"
              },
              "example": {
                "note_text": "Vessel owner confirmed availability for week of Apr 14."
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Note added successfully.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/JobNoteResponse"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "data": {
                    "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                    "job_id": "string",
                    "user_id": "string",
                    "note_text": "string",
                    "is_internal": true,
                    "created_at": "2026-03-15T10:00:00.000Z"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          },
          "404": {
            "description": "Job not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/jobs/{id}/messages/external": {
      "get": {
        "tags": [
          "Jobs"
        ],
        "summary": "Get external (client-visible) messages",
        "description": "Returns the external message thread for a job — visible to CLIENT,\nstaff, and the assigned SURVEYOR.\n\n**Roles:** CLIENT, ADMIN, GM, TM, TO, SURVEYOR\n",
        "operationId": "getExternalMessages",
        "x-roles": [
          "CLIENT",
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "External message thread",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/JobMessageResponse"
                      }
                    }
                  }
                },
                "example": {
                  "success": true,
                  "data": [
                    {
                      "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                      "job_id": "string",
                      "sender_id": "string",
                      "message_text": "string",
                      "is_internal": true,
                      "attachment_url": "https://example.com/resource",
                      "created_at": "2026-03-15T10:00:00.000Z",
                      "Sender": {
                        "name": "string",
                        "role": "string"
                      }
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/jobs/{id}/messages/internal": {
      "get": {
        "tags": [
          "Jobs"
        ],
        "summary": "ADMIN/GM/TM/TO: Get internal (staff-only) messages",
        "description": "Returns the internal message thread for a job — staff only, not\nvisible to CLIENT or SURVEYOR.\n\n**Roles:** ADMIN, GM, TM, TO\n",
        "operationId": "getInternalMessages",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Internal message thread",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/JobMessageResponse"
                      }
                    }
                  }
                },
                "example": {
                  "success": true,
                  "data": [
                    {
                      "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                      "job_id": "string",
                      "sender_id": "string",
                      "message_text": "string",
                      "is_internal": true,
                      "attachment_url": "https://example.com/resource",
                      "created_at": "2026-03-15T10:00:00.000Z",
                      "Sender": {
                        "name": "string",
                        "role": "string"
                      }
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/jobs/{id}/messages": {
      "post": {
        "tags": [
          "Jobs"
        ],
        "summary": "Send message (with optional attachment)",
        "description": "Posts a new message to the job thread. Supports text-only or multipart\nwith a file attachment.\n\n**Roles:** CLIENT, ADMIN, GM, TM, TO, SURVEYOR\n",
        "operationId": "sendJobMessage",
        "x-roles": [
          "CLIENT",
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "content": {
                    "type": "string",
                    "description": "Message text",
                    "example": "Please review the updated checklist attached."
                  },
                  "attachment": {
                    "type": "string",
                    "format": "binary",
                    "description": "Optional file attachment"
                  }
                }
              },
              "example": {
                "content": "Please review the updated checklist attached.",
                "attachment": "file.bin"
              }
            },
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "content"
                ],
                "properties": {
                  "content": {
                    "type": "string",
                    "example": "Vessel is ready for inspection."
                  }
                }
              },
              "example": {
                "content": "Vessel is ready for inspection."
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Message sent successfully.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/JobMessageResponse"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "data": {
                    "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                    "job_id": "string",
                    "sender_id": "string",
                    "message_text": "string",
                    "is_internal": true,
                    "attachment_url": "https://example.com/resource",
                    "created_at": "2026-03-15T10:00:00.000Z",
                    "Sender": {
                      "name": "string",
                      "role": "string"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          },
          "404": {
            "description": "Job not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/non-conformities/job/{jobId}": {
      "get": {
        "tags": [
          "Non-Conformities"
        ],
        "summary": "Get NCs by job",
        "operationId": "getNCsByJob",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR"
        ],
        "parameters": [
          {
            "name": "jobId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of NCs",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/notifications": {
      "get": {
        "tags": [
          "Notifications"
        ],
        "summary": "Get notifications",
        "operationId": "getNotifications",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "TA",
          "SURVEYOR",
          "CLIENT",
          "FLAG_ADMIN"
        ],
        "responses": {
          "200": {
            "description": "List of notifications retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string",
                        "format": "uuid"
                      },
                      "title": {
                        "type": "string",
                        "example": "Job Assigned"
                      },
                      "message": {
                        "type": "string",
                        "example": "You have been assigned to survey Sea Star."
                      },
                      "type": {
                        "type": "string",
                        "example": "JOB_ASSIGNED"
                      },
                      "is_read": {
                        "type": "boolean",
                        "example": false
                      },
                      "created_at": {
                        "type": "string",
                        "format": "date-time"
                      }
                    }
                  }
                },
                "example": [
                  {
                    "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                    "title": "Job Assigned",
                    "message": "You have been assigned to survey Sea Star.",
                    "type": "JOB_ASSIGNED",
                    "is_read": false,
                    "created_at": "2026-03-15T10:00:00.000Z"
                  }
                ]
              }
            }
          }
        }
      }
    },
    "/api/v1/notifications/{id}/read": {
      "put": {
        "tags": [
          "Notifications"
        ],
        "summary": "Mark as read",
        "operationId": "markNotificationRead",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "TA",
          "SURVEYOR",
          "CLIENT",
          "FLAG_ADMIN"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Marked as read",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/notifications/read-all": {
      "put": {
        "tags": [
          "Notifications"
        ],
        "summary": "Mark all as read",
        "operationId": "markAllNotificationsRead",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "TA",
          "SURVEYOR",
          "CLIENT",
          "FLAG_ADMIN"
        ],
        "responses": {
          "200": {
            "description": "All marked as read",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/payments": {
      "get": {
        "tags": [
          "Payments"
        ],
        "summary": "List payments",
        "description": "List payments. CLIENT sees only their payments.",
        "operationId": "getPayments",
        "x-roles": [
          "CLIENT",
          "ADMIN",
          "GM",
          "TM"
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 20
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of payments",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/PaymentResponse"
                      }
                    }
                  }
                },
                "example": {
                  "success": true,
                  "data": [
                    {
                      "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                      "invoice_number": "INV-2026-001234",
                      "amount": 1500,
                      "payment_status": "UNPAID"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/payments/summary": {
      "get": {
        "tags": [
          "Payments"
        ],
        "summary": "Financial summary",
        "description": "Get financial summary. CLIENT, ADMIN, GM only.",
        "operationId": "getFinancialSummary",
        "x-roles": [
          "CLIENT",
          "ADMIN",
          "GM"
        ],
        "responses": {
          "200": {
            "description": "Financial summary",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/FinancialSummaryResponse"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "data": {
                    "total_outstanding": 1.5,
                    "total_paid": 1.5,
                    "total_invoiced": 1.5,
                    "payments": [
                      {
                        "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                        "invoice_number": "INV-2026-001234",
                        "amount": 1500,
                        "currency": "USD",
                        "payment_status": "UNPAID"
                      }
                    ]
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/payments/invoice": {
      "post": {
        "tags": [
          "Payments"
        ],
        "summary": "Create invoice",
        "description": "Create a new invoice for a job. ADMIN, GM, TM only.",
        "operationId": "createInvoice",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateInvoiceRequest"
              },
              "example": {
                "job_id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                "amount": 1500,
                "currency": "USD"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Invoice created",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/PaymentResponse"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "data": {
                    "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                    "invoice_number": "INV-2026-001234",
                    "amount": 1500,
                    "currency": "USD",
                    "payment_status": "UNPAID"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/payments/{id}": {
      "get": {
        "tags": [
          "Payments"
        ],
        "summary": "Get payment by ID",
        "description": "Get payment details by ID.",
        "operationId": "getPaymentById",
        "x-roles": [
          "CLIENT",
          "ADMIN",
          "GM",
          "TM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Payment details",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/PaymentResponse"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "data": {
                    "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                    "invoice_number": "INV-2026-001234",
                    "amount": 1500,
                    "currency": "USD",
                    "payment_status": "UNPAID"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Payment not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/payments/{id}/pay": {
      "put": {
        "tags": [
          "Payments"
        ],
        "summary": "Mark invoice as paid",
        "description": "Mark an invoice as paid. ADMIN, GM, TM only.",
        "operationId": "markPaymentPaid",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TA"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "payment_date": {
                    "type": "string",
                    "format": "date"
                  },
                  "receipt_url": {
                    "type": "string"
                  }
                }
              },
              "example": {
                "payment_date": "2026-02-13",
                "receipt_url": "https://storage.example.com/receipts/receipt-123.pdf"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Payment marked as paid",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/PaymentResponse"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "data": {
                    "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                    "invoice_number": "INV-2026-001234",
                    "amount": 1500,
                    "currency": "USD",
                    "payment_status": "UNPAID"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/payments/{id}/refund": {
      "post": {
        "tags": [
          "Payments"
        ],
        "summary": "Process refund",
        "description": "Process a refund for a payment. ADMIN, GM only.",
        "operationId": "refundPayment",
        "x-roles": [
          "ADMIN",
          "GM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "amount": {
                    "type": "number"
                  },
                  "reason": {
                    "type": "string"
                  }
                }
              },
              "example": {
                "amount": 500,
                "reason": "Duplicate payment. Refund requested by client."
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Refund processed",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "data": {}
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/payments/{id}/partial": {
      "post": {
        "tags": [
          "Payments"
        ],
        "summary": "Record partial payment",
        "description": "Record a partial payment against an invoice. ADMIN, GM, TM only.",
        "operationId": "recordPartialPayment",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PartialPaymentRequest"
              },
              "example": {
                "amount": 500,
                "remarks": "First instalment"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Partial payment recorded",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/PaymentResponse"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "data": {
                    "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                    "invoice_number": "INV-2026-001234",
                    "amount": 1500,
                    "currency": "USD",
                    "payment_status": "UNPAID"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/payments/{id}/ledger": {
      "get": {
        "tags": [
          "Payments"
        ],
        "summary": "Get payment ledger",
        "description": "Get financial ledger entries for a payment. ADMIN, GM only.",
        "operationId": "getPaymentLedger",
        "x-roles": [
          "ADMIN",
          "GM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Ledger entries",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object"
                      }
                    }
                  }
                },
                "example": {
                  "success": true,
                  "data": [
                    {}
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/payments/writeoff": {
      "post": {
        "tags": [
          "Payments"
        ],
        "summary": "Write off payment",
        "description": "Write off an invoice/payment. ADMIN only.",
        "operationId": "writeOffPayment",
        "x-roles": [
          "ADMIN"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "paymentId",
                  "reason"
                ],
                "properties": {
                  "paymentId": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "reason": {
                    "type": "string"
                  }
                }
              },
              "example": {
                "paymentId": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                "reason": "Approved write off"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Payment written off",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/public/certificate/verify/{number}": {
      "get": {
        "tags": [
          "Public"
        ],
        "summary": "Verify certificate (public)",
        "description": "Public verification - no auth required",
        "security": [],
        "operationId": "verifyCertificatePublic",
        "x-roles": [
          "PUBLIC"
        ],
        "parameters": [
          {
            "name": "number",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Certificate verification result",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/public/vessel/{imo}": {
      "get": {
        "tags": [
          "Public"
        ],
        "summary": "Verify vessel by IMO (public)",
        "description": "Public vessel verification - no auth required",
        "security": [],
        "operationId": "verifyVesselPublic",
        "x-roles": [
          "PUBLIC"
        ],
        "parameters": [
          {
            "name": "imo",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Vessel verification result",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/reports/certificates": {
      "get": {
        "tags": [
          "Reports"
        ],
        "summary": "Certificate report",
        "operationId": "getCertificateReport",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM"
        ],
        "responses": {
          "200": {
            "description": "Certificate report",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/reports/surveyors": {
      "get": {
        "tags": [
          "Reports"
        ],
        "summary": "Surveyor report",
        "operationId": "getSurveyorReport",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM"
        ],
        "responses": {
          "200": {
            "description": "Surveyor report",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/reports/non-conformities": {
      "get": {
        "tags": [
          "Reports"
        ],
        "summary": "Non-conformity report",
        "operationId": "getNonConformityReport",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM"
        ],
        "responses": {
          "200": {
            "description": "NC report",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/reports/financials": {
      "get": {
        "tags": [
          "Reports"
        ],
        "summary": "Financial report",
        "operationId": "getFinancialReport",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM"
        ],
        "responses": {
          "200": {
            "description": "Financial report",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/search": {
      "get": {
        "tags": [
          "Search"
        ],
        "summary": "Global search",
        "description": "Search across vessels, jobs, and certificates. Results are filtered by user's role and scope.",
        "operationId": "globalSearch",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "TA",
          "SURVEYOR",
          "CLIENT",
          "FLAG_ADMIN"
        ],
        "parameters": [
          {
            "name": "q",
            "in": "query",
            "required": true,
            "description": "Search query string (min 3 chars)",
            "schema": {
              "type": "string",
              "example": "Ocean"
            }
          },
          {
            "name": "type",
            "in": "query",
            "description": "Filter by specific entity type",
            "schema": {
              "type": "string",
              "enum": [
                "VESSEL",
                "JOB",
                "CERTIFICATE",
                "USER"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Search results",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "vessels": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/VesselSummary"
                          }
                        },
                        "jobs": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/JobResponse"
                          }
                        },
                        "certificates": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/CertificateResponse"
                          }
                        }
                      }
                    }
                  }
                },
                "example": {
                  "success": true,
                  "data": {
                    "vessels": [
                      {
                        "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                        "vessel_name": "Ocean Pioneer",
                        "imo_number": "9123456",
                        "flag_administration_id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                        "ship_type": "Cargo"
                      }
                    ],
                    "jobs": [
                      {
                        "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                        "vessel_id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                        "job_status": "CREATED",
                        "reason": "Annual survey due",
                        "target_port": "Singapore",
                        "target_date": "2026-03-15"
                      }
                    ],
                    "certificates": [
                      {
                        "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                        "certificate_number": "GIR-CERT-2026-001234",
                        "status": "VALID",
                        "issue_date": "2026-01-15",
                        "expiry_date": "2027-01-14"
                      }
                    ]
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/support": {
      "post": {
        "tags": [
          "Support"
        ],
        "summary": "Create support ticket",
        "operationId": "createSupportTicket",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "TA",
          "SURVEYOR",
          "CLIENT",
          "FLAG_ADMIN"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "subject"
                ],
                "properties": {
                  "subject": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string"
                  },
                  "message": {
                    "type": "string"
                  },
                  "priority": {
                    "type": "string",
                    "enum": [
                      "LOW",
                      "MEDIUM",
                      "HIGH",
                      "URGENT"
                    ]
                  }
                }
              },
              "example": {
                "subject": "Unable to submit survey",
                "description": "Getting 500 error when submitting survey for job XYZ",
                "priority": "HIGH"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Ticket created",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "Support"
        ],
        "summary": "Get support tickets",
        "operationId": "getSupportTickets",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "TA",
          "SURVEYOR",
          "CLIENT",
          "FLAG_ADMIN"
        ],
        "responses": {
          "200": {
            "description": "List of tickets",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/support/{id}": {
      "get": {
        "tags": [
          "Support"
        ],
        "summary": "Get ticket by ID",
        "operationId": "getSupportTicketById",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "TA",
          "SURVEYOR",
          "CLIENT",
          "FLAG_ADMIN"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Ticket details",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Support"
        ],
        "summary": "Update ticket status (or use /support/{id}/status)",
        "operationId": "updateSupportTicketStatus",
        "x-roles": [
          "ADMIN",
          "GM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "status"
                ],
                "properties": {
                  "status": {
                    "type": "string",
                    "enum": [
                      "OPEN",
                      "IN_PROGRESS",
                      "RESOLVED",
                      "CLOSED"
                    ]
                  }
                }
              },
              "example": {
                "status": "RESOLVED"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Status updated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/support/{id}/status": {
      "put": {
        "tags": [
          "Support"
        ],
        "summary": "Update ticket status",
        "operationId": "updateSupportTicketStatusPath",
        "x-roles": [
          "ADMIN",
          "GM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "status"
                ],
                "properties": {
                  "status": {
                    "type": "string",
                    "enum": [
                      "OPEN",
                      "IN_PROGRESS",
                      "RESOLVED",
                      "CLOSED"
                    ]
                  },
                  "internal_note": {
                    "type": "string"
                  }
                }
              },
              "example": {
                "status": "RESOLVED",
                "internal_note": "Issue resolved and closed."
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Status updated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/surveyors": {
      "post": {
        "tags": [
          "Surveyors"
        ],
        "summary": "Create surveyor",
        "operationId": "createSurveyor",
        "x-roles": [
          "ADMIN",
          "TM"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "name",
                  "email",
                  "password"
                ],
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "email": {
                    "type": "string",
                    "format": "email"
                  },
                  "password": {
                    "type": "string"
                  },
                  "role": {
                    "type": "string",
                    "enum": [
                      "SURVEYOR"
                    ]
                  },
                  "phone": {
                    "type": "string"
                  }
                }
              },
              "example": {
                "name": "John Surveyor",
                "email": "surveyor@girik.com",
                "password": "SecurePass123!",
                "phone": "+65 9123 4567"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Surveyor created",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/surveyors/apply": {
      "post": {
        "tags": [
          "Surveyors"
        ],
        "summary": "Public surveyor application",
        "operationId": "applySurveyorPublic",
        "x-roles": [
          "PUBLIC"
        ],
        "security": [],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "required": [
                  "full_name",
                  "email",
                  "phone",
                  "nationality",
                  "qualification",
                  "years_of_experience"
                ],
                "properties": {
                  "full_name": {
                    "type": "string"
                  },
                  "email": {
                    "type": "string",
                    "format": "email"
                  },
                  "phone": {
                    "type": "string"
                  },
                  "nationality": {
                    "type": "string"
                  },
                  "qualification": {
                    "type": "string"
                  },
                  "years_of_experience": {
                    "type": "integer"
                  },
                  "cv": {
                    "type": "string",
                    "format": "binary"
                  },
                  "id_proof": {
                    "type": "string",
                    "format": "binary"
                  },
                  "certificates": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "binary"
                    }
                  }
                }
              },
              "example": {
                "full_name": "string",
                "email": "user@example.com",
                "phone": "string",
                "nationality": "string",
                "qualification": "string",
                "years_of_experience": 1
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Application submitted",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/surveyors/applications": {
      "get": {
        "tags": [
          "Surveyors"
        ],
        "summary": "Get surveyor applications",
        "operationId": "getSurveyorApplications",
        "x-roles": [
          "ADMIN",
          "TM"
        ],
        "responses": {
          "200": {
            "description": "List of applications",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/surveyors/applications/{id}/review": {
      "put": {
        "tags": [
          "Surveyors"
        ],
        "summary": "Review application",
        "operationId": "reviewSurveyorApplication",
        "x-roles": [
          "ADMIN",
          "TM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "status"
                ],
                "properties": {
                  "status": {
                    "type": "string",
                    "enum": [
                      "APPROVED",
                      "REJECTED",
                      "DOCUMENTS_REQUIRED"
                    ]
                  },
                  "reviewer_remarks": {
                    "type": "string"
                  }
                }
              },
              "example": {
                "status": "APPROVED",
                "reviewer_remarks": "Documents verified. Eligible for assignment."
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Application reviewed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Application approved."
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Application approved."
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/surveyors/{id}/profile": {
      "get": {
        "tags": [
          "Surveyors"
        ],
        "summary": "Get surveyor profile",
        "operationId": "getSurveyorProfile",
        "x-roles": [
          "ADMIN",
          "TM",
          "SURVEYOR"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Surveyor profile",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Surveyors"
        ],
        "summary": "Update surveyor profile",
        "operationId": "updateSurveyorProfile",
        "x-roles": [
          "ADMIN",
          "TM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "full_name": {
                    "type": "string"
                  },
                  "phone": {
                    "type": "string"
                  },
                  "nationality": {
                    "type": "string"
                  },
                  "qualification": {
                    "type": "string"
                  },
                  "years_of_experience": {
                    "type": "integer"
                  }
                }
              },
              "example": {
                "full_name": "John Surveyor",
                "phone": "+65 9123 4567",
                "nationality": "Singapore",
                "qualification": "IACS Certified",
                "years_of_experience": 5
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Profile updated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/surveyors/{id}/location-history": {
      "get": {
        "tags": [
          "Surveyors"
        ],
        "summary": "Get GPS history",
        "operationId": "getSurveyorGPSHistory",
        "x-roles": [
          "ADMIN",
          "TM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Location history",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/surveys": {
      "get": {
        "tags": [
          "Surveys"
        ],
        "summary": "List survey reports",
        "operationId": "getSurveyReports",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO"
        ],
        "responses": {
          "200": {
            "description": "List of survey reports",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/SurveyReportResponse"
                      }
                    }
                  }
                },
                "example": {
                  "success": true,
                  "data": [
                    {
                      "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                      "job_id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                      "survey_status": "SUBMITTED",
                      "submission_count": 1,
                      "submit_latitude": 1.3521,
                      "submit_longitude": 103.8198,
                      "survey_statement": "Survey completed successfully.",
                      "declared_by": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                      "declared_at": "2026-02-25T12:00:00Z",
                      "declaration_hash": "a591a6d40bf420404a011733cfb7b190d62c65bf0bcda32b57b277d9ad9f146e",
                      "started_at": "2026-02-25T10:00:00Z",
                      "submitted_at": "2026-02-25T12:00:00Z"
                    }
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/surveys/jobs/{jobId}/timeline": {
      "get": {
        "tags": [
          "Surveys"
        ],
        "summary": "Get survey execution timeline",
        "description": "Analytical view of survey duration and GPS variance.",
        "operationId": "getSurveyTimeline",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM"
        ],
        "parameters": [
          {
            "name": "jobId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Survey timeline fetched",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/SurveyTimelineResponse"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "data": {
                    "job_id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                    "gps_trace": [
                      {
                        "latitude": 1.5,
                        "longitude": 1.5,
                        "timestamp": "2026-03-15T10:00:00.000Z"
                      }
                    ],
                    "survey_details": {
                      "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                      "job_id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                      "survey_status": "SUBMITTED",
                      "submission_count": 1,
                      "submit_latitude": 1.3521,
                      "submit_longitude": 103.8198,
                      "survey_statement": "Survey completed successfully.",
                      "declared_by": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                      "declared_at": "2026-02-25T12:00:00Z",
                      "declaration_hash": "a591a6d40bf420404a011733cfb7b190d62c65bf0bcda32b57b277d9ad9f146e",
                      "started_at": "2026-02-25T10:00:00Z",
                      "submitted_at": "2026-02-25T12:00:00Z"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/surveys/jobs/{jobId}/violation": {
      "post": {
        "tags": [
          "Surveys"
        ],
        "summary": "Flag survey violation",
        "description": "Flag discrepancies found in survey execution (e.g. location mismatch).",
        "operationId": "flagViolation",
        "x-roles": [
          "ADMIN",
          "TM"
        ],
        "parameters": [
          {
            "name": "jobId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Violation flagged",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/system/metrics": {
      "get": {
        "tags": [
          "System"
        ],
        "summary": "Get system metrics",
        "operationId": "getSystemMetrics",
        "x-roles": [
          "ADMIN"
        ],
        "responses": {
          "200": {
            "description": "System metrics",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/system/health": {
      "get": {
        "tags": [
          "System"
        ],
        "summary": "Get system health",
        "operationId": "getSystemHealth",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "TA",
          "SURVEYOR",
          "CLIENT",
          "FLAG_ADMIN"
        ],
        "responses": {
          "200": {
            "description": "Health status",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/system/readiness": {
      "get": {
        "tags": [
          "System"
        ],
        "summary": "Get system readiness",
        "operationId": "getSystemReadiness",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "TA",
          "SURVEYOR",
          "CLIENT",
          "FLAG_ADMIN"
        ],
        "responses": {
          "200": {
            "description": "Readiness status",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/system/version": {
      "get": {
        "tags": [
          "System"
        ],
        "summary": "Get system version",
        "operationId": "getSystemVersion",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "TA",
          "SURVEYOR",
          "CLIENT",
          "FLAG_ADMIN"
        ],
        "responses": {
          "200": {
            "description": "Version info",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/system/audit-logs": {
      "get": {
        "tags": [
          "System"
        ],
        "summary": "Get audit logs",
        "operationId": "getAuditLogs",
        "x-roles": [
          "ADMIN"
        ],
        "responses": {
          "200": {
            "description": "Audit logs",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/system/users/{id}/logout": {
      "post": {
        "tags": [
          "System"
        ],
        "summary": "Force user logout",
        "operationId": "forceLogout",
        "x-roles": [
          "ADMIN"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "User logged out",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/system/migrations": {
      "get": {
        "tags": [
          "System"
        ],
        "summary": "Get migrations",
        "operationId": "getMigrations",
        "x-roles": [
          "ADMIN"
        ],
        "responses": {
          "200": {
            "description": "Migration status",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/system/jobs/failed": {
      "get": {
        "tags": [
          "System"
        ],
        "summary": "Get failed jobs",
        "operationId": "getFailedJobs",
        "x-roles": [
          "ADMIN"
        ],
        "responses": {
          "200": {
            "description": "Failed jobs",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/system/jobs/{id}/retry": {
      "post": {
        "tags": [
          "System"
        ],
        "summary": "Retry failed job",
        "operationId": "retryJob",
        "x-roles": [
          "ADMIN"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Job retried",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/system/maintenance/{action}": {
      "post": {
        "tags": [
          "System"
        ],
        "summary": "Maintenance action",
        "operationId": "maintenanceAction",
        "x-roles": [
          "ADMIN"
        ],
        "parameters": [
          {
            "name": "action",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Action executed",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/system/feature-flags": {
      "get": {
        "tags": [
          "System"
        ],
        "summary": "Get feature flags",
        "operationId": "getFeatureFlags",
        "x-roles": [
          "ADMIN"
        ],
        "responses": {
          "200": {
            "description": "Feature flags",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/system/locales": {
      "get": {
        "tags": [
          "System"
        ],
        "summary": "Get locales",
        "operationId": "getLocales",
        "x-roles": [
          "ADMIN"
        ],
        "responses": {
          "200": {
            "description": "Locales",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/certificate-templates": {
      "post": {
        "tags": [
          "Certificate Templates"
        ],
        "summary": "Create template",
        "operationId": "createTemplate",
        "x-roles": [
          "ADMIN"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "name",
                  "code",
                  "sections"
                ],
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "code": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string"
                  },
                  "sections": {
                    "type": "array"
                  },
                  "status": {
                    "type": "string",
                    "enum": [
                      "ACTIVE",
                      "INACTIVE",
                      "DRAFT"
                    ]
                  }
                }
              },
              "example": {
                "name": "Safety Certificate Template",
                "code": "SAFETY_CERT_001",
                "description": "Template for safety certificates",
                "sections": [
                  {
                    "title": "Equipment",
                    "items": [
                      {
                        "code": "EQ001",
                        "text": "Fire extinguishers",
                        "type": "YES_NO_NA"
                      }
                    ]
                  }
                ],
                "status": "ACTIVE"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Template created",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "Certificate Templates"
        ],
        "summary": "Get templates",
        "operationId": "getTemplates",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM"
        ],
        "responses": {
          "200": {
            "description": "List of templates",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/certificate-templates/{id}": {
      "get": {
        "tags": [
          "Certificate Templates"
        ],
        "summary": "Get template by ID",
        "operationId": "getTemplateById",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Template details",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Certificate Templates"
        ],
        "summary": "Update template",
        "operationId": "updateTemplate",
        "x-roles": [
          "ADMIN"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object"
              },
              "example": {}
            }
          }
        },
        "responses": {
          "200": {
            "description": "Template updated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Certificate Templates"
        ],
        "summary": "Delete template",
        "operationId": "deleteTemplate",
        "x-roles": [
          "ADMIN"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Template deleted",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/toca": {
      "get": {
        "tags": [
          "TOCA"
        ],
        "summary": "Get TOCAs",
        "operationId": "getTocas",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM"
        ],
        "responses": {
          "200": {
            "description": "List of TOCAs",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/toca/{id}/status": {
      "put": {
        "tags": [
          "TOCA"
        ],
        "summary": "Update TOCA status",
        "operationId": "updateTocaStatus",
        "x-roles": [
          "TM",
          "ADMIN"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "status"
                ],
                "properties": {
                  "status": {
                    "type": "string",
                    "enum": [
                      "ACCEPTED",
                      "REJECTED"
                    ]
                  }
                }
              },
              "example": {
                "status": "ACCEPTED"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Status updated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/users": {
      "get": {
        "tags": [
          "Users"
        ],
        "summary": "Get all users",
        "operationId": "getUsers",
        "x-roles": [
          "ADMIN"
        ],
        "responses": {
          "200": {
            "description": "List of users",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Users"
        ],
        "summary": "Create user",
        "operationId": "createUser",
        "x-roles": [
          "ADMIN"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "name",
                  "email",
                  "password",
                  "role"
                ],
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "email": {
                    "type": "string",
                    "format": "email"
                  },
                  "password": {
                    "type": "string"
                  },
                  "role": {
                    "type": "string",
                    "enum": [
                      "ADMIN",
                      "GM",
                      "TM",
                      "TO",
                      "TA",
                      "SURVEYOR",
                      "CLIENT",
                      "FLAG_ADMIN"
                    ]
                  },
                  "phone": {
                    "type": "string"
                  },
                  "client_id": {
                    "type": "string",
                    "format": "uuid"
                  }
                }
              },
              "example": {
                "name": "John Doe",
                "email": "john@girik.com",
                "password": "SecurePass123!",
                "role": "TM",
                "phone": "+65 9123 4567",
                "client_id": null
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "User created",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/users/me": {
      "get": {
        "tags": [
          "Users"
        ],
        "summary": "Get current user profile",
        "operationId": "getMyProfile",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "TA",
          "SURVEYOR",
          "CLIENT",
          "FLAG_ADMIN"
        ],
        "responses": {
          "200": {
            "description": "Current user profile",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/users/{id}": {
      "put": {
        "tags": [
          "Users"
        ],
        "summary": "Update user",
        "operationId": "updateUser",
        "x-roles": [
          "ADMIN"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "email": {
                    "type": "string",
                    "format": "email"
                  },
                  "role": {
                    "type": "string"
                  },
                  "phone": {
                    "type": "string"
                  },
                  "status": {
                    "type": "string"
                  },
                  "client_id": {
                    "type": "string",
                    "format": "uuid"
                  }
                }
              },
              "example": {
                "name": "John Doe",
                "email": "john.updated@girik.com",
                "phone": "+65 9876 5432"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "User updated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Users"
        ],
        "summary": "Delete user",
        "operationId": "deleteUser",
        "x-roles": [
          "ADMIN"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "User deleted",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/users/{id}/status": {
      "put": {
        "tags": [
          "Users"
        ],
        "summary": "Update user status",
        "operationId": "updateUserStatus",
        "x-roles": [
          "ADMIN"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "status"
                ],
                "properties": {
                  "status": {
                    "type": "string",
                    "enum": [
                      "ACTIVE",
                      "SUSPENDED",
                      "INACTIVE"
                    ]
                  }
                }
              },
              "example": {
                "status": "ACTIVE"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Status updated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/vessels": {
      "get": {
        "tags": [
          "Vessels"
        ],
        "summary": "List vessels",
        "description": "List all vessels. CLIENT sees only their vessels.",
        "operationId": "getVessels",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "CLIENT"
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 20
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of vessels",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/VesselResponse"
                      }
                    }
                  }
                },
                "example": {
                  "success": true,
                  "data": [
                    {
                      "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                      "vessel_name": "Ocean Pioneer",
                      "imo_number": "9123456",
                      "flag_state": "Singapore"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Vessels"
        ],
        "summary": "Create vessel",
        "description": "Create a new vessel. ADMIN, GM, TM only.",
        "operationId": "createVessel",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/VesselCreateRequest"
              },
              "example": {
                "client_id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                "vessel_name": "Ocean Pioneer",
                "imo_number": "9123456",
                "call_sign": "9VSP",
                "mmsi_number": "563123456",
                "flag_administration_id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                "port_of_registry": "Singapore",
                "year_built": 2015,
                "ship_type": "Cargo",
                "gross_tonnage": 30000,
                "net_tonnage": 15000,
                "deadweight": 45000,
                "class_status": "ACTIVE",
                "current_class_society": "DNV",
                "engine_type": "Diesel",
                "builder_name": "Hyundai Heavy Industries",
                "uploaded_documents": [
                  {
                    "file_url": "https://example-bucket.s3.amazonaws.com/cert.pdf",
                    "document_type": "REGISTRY_CERTIFICATE",
                    "description": "Ship Registry Certificate"
                  }
                ]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Vessel created",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/VesselResponse"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "data": {
                    "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                    "vessel_name": "Ocean Pioneer"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/vessels/client/{clientId}": {
      "get": {
        "tags": [
          "Vessels"
        ],
        "summary": "Get vessels by client",
        "description": "Get all vessels for a specific client. ADMIN, GM, TM only.",
        "operationId": "getVesselsByClient",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM"
        ],
        "parameters": [
          {
            "name": "clientId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of client vessels",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/VesselResponse"
                      }
                    }
                  }
                },
                "example": {
                  "success": true,
                  "data": [
                    {
                      "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                      "vessel_name": "Ocean Pioneer",
                      "imo_number": "9123456",
                      "flag_administration_id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                      "ship_type": "Cargo",
                      "client_id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                      "call_sign": "9VSP",
                      "mmsi_number": "563123456",
                      "port_of_registry": "Singapore",
                      "year_built": 2015,
                      "gross_tonnage": 30000,
                      "net_tonnage": 15000,
                      "deadweight": 45000,
                      "class_status": "ACTIVE",
                      "current_class_society": "DNV",
                      "engine_type": "Diesel",
                      "builder_name": "Hyundai Heavy Industries"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/vessels/{id}": {
      "get": {
        "tags": [
          "Vessels"
        ],
        "summary": "Get vessel by ID",
        "description": "Get vessel details by ID.",
        "operationId": "getVesselById",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR",
          "CLIENT"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Vessel details",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/VesselResponse"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "data": {
                    "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                    "vessel_name": "Ocean Pioneer",
                    "imo_number": "9123456",
                    "flag_administration_id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                    "ship_type": "Cargo",
                    "client_id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                    "call_sign": "9VSP",
                    "mmsi_number": "563123456",
                    "port_of_registry": "Singapore",
                    "year_built": 2015,
                    "gross_tonnage": 30000,
                    "net_tonnage": 15000,
                    "deadweight": 45000,
                    "class_status": "ACTIVE",
                    "current_class_society": "DNV",
                    "engine_type": "Diesel",
                    "builder_name": "Hyundai Heavy Industries"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Vessel not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Vessels"
        ],
        "summary": "Update vessel",
        "description": "Update vessel details. ADMIN, GM, TM only.",
        "operationId": "updateVessel",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/VesselUpdateRequest"
              },
              "example": {
                "vessel_name": "Ocean Pioneer II",
                "class_status": "SUSPENDED",
                "deadweight": 50000.5,
                "uploaded_documents": [
                  {
                    "file_url": "https://example-bucket.s3.amazonaws.com/cert-update.pdf",
                    "document_type": "REGISTRY_CERTIFICATE",
                    "description": "Ship Registry Certificate - Updated"
                  }
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Vessel updated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/VesselResponse"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "data": {
                    "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                    "vessel_name": "Ocean Pioneer",
                    "imo_number": "9123456",
                    "flag_administration_id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                    "ship_type": "Cargo",
                    "client_id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                    "call_sign": "9VSP",
                    "mmsi_number": "563123456",
                    "port_of_registry": "Singapore",
                    "year_built": 2015,
                    "gross_tonnage": 30000,
                    "net_tonnage": 15000,
                    "deadweight": 45000,
                    "class_status": "ACTIVE",
                    "current_class_society": "DNV",
                    "engine_type": "Diesel",
                    "builder_name": "Hyundai Heavy Industries"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/public/website/videos": {
      "get": {
        "tags": [
          "Public"
        ],
        "summary": "Get all website videos (Public)",
        "description": "Retrieve a list of uploaded videos. This endpoint is public and used by the website frontend.",
        "operationId": "getPublicVideos",
        "parameters": [
          {
            "in": "query",
            "name": "section",
            "schema": {
              "type": "string"
            },
            "description": "Filter by website section (e.g. HOME, PORTFOLIO)"
          }
        ],
        "responses": {
          "200": {
            "description": "List of videos",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/WebsiteVideo"
                  }
                },
                "example": [
                  {
                    "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                    "section": "HOME",
                    "title": "Introduction Video",
                    "description": "A brief introduction to our services.",
                    "video_url": "https://bucket.s3.region.amazonaws.com/website/videos/video.mp4",
                    "thumbnail_url": "https://bucket.s3.region.amazonaws.com/website/videos/thumb.jpg",
                    "uploaded_by": "01933c5e-user-id",
                    "created_at": "2026-03-15T10:00:00.000Z",
                    "updated_at": "2026-03-15T10:00:00.000Z"
                  }
                ]
              }
            }
          }
        },
        "x-roles": [
          "PUBLIC"
        ]
      }
    },
    "/api/v1/website/videos": {
      "get": {
        "tags": [
          "Website"
        ],
        "summary": "List all videos (Internal)",
        "description": "Get a list of videos with full metadata. Requires authentication.",
        "operationId": "listVideosInternal",
        "responses": {
          "200": {
            "description": "List of videos",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/WebsiteVideo"
                  }
                },
                "example": [
                  {
                    "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                    "section": "HOME",
                    "title": "Introduction Video",
                    "description": "A brief introduction to our services.",
                    "video_url": "https://bucket.s3.region.amazonaws.com/website/videos/video.mp4",
                    "thumbnail_url": "https://bucket.s3.region.amazonaws.com/website/videos/thumb.jpg",
                    "uploaded_by": "01933c5e-user-id",
                    "created_at": "2026-03-15T10:00:00.000Z",
                    "updated_at": "2026-03-15T10:00:00.000Z"
                  }
                ]
              }
            }
          }
        },
        "x-roles": [
          "ADMIN"
        ]
      },
      "post": {
        "tags": [
          "Website"
        ],
        "summary": "Upload a new video or image (Admin Only)",
        "description": "Upload a video file or an image (thumbnail) for a specific website section. At least one of video or thumbnail is required.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "required": [
                  "section"
                ],
                "properties": {
                  "section": {
                    "type": "string",
                    "description": "Target section (e.g., HOME, TRAINING, SERVICES)"
                  },
                  "title": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string"
                  },
                  "thumbnail": {
                    "type": "string",
                    "format": "binary",
                    "description": "The thumbnail image file"
                  },
                  "video": {
                    "type": "string",
                    "format": "binary",
                    "description": "The video file to upload"
                  }
                }
              },
              "example": {
                "section": "string"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Video uploaded successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WebsiteVideo"
                },
                "example": {
                  "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                  "section": "HOME",
                  "title": "Introduction Video",
                  "description": "A brief introduction to our services.",
                  "video_url": "https://bucket.s3.region.amazonaws.com/website/videos/video.mp4",
                  "thumbnail_url": "https://bucket.s3.region.amazonaws.com/website/videos/thumb.jpg",
                  "uploaded_by": "01933c5e-user-id",
                  "created_at": "2026-03-15T10:00:00.000Z",
                  "updated_at": "2026-03-15T10:00:00.000Z"
                }
              }
            }
          }
        },
        "x-roles": [
          "ADMIN"
        ]
      }
    },
    "/api/v1/website/videos/{id}": {
      "put": {
        "tags": [
          "Website"
        ],
        "summary": "Update video details",
        "description": "Update metadata or replace files for an existing video.",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Video ID"
          }
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "section": {
                    "type": "string"
                  },
                  "title": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string"
                  },
                  "thumbnail": {
                    "type": "string",
                    "format": "binary"
                  },
                  "video": {
                    "type": "string",
                    "format": "binary"
                  }
                }
              },
              "example": {
                "section": "string",
                "title": "string",
                "description": "string",
                "thumbnail": "file.bin",
                "video": "file.bin"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Video updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WebsiteVideo"
                },
                "example": {
                  "id": "01933c5e-7f2a-7a00-8000-1a2b3c4d5e6f",
                  "section": "HOME",
                  "title": "Introduction Video",
                  "description": "A brief introduction to our services.",
                  "video_url": "https://bucket.s3.region.amazonaws.com/website/videos/video.mp4",
                  "thumbnail_url": "https://bucket.s3.region.amazonaws.com/website/videos/thumb.jpg",
                  "uploaded_by": "01933c5e-user-id",
                  "created_at": "2026-03-15T10:00:00.000Z",
                  "updated_at": "2026-03-15T10:00:00.000Z"
                }
              }
            }
          },
          "404": {
            "description": "Video not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        },
        "x-roles": [
          "ADMIN"
        ]
      },
      "delete": {
        "tags": [
          "Website"
        ],
        "summary": "Delete a video",
        "description": "Remove a video entry and its files from the system.",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Video ID"
          }
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "204": {
            "description": "Video deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Request successful"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Request successful"
                }
              }
            }
          },
          "404": {
            "description": "Video not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Validation Error",
                  "error": "vessel_id is required"
                }
              }
            }
          }
        },
        "x-roles": [
          "ADMIN"
        ]
      }
    }
  }
}