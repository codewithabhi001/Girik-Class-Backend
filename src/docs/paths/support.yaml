/support:
  post:
    tags: [Support]
    summary: Create Support Ticket
    x-roles: [ADMIN, GM, TM, TO, SURVEYOR, CLIENT]
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            required: [subject, description]
            properties:
              subject:
                type: string
                example: "Cannot login"
              description:
                type: string
                example: "I am getting 401 even with correct password"
              priority:
                type: string
                enum: [LOW, MEDIUM, HIGH]
          example:
            subject: "Cannot login"
            description: "I am getting 401 even with correct password"
            priority: "HIGH"
    responses:
      '201':
        description: Ticket created
  get:
    tags: [Support]
    summary: List Support Tickets
    x-roles: [ADMIN, GM, TM, TO, SURVEYOR, CLIENT]
    responses:
      '200':
        description: List of tickets

/support/{id}:
  get:
    tags: [Support]
    summary: Get Support Ticket
    x-roles: [ADMIN, GM, TM, TO, SURVEYOR, CLIENT]
    parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
    responses:
      '200':
        description: Ticket details
  put:
    tags: [Support]
    summary: Update Ticket Status
    x-roles: [ADMIN, GM]
    parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
    requestBody:
      content:
        application/json:
          schema:
            type: object
            properties:
              status:
                type: string
                enum: [OPEN, IN_PROGRESS, RESOLVED, CLOSED]
              internal_note:
                type: string
          example:
            status: "RESOLVED"
            internal_note: "User error. Reset password."
    responses:
      '200':
        description: Status updated
