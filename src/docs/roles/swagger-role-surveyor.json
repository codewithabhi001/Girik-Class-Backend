{
  "openapi": "3.0.0",
  "info": {
    "title": "Girik Marine API - Surveyor",
    "version": "1.0.0",
    "description": "APIs for **SURVEYOR** role. Use POST /auth/login first, then Authorize with the token."
  },
  "servers": [
    {
      "url": "http://localhost:3000/api/v1",
      "description": "Local Development"
    },
    {
      "url": "/api/v1",
      "description": "Current Host (Relative)"
    }
  ],
  "tags": [
    {
      "name": "Auth",
      "description": "Authentication & Authorization"
    },
    {
      "name": "Jobs",
      "description": "Job lifecycle management"
    },
    {
      "name": "Vessels",
      "description": "Vessel registry & management"
    },
    {
      "name": "Certificates",
      "description": "Certificate issuance & validation"
    },
    {
      "name": "Payments",
      "description": "Invoicing & payment processing"
    },
    {
      "name": "Dashboard",
      "description": "Role-specific dashboards"
    },
    {
      "name": "Clients",
      "description": "Client & company management"
    },
    {
      "name": "Public",
      "description": "Public verification endpoints (no auth)"
    },
    {
      "name": "Surveyors",
      "description": "Surveyor applications & profile"
    },
    {
      "name": "Surveys",
      "description": "Survey reports & inspections"
    },
    {
      "name": "Checklists",
      "description": "Job inspection checklists"
    },
    {
      "name": "Users",
      "description": "User management"
    },
    {
      "name": "Non-Conformities",
      "description": "NC management"
    },
    {
      "name": "TOCA",
      "description": "Transfer of Class Agreement"
    },
    {
      "name": "Flags",
      "description": "Flag administration"
    },
    {
      "name": "Approvals",
      "description": "Approval workflow"
    },
    {
      "name": "Notifications",
      "description": "System notifications"
    },
    {
      "name": "Documents",
      "description": "Document storage"
    },
    {
      "name": "System",
      "description": "System config & admin"
    },
    {
      "name": "Reports",
      "description": "Management reports"
    },
    {
      "name": "Activity Requests",
      "description": "Client activity requests"
    },
    {
      "name": "Providers",
      "description": "Service providers"
    },
    {
      "name": "Feedback",
      "description": "Customer feedback"
    },
    {
      "name": "Change Requests",
      "description": "Entity change requests"
    },
    {
      "name": "Certificate Templates",
      "description": "Certificate templates"
    },
    {
      "name": "Incidents",
      "description": "Incident reporting"
    },
    {
      "name": "Support",
      "description": "Support tickets"
    },
    {
      "name": "Search",
      "description": "Global search"
    },
    {
      "name": "Compliance",
      "description": "Compliance & GDPR"
    },
    {
      "name": "Mobile",
      "description": "Mobile app sync"
    }
  ],
  "paths": {
    "/auth/login": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Login",
        "description": "Authenticate and receive JWT token",
        "x-roles": [
          "PUBLIC"
        ],
        "security": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginRequest"
              },
              "example": {
                "email": "admin@girik.com",
                "password": "admin123"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Login successful",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LoginResponse"
                },
                "example": {
                  "success": true,
                  "data": {
                    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
                    "refreshToken": "refresh_token_here",
                    "user": {
                      "id": "550e8400-e29b-41d4-a716-446655440000",
                      "email": "admin@girik.com",
                      "name": "Admin User",
                      "role": "ADMIN"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "401": {
            "description": "Invalid credentials",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Invalid email or password"
                }
              }
            }
          }
        }
      }
    },
    "/auth/logout": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Logout",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "TA",
          "SURVEYOR",
          "CLIENT"
        ],
        "responses": {
          "200": {
            "description": "Logged out"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/auth/forgot-password": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Forgot Password",
        "x-roles": [
          "PUBLIC"
        ],
        "security": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "email"
                ],
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email"
                  }
                }
              },
              "example": {
                "email": "admin@girik.com"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Reset link sent"
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          }
        }
      }
    },
    "/auth/reset-password": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Reset Password",
        "x-roles": [
          "PUBLIC"
        ],
        "security": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "token",
                  "newPassword"
                ],
                "properties": {
                  "token": {
                    "type": "string"
                  },
                  "newPassword": {
                    "type": "string",
                    "format": "password"
                  }
                }
              },
              "example": {
                "token": "RESET_TOKEN_FROM_EMAIL",
                "newPassword": "NewSecurePass123!"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Password reset"
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          }
        }
      }
    },
    "/auth/refresh-token": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Refresh Token",
        "x-roles": [
          "PUBLIC"
        ],
        "security": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "token"
                ],
                "properties": {
                  "token": {
                    "type": "string"
                  }
                }
              },
              "example": {
                "token": "{{refresh_token}}"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "New tokens"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/certificates/verify/{number}": {
      "get": {
        "tags": [
          "Public"
        ],
        "summary": "Verify Certificate (Public)",
        "description": "Public endpoint - no auth required",
        "x-roles": [
          "PUBLIC"
        ],
        "security": [],
        "parameters": [
          {
            "name": "number",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "example": "GIR-CERT-2026-001"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Certificate valid"
          },
          "404": {
            "description": "Certificate not found"
          }
        }
      }
    },
    "/certificates/types": {
      "get": {
        "tags": [
          "Certificates"
        ],
        "summary": "Get Certificate Types",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR",
          "CLIENT"
        ],
        "responses": {
          "200": {
            "description": "List of certificate types",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                },
                "example": {
                  "success": true,
                  "data": [
                    {
                      "id": "550e8400-e29b-41d4-a716-446655440000",
                      "name": "Annual Survey",
                      "code": "ANNUAL"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/certificates": {
      "get": {
        "tags": [
          "Certificates"
        ],
        "summary": "List Certificates",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR",
          "CLIENT"
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "status",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "VALID",
                "EXPIRED",
                "SUSPENDED",
                "REVOKED"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of certificates",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/certificates/{id}": {
      "get": {
        "tags": [
          "Certificates"
        ],
        "summary": "Get Certificate by ID",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR",
          "CLIENT"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Certificate details"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/certificates/{id}/preview": {
      "get": {
        "tags": [
          "Certificates"
        ],
        "summary": "Certificate Preview",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR",
          "CLIENT"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Preview URL or HTML"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/certificates/{id}/history": {
      "get": {
        "tags": [
          "Certificates"
        ],
        "summary": "Certificate History",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR",
          "CLIENT"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Certificate change history"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/jobs/{jobId}/checklist": {
      "get": {
        "tags": [
          "Checklists"
        ],
        "summary": "Get Checklist",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR",
          "CLIENT"
        ],
        "parameters": [
          {
            "name": "jobId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Checklist for job"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      },
      "put": {
        "tags": [
          "Checklists"
        ],
        "summary": "Submit Checklist",
        "x-roles": [
          "SURVEYOR"
        ],
        "parameters": [
          {
            "name": "jobId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "items"
                ],
                "properties": {
                  "items": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "required": [
                        "question_code",
                        "question_text",
                        "answer"
                      ],
                      "properties": {
                        "question_code": {
                          "type": "string"
                        },
                        "question_text": {
                          "type": "string"
                        },
                        "answer": {
                          "type": "string",
                          "enum": [
                            "YES",
                            "NO",
                            "NA"
                          ]
                        },
                        "remarks": {
                          "type": "string"
                        }
                      }
                    }
                  }
                }
              },
              "example": {
                "items": [
                  {
                    "question_code": "Q1",
                    "question_text": "Hull condition",
                    "answer": "YES",
                    "remarks": "All OK"
                  },
                  {
                    "question_code": "Q2",
                    "question_text": "Life saving equipment",
                    "answer": "NO",
                    "remarks": "Minor defect"
                  }
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Checklist submitted"
          }
        }
      }
    },
    "/dashboard": {
      "get": {
        "tags": [
          "Dashboard"
        ],
        "summary": "Get Dashboard",
        "description": "Role-specific dashboard summary (jobs pending, certificates expiring, etc.)",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR",
          "CLIENT"
        ],
        "responses": {
          "200": {
            "description": "Dashboard data",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DashboardResponse"
                },
                "example": {
                  "success": true,
                  "data": {
                    "jobsPending": 5,
                    "jobsInProgress": 3,
                    "certificatesExpiring": 2,
                    "paymentsDue": 1
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/documents/{entityType}/{entityId}": {
      "get": {
        "tags": [
          "Documents"
        ],
        "summary": "Get Documents",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR",
          "CLIENT"
        ],
        "parameters": [
          {
            "name": "entityType",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "example": "JOB"
            }
          },
          {
            "name": "entityId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of documents"
          }
        }
      }
    },
    "/health": {
      "get": {
        "tags": [
          "Public"
        ],
        "summary": "Health Check",
        "description": "System health - no auth required",
        "x-roles": [
          "PUBLIC"
        ],
        "security": [],
        "responses": {
          "200": {
            "description": "Service is UP",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "example": "UP"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                },
                "example": {
                  "status": "UP",
                  "timestamp": "2026-02-12T10:00:00.000Z"
                }
              }
            }
          }
        }
      }
    },
    "/jobs": {
      "get": {
        "tags": [
          "Jobs"
        ],
        "summary": "List Jobs",
        "description": "List jobs (filtered by role - CLIENT sees own, SURVEYOR sees assigned)",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR",
          "CLIENT"
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 10
            }
          },
          {
            "name": "status",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "CREATED",
                "GM_APPROVED",
                "TM_PRE_APPROVED",
                "ASSIGNED",
                "SURVEY_DONE",
                "TO_APPROVED",
                "TM_FINAL",
                "PAYMENT_DONE",
                "CERTIFIED",
                "REJECTED"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of jobs",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                },
                "example": {
                  "success": true,
                  "data": [
                    {
                      "id": "550e8400-e29b-41d4-a716-446655440000",
                      "vessel_id": "660e8400-e29b-41d4-a716-446655440001",
                      "job_status": "ASSIGNED",
                      "target_date": "2026-03-15",
                      "vessel": {
                        "vessel_name": "SEA MAJESTY",
                        "imo_number": "IMO9876543"
                      }
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "403": {
            "$ref": "#/components/responses/Forbidden"
          }
        }
      }
    },
    "/jobs/{id}": {
      "get": {
        "tags": [
          "Jobs"
        ],
        "summary": "Get Job by ID",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR",
          "CLIENT"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Job details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                },
                "example": {
                  "success": true,
                  "data": {
                    "id": "550e8400-e29b-41d4-a716-446655440000",
                    "vessel_id": "660e8400-e29b-41d4-a716-446655440001",
                    "job_status": "ASSIGNED",
                    "reason": "Annual survey",
                    "target_port": "Port of Singapore",
                    "target_date": "2026-03-15",
                    "vessel": {
                      "vessel_name": "SEA MAJESTY",
                      "imo_number": "IMO9876543"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/jobs/{id}/messages/external": {
      "get": {
        "tags": [
          "Jobs"
        ],
        "summary": "Get External Messages",
        "x-roles": [
          "CLIENT",
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "External messages"
          }
        }
      }
    },
    "/jobs/{id}/messages": {
      "post": {
        "tags": [
          "Jobs"
        ],
        "summary": "Send Message",
        "x-roles": [
          "CLIENT",
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "message": {
                    "type": "string"
                  },
                  "attachment": {
                    "type": "string",
                    "format": "binary"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Message sent"
          }
        }
      }
    },
    "/mobile/sync": {
      "post": {
        "tags": [
          "Mobile"
        ],
        "summary": "Sync Data",
        "x-roles": [
          "SURVEYOR"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "last_sync_timestamp": {
                    "type": "string",
                    "format": "date-time"
                  },
                  "offline_data": {
                    "type": "object"
                  }
                }
              },
              "example": {
                "last_sync_timestamp": "2026-02-12T10:00:00.000Z",
                "offline_data": {}
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Sync completed"
          }
        }
      }
    },
    "/mobile/offline/jobs": {
      "get": {
        "tags": [
          "Mobile"
        ],
        "summary": "Get Offline Jobs",
        "x-roles": [
          "SURVEYOR"
        ],
        "responses": {
          "200": {
            "description": "Jobs for offline use"
          }
        }
      }
    },
    "/mobile/offline/surveys": {
      "post": {
        "tags": [
          "Mobile"
        ],
        "summary": "Submit Offline Surveys",
        "x-roles": [
          "SURVEYOR"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "surveys": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "job_id": {
                          "type": "string"
                        },
                        "gps_latitude": {
                          "type": "number"
                        },
                        "gps_longitude": {
                          "type": "number"
                        },
                        "survey_statement": {
                          "type": "string"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Surveys submitted"
          }
        }
      }
    },
    "/non-conformities": {
      "post": {
        "tags": [
          "Non-Conformities"
        ],
        "summary": "Create NC",
        "x-roles": [
          "SURVEYOR",
          "TO"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "job_id",
                  "description",
                  "severity"
                ],
                "properties": {
                  "job_id": {
                    "$ref": "#/components/schemas/UUID"
                  },
                  "description": {
                    "type": "string"
                  },
                  "severity": {
                    "type": "string",
                    "enum": [
                      "MINOR",
                      "MAJOR",
                      "CRITICAL"
                    ]
                  }
                }
              },
              "example": {
                "job_id": "550e8400-e29b-41d4-a716-446655440000",
                "description": "Crack found on hull plate",
                "severity": "MAJOR"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "NC created"
          }
        }
      }
    },
    "/non-conformities/job/{jobId}": {
      "get": {
        "tags": [
          "Non-Conformities"
        ],
        "summary": "Get NCs by Job",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR",
          "CLIENT"
        ],
        "parameters": [
          {
            "name": "jobId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "NCs for job"
          }
        }
      }
    },
    "/notifications": {
      "get": {
        "tags": [
          "Notifications"
        ],
        "summary": "List Notifications",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR",
          "CLIENT"
        ],
        "responses": {
          "200": {
            "description": "List of notifications"
          }
        }
      }
    },
    "/notifications/{id}/read": {
      "put": {
        "tags": [
          "Notifications"
        ],
        "summary": "Mark Notification Read",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR",
          "CLIENT"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Marked as read"
          }
        }
      }
    },
    "/notifications/read-all": {
      "put": {
        "tags": [
          "Notifications"
        ],
        "summary": "Mark All Read",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR",
          "CLIENT"
        ],
        "responses": {
          "200": {
            "description": "All marked as read"
          }
        }
      }
    },
    "/public/certificate/verify/{number}": {
      "get": {
        "tags": [
          "Public"
        ],
        "summary": "Verify Certificate (Public)",
        "description": "No auth. Verify certificate by number.",
        "x-roles": [
          "PUBLIC"
        ],
        "security": [],
        "parameters": [
          {
            "name": "number",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "example": "GIR-CERT-2026-001"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Certificate valid"
          },
          "404": {
            "description": "Certificate not found"
          }
        }
      }
    },
    "/public/vessel/{imo}": {
      "get": {
        "tags": [
          "Public"
        ],
        "summary": "Verify Vessel (Public)",
        "description": "No auth. Verify vessel by IMO number.",
        "x-roles": [
          "PUBLIC"
        ],
        "security": [],
        "parameters": [
          {
            "name": "imo",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "example": "IMO9876543"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Vessel details"
          },
          "404": {
            "description": "Vessel not found"
          }
        }
      }
    },
    "/search": {
      "get": {
        "tags": [
          "Search"
        ],
        "summary": "Global Search",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR",
          "CLIENT"
        ],
        "parameters": [
          {
            "name": "q",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "Search query"
          },
          {
            "name": "type",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "Filter by type (vessels, jobs, etc.)"
          }
        ],
        "responses": {
          "200": {
            "description": "Search results"
          }
        }
      }
    },
    "/support": {
      "post": {
        "tags": [
          "Support"
        ],
        "summary": "Create Support Ticket",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR",
          "CLIENT"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "subject",
                  "description"
                ],
                "properties": {
                  "subject": {
                    "type": "string",
                    "example": "Cannot login"
                  },
                  "description": {
                    "type": "string",
                    "example": "I am getting 401 even with correct password"
                  },
                  "priority": {
                    "type": "string",
                    "enum": [
                      "LOW",
                      "MEDIUM",
                      "HIGH"
                    ]
                  }
                }
              },
              "example": {
                "subject": "Cannot login",
                "description": "I am getting 401 even with correct password",
                "priority": "HIGH"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Ticket created"
          }
        }
      },
      "get": {
        "tags": [
          "Support"
        ],
        "summary": "List Support Tickets",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR",
          "CLIENT"
        ],
        "responses": {
          "200": {
            "description": "List of tickets"
          }
        }
      }
    },
    "/support/{id}": {
      "get": {
        "tags": [
          "Support"
        ],
        "summary": "Get Support Ticket",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR",
          "CLIENT"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Ticket details"
          }
        }
      }
    },
    "/surveyors/apply": {
      "post": {
        "tags": [
          "Surveyors"
        ],
        "summary": "Surveyor Apply",
        "description": "Public endpoint - Apply to become a surveyor. Upload CV, ID proof, certificates.",
        "x-roles": [
          "PUBLIC"
        ],
        "security": [],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "required": [
                  "full_name",
                  "email",
                  "phone",
                  "nationality",
                  "qualification",
                  "years_of_experience"
                ],
                "properties": {
                  "full_name": {
                    "type": "string",
                    "example": "John Doe"
                  },
                  "email": {
                    "type": "string",
                    "format": "email",
                    "example": "john.doe@example.com"
                  },
                  "phone": {
                    "type": "string",
                    "example": "+1-234-567-8900"
                  },
                  "nationality": {
                    "type": "string",
                    "example": "United Kingdom"
                  },
                  "qualification": {
                    "type": "string",
                    "example": "Master Mariner (Class 1)"
                  },
                  "years_of_experience": {
                    "type": "integer",
                    "example": 12
                  },
                  "cv": {
                    "type": "string",
                    "format": "binary",
                    "description": "CV/Resume PDF"
                  },
                  "id_proof": {
                    "type": "string",
                    "format": "binary",
                    "description": "ID proof document"
                  },
                  "certificates": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "binary"
                    },
                    "description": "Qualification certificates (max 5)"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Application submitted",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "data": {
                    "id": "550e8400-e29b-41d4-a716-446655440000",
                    "status": "PENDING"
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          }
        }
      }
    },
    "/surveyors/{id}/profile": {
      "get": {
        "tags": [
          "Surveyors"
        ],
        "summary": "Get Surveyor Profile",
        "x-roles": [
          "ADMIN",
          "TM",
          "SURVEYOR"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Surveyor profile"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/surveyors/availability": {
      "post": {
        "tags": [
          "Surveyors"
        ],
        "summary": "Update Availability",
        "x-roles": [
          "SURVEYOR"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Availability updated"
          }
        }
      }
    },
    "/surveyors/location": {
      "post": {
        "tags": [
          "Surveyors"
        ],
        "summary": "Report Location",
        "x-roles": [
          "SURVEYOR"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "latitude": {
                    "type": "number"
                  },
                  "longitude": {
                    "type": "number"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Location reported"
          }
        }
      }
    },
    "/surveys/start": {
      "post": {
        "tags": [
          "Surveys"
        ],
        "summary": "Start Survey",
        "x-roles": [
          "SURVEYOR"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "job_id",
                  "latitude",
                  "longitude"
                ],
                "properties": {
                  "job_id": {
                    "$ref": "#/components/schemas/UUID"
                  },
                  "latitude": {
                    "type": "number",
                    "example": 1.3521
                  },
                  "longitude": {
                    "type": "number",
                    "example": 103.8198
                  }
                }
              },
              "example": {
                "job_id": "550e8400-e29b-41d4-a716-446655440000",
                "latitude": 1.3521,
                "longitude": 103.8198
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Survey started"
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          }
        }
      }
    },
    "/surveys": {
      "post": {
        "tags": [
          "Surveys"
        ],
        "summary": "Submit Survey Report",
        "x-roles": [
          "SURVEYOR"
        ],
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "job_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "gps_latitude": {
                    "type": "number"
                  },
                  "gps_longitude": {
                    "type": "number"
                  },
                  "survey_statement": {
                    "type": "string"
                  },
                  "reason_if_outside": {
                    "type": "string"
                  },
                  "photo": {
                    "type": "string",
                    "format": "binary"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Report submitted"
          }
        }
      }
    },
    "/surveys/{id}/finalize": {
      "put": {
        "tags": [
          "Surveys"
        ],
        "summary": "Finalize Survey",
        "x-roles": [
          "SURVEYOR"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Survey finalized"
          }
        }
      }
    },
    "/surveys/{id}/location": {
      "post": {
        "tags": [
          "Surveys"
        ],
        "summary": "Stream Location",
        "x-roles": [
          "SURVEYOR"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "latitude",
                  "longitude"
                ],
                "properties": {
                  "latitude": {
                    "type": "number"
                  },
                  "longitude": {
                    "type": "number"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Location updated"
          }
        }
      }
    },
    "/surveys/{id}/proof": {
      "post": {
        "tags": [
          "Surveys"
        ],
        "summary": "Upload Proof",
        "x-roles": [
          "SURVEYOR"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "proof": {
                    "type": "string",
                    "format": "binary"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Proof uploaded"
          }
        }
      }
    },
    "/system/health": {
      "get": {
        "tags": [
          "System"
        ],
        "summary": "System Health",
        "x-roles": [
          "PUBLIC"
        ],
        "security": [],
        "responses": {
          "200": {
            "description": "Health status"
          }
        }
      }
    },
    "/system/readiness": {
      "get": {
        "tags": [
          "System"
        ],
        "summary": "Readiness Check",
        "x-roles": [
          "PUBLIC"
        ],
        "security": [],
        "responses": {
          "200": {
            "description": "Ready status"
          }
        }
      }
    },
    "/system/version": {
      "get": {
        "tags": [
          "System"
        ],
        "summary": "API Version",
        "x-roles": [
          "PUBLIC"
        ],
        "security": [],
        "responses": {
          "200": {
            "description": "Version info"
          }
        }
      }
    },
    "/users/me": {
      "get": {
        "tags": [
          "Users"
        ],
        "summary": "Get My Profile",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "TA",
          "SURVEYOR",
          "CLIENT"
        ],
        "responses": {
          "200": {
            "description": "Current user profile"
          }
        }
      }
    },
    "/vessels": {
      "get": {
        "tags": [
          "Vessels"
        ],
        "summary": "List Vessels",
        "description": "List vessels (CLIENT sees only their vessels)",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR",
          "CLIENT"
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 10
            }
          },
          {
            "name": "client_id",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of vessels",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                },
                "example": {
                  "success": true,
                  "data": [
                    {
                      "id": "550e8400-e29b-41d4-a716-446655440000",
                      "vessel_name": "SEA MAJESTY",
                      "imo_number": "IMO9876543",
                      "flag_state": "Panama",
                      "ship_type": "Cargo"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/vessels/{id}": {
      "get": {
        "tags": [
          "Vessels"
        ],
        "summary": "Get Vessel by ID",
        "x-roles": [
          "ADMIN",
          "GM",
          "TM",
          "TO",
          "SURVEYOR",
          "CLIENT"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Vessel details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                },
                "example": {
                  "success": true,
                  "data": {
                    "id": "550e8400-e29b-41d4-a716-446655440000",
                    "vessel_name": "SEA MAJESTY",
                    "imo_number": "IMO9876543",
                    "flag_state": "Panama",
                    "ship_type": "Cargo",
                    "Client": {
                      "company_name": "Acme Shipping Ltd"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    }
  },
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "description": "Use token from POST /auth/login"
      }
    },
    "responses": {
      "Unauthorized": {
        "description": "Unauthorized - Token missing or invalid",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ErrorResponse"
            },
            "example": {
              "success": false,
              "message": "Unauthorized - Token missing or invalid"
            }
          }
        }
      },
      "Forbidden": {
        "description": "Forbidden - Insufficient role",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ErrorResponse"
            },
            "example": {
              "success": false,
              "message": "Forbidden - You do not have the required role"
            }
          }
        }
      },
      "NotFound": {
        "description": "Resource not found",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ErrorResponse"
            },
            "example": {
              "success": false,
              "message": "Resource not found"
            }
          }
        }
      },
      "BadRequest": {
        "description": "Validation error",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ErrorResponse"
            },
            "example": {
              "success": false,
              "message": "Validation Error",
              "error": "vessel_id is required"
            }
          }
        }
      }
    },
    "schemas": {
      "UserCreateRequest": {
        "type": "object",
        "required": [
          "name",
          "email",
          "password",
          "role"
        ],
        "properties": {
          "name": {
            "type": "string",
            "example": "John Doe"
          },
          "email": {
            "type": "string",
            "format": "email",
            "example": "user@girik.com"
          },
          "password": {
            "type": "string",
            "format": "password",
            "example": "Password123!"
          },
          "role": {
            "type": "string",
            "enum": [
              "ADMIN",
              "GM",
              "TM",
              "TO",
              "TA",
              "SURVEYOR",
              "CLIENT",
              "FLAG_ADMIN"
            ],
            "example": "SURVEYOR"
          },
          "phone": {
            "type": "string",
            "example": "+919876543210"
          },
          "client_id": {
            "$ref": "#/components/schemas/UUID"
          }
        }
      },
      "LoginRequest": {
        "type": "object",
        "required": [
          "email",
          "password"
        ],
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "example": "admin@girik.com"
          },
          "password": {
            "type": "string",
            "format": "password",
            "example": "admin123"
          }
        }
      },
      "LoginResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "data": {
            "type": "object",
            "properties": {
              "token": {
                "type": "string",
                "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
              },
              "refreshToken": {
                "type": "string"
              },
              "user": {
                "type": "object",
                "properties": {
                  "id": {
                    "$ref": "#/components/schemas/UUID"
                  },
                  "email": {
                    "type": "string"
                  },
                  "name": {
                    "type": "string"
                  },
                  "role": {
                    "type": "string",
                    "enum": [
                      "ADMIN",
                      "GM",
                      "TM",
                      "TO",
                      "TA",
                      "SURVEYOR",
                      "CLIENT",
                      "FLAG_ADMIN"
                    ]
                  }
                }
              }
            }
          }
        }
      },
      "CertificateGenerateRequest": {
        "type": "object",
        "required": [
          "job_id"
        ],
        "properties": {
          "job_id": {
            "$ref": "#/components/schemas/UUID",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "validity_years": {
            "type": "integer",
            "minimum": 1,
            "maximum": 5,
            "example": 1
          }
        }
      },
      "CertificateActionRequest": {
        "type": "object",
        "required": [
          "reason"
        ],
        "properties": {
          "reason": {
            "type": "string",
            "example": "Administrative suspension"
          }
        }
      },
      "CertificateRenewRequest": {
        "type": "object",
        "required": [
          "validity_years",
          "reason"
        ],
        "properties": {
          "validity_years": {
            "type": "integer",
            "minimum": 1,
            "maximum": 5,
            "example": 2
          },
          "reason": {
            "type": "string",
            "example": "Standard renewal"
          }
        }
      },
      "CertificateResponse": {
        "type": "object",
        "properties": {
          "id": {
            "$ref": "#/components/schemas/UUID"
          },
          "job_id": {
            "$ref": "#/components/schemas/UUID"
          },
          "vessel_id": {
            "$ref": "#/components/schemas/UUID"
          },
          "certificate_type_id": {
            "$ref": "#/components/schemas/UUID"
          },
          "certificate_number": {
            "type": "string",
            "example": "GIR-CERT-2026-001"
          },
          "issue_date": {
            "type": "string",
            "format": "date"
          },
          "expiry_date": {
            "type": "string",
            "format": "date"
          },
          "status": {
            "type": "string",
            "enum": [
              "VALID",
              "EXPIRED",
              "SUSPENDED",
              "REVOKED"
            ]
          },
          "qr_code_url": {
            "type": "string"
          },
          "pdf_file_url": {
            "type": "string"
          }
        }
      },
      "CertificateTypeResponse": {
        "type": "object",
        "properties": {
          "id": {
            "$ref": "#/components/schemas/UUID"
          },
          "name": {
            "type": "string"
          },
          "code": {
            "type": "string"
          },
          "description": {
            "type": "string"
          }
        }
      },
      "UUID": {
        "type": "string",
        "format": "uuid",
        "example": "550e8400-e29b-41d4-a716-446655440000"
      },
      "Date": {
        "type": "string",
        "format": "date",
        "example": "2026-03-15"
      },
      "DateTime": {
        "type": "string",
        "format": "date-time",
        "example": "2026-03-15T10:00:00.000Z"
      },
      "ErrorResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": false
          },
          "message": {
            "type": "string",
            "example": "Internal Server Error"
          },
          "error": {
            "type": "string",
            "description": "Validation or error detail"
          }
        }
      },
      "SuccessResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "data": {
            "type": "object",
            "description": "Response payload"
          },
          "message": {
            "type": "string",
            "example": "Operation successful"
          }
        }
      },
      "PaginationMeta": {
        "type": "object",
        "properties": {
          "page": {
            "type": "integer",
            "example": 1
          },
          "limit": {
            "type": "integer",
            "example": 10
          },
          "total": {
            "type": "integer",
            "example": 50
          },
          "totalPages": {
            "type": "integer",
            "example": 5
          }
        }
      },
      "PaginationResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "data": {
            "type": "array",
            "items": {}
          },
          "meta": {
            "$ref": "#/components/schemas/PaginationMeta"
          }
        }
      },
      "DashboardResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "data": {
            "type": "object",
            "description": "Role-specific dashboard summary",
            "properties": {
              "jobsPending": {
                "type": "integer",
                "example": 5
              },
              "jobsInProgress": {
                "type": "integer",
                "example": 3
              },
              "certificatesExpiring": {
                "type": "integer",
                "example": 2
              },
              "paymentsDue": {
                "type": "integer",
                "example": 1
              }
            }
          }
        }
      },
      "JobCreateRequest": {
        "type": "object",
        "required": [
          "vessel_id",
          "certificate_type_id",
          "reason",
          "target_port",
          "target_date"
        ],
        "properties": {
          "vessel_id": {
            "$ref": "#/components/schemas/UUID",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "certificate_type_id": {
            "$ref": "#/components/schemas/UUID",
            "example": "660e8400-e29b-41d4-a716-446655440001"
          },
          "reason": {
            "type": "string",
            "example": "Annual survey and class renewal"
          },
          "target_port": {
            "type": "string",
            "example": "Port of Singapore"
          },
          "target_date": {
            "type": "string",
            "format": "date",
            "example": "2026-03-15"
          }
        }
      },
      "JobAssignRequest": {
        "type": "object",
        "required": [
          "surveyorId"
        ],
        "properties": {
          "surveyorId": {
            "$ref": "#/components/schemas/UUID",
            "example": "770e8400-e29b-41d4-a716-446655440002"
          }
        }
      },
      "JobStatusUpdateRequest": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string",
            "enum": [
              "CREATED",
              "GM_APPROVED",
              "TM_PRE_APPROVED",
              "ASSIGNED",
              "SURVEY_DONE",
              "TO_APPROVED",
              "TM_FINAL",
              "PAYMENT_DONE",
              "CERTIFIED",
              "REJECTED"
            ],
            "example": "ASSIGNED"
          },
          "remarks": {
            "type": "string",
            "example": "Job assigned to surveyor"
          }
        }
      },
      "JobReassignRequest": {
        "type": "object",
        "required": [
          "surveyorId",
          "reason"
        ],
        "properties": {
          "surveyorId": {
            "$ref": "#/components/schemas/UUID"
          },
          "reason": {
            "type": "string",
            "example": "Original surveyor unavailable"
          }
        }
      },
      "JobEscalateRequest": {
        "type": "object",
        "required": [
          "reason",
          "target_role"
        ],
        "properties": {
          "reason": {
            "type": "string",
            "example": "Urgent client request"
          },
          "target_role": {
            "type": "string",
            "enum": [
              "GM",
              "ADMIN"
            ],
            "example": "GM"
          }
        }
      },
      "JobActionRequest": {
        "type": "object",
        "properties": {
          "reason": {
            "type": "string",
            "example": "Client requested cancellation"
          }
        }
      },
      "VesselSummary": {
        "type": "object",
        "properties": {
          "id": {
            "$ref": "#/components/schemas/UUID"
          },
          "vessel_name": {
            "type": "string",
            "example": "SEA MAJESTY"
          },
          "imo_number": {
            "type": "string",
            "example": "IMO9876543"
          },
          "flag_state": {
            "type": "string",
            "example": "Panama"
          }
        }
      },
      "JobResponse": {
        "type": "object",
        "properties": {
          "id": {
            "$ref": "#/components/schemas/UUID"
          },
          "vessel_id": {
            "$ref": "#/components/schemas/UUID"
          },
          "certificate_type_id": {
            "$ref": "#/components/schemas/UUID"
          },
          "reason": {
            "type": "string"
          },
          "target_port": {
            "type": "string"
          },
          "target_date": {
            "type": "string",
            "format": "date"
          },
          "job_status": {
            "type": "string",
            "enum": [
              "CREATED",
              "GM_APPROVED",
              "TM_PRE_APPROVED",
              "ASSIGNED",
              "SURVEY_DONE",
              "TO_APPROVED",
              "TM_FINAL",
              "PAYMENT_DONE",
              "CERTIFIED",
              "REJECTED"
            ]
          },
          "vessel": {
            "$ref": "#/components/schemas/VesselSummary"
          },
          "surveyor": {
            "type": "object",
            "properties": {
              "id": {
                "$ref": "#/components/schemas/UUID"
              },
              "name": {
                "type": "string"
              }
            }
          },
          "createdAt": {
            "$ref": "#/components/schemas/DateTime"
          }
        }
      },
      "PaymentInvoiceRequest": {
        "type": "object",
        "required": [
          "job_id",
          "amount"
        ],
        "properties": {
          "job_id": {
            "$ref": "#/components/schemas/UUID",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "amount": {
            "type": "number",
            "format": "double",
            "example": 3500
          },
          "currency": {
            "type": "string",
            "default": "USD",
            "example": "USD"
          }
        }
      },
      "PaymentWriteoffRequest": {
        "type": "object",
        "required": [
          "paymentId",
          "reason"
        ],
        "properties": {
          "paymentId": {
            "$ref": "#/components/schemas/UUID"
          },
          "reason": {
            "type": "string",
            "example": "Bad debt"
          }
        }
      },
      "PaymentResponse": {
        "type": "object",
        "properties": {
          "id": {
            "$ref": "#/components/schemas/UUID"
          },
          "job_id": {
            "$ref": "#/components/schemas/UUID"
          },
          "invoice_number": {
            "type": "string",
            "example": "INV-2026-001"
          },
          "amount": {
            "type": "number"
          },
          "currency": {
            "type": "string"
          },
          "payment_status": {
            "type": "string",
            "enum": [
              "UNPAID",
              "PAID",
              "ON_HOLD"
            ]
          },
          "payment_date": {
            "type": "string",
            "format": "date-time"
          },
          "receipt_url": {
            "type": "string"
          }
        }
      },
      "VesselCreateRequest": {
        "type": "object",
        "required": [
          "client_id",
          "vessel_name",
          "imo_number",
          "flag_state",
          "ship_type"
        ],
        "properties": {
          "client_id": {
            "$ref": "#/components/schemas/UUID",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "vessel_name": {
            "type": "string",
            "example": "SEA MAJESTY"
          },
          "imo_number": {
            "type": "string",
            "example": "IMO9876543"
          },
          "call_sign": {
            "type": "string",
            "example": "HPAB"
          },
          "mmsi_number": {
            "type": "string",
            "example": "370961000"
          },
          "flag_state": {
            "type": "string",
            "example": "Panama"
          },
          "port_of_registry": {
            "type": "string"
          },
          "year_built": {
            "type": "integer",
            "example": 2015
          },
          "ship_type": {
            "type": "string",
            "example": "Cargo"
          },
          "gross_tonnage": {
            "type": "number",
            "example": 25000
          },
          "net_tonnage": {
            "type": "number",
            "example": 12000
          },
          "deadweight": {
            "type": "number"
          },
          "class_status": {
            "type": "string",
            "enum": [
              "ACTIVE",
              "SUSPENDED",
              "WITHDRAWN"
            ]
          },
          "current_class_society": {
            "type": "string"
          },
          "engine_type": {
            "type": "string"
          },
          "builder_name": {
            "type": "string"
          }
        }
      },
      "VesselUpdateRequest": {
        "type": "object",
        "properties": {
          "client_id": {
            "$ref": "#/components/schemas/UUID"
          },
          "vessel_name": {
            "type": "string"
          },
          "imo_number": {
            "type": "string"
          },
          "call_sign": {
            "type": "string"
          },
          "mmsi_number": {
            "type": "string"
          },
          "flag_state": {
            "type": "string"
          },
          "port_of_registry": {
            "type": "string"
          },
          "year_built": {
            "type": "integer"
          },
          "ship_type": {
            "type": "string"
          },
          "gross_tonnage": {
            "type": "number"
          },
          "net_tonnage": {
            "type": "number"
          },
          "deadweight": {
            "type": "number"
          },
          "class_status": {
            "type": "string",
            "enum": [
              "ACTIVE",
              "SUSPENDED",
              "WITHDRAWN"
            ]
          },
          "current_class_society": {
            "type": "string"
          },
          "engine_type": {
            "type": "string"
          },
          "builder_name": {
            "type": "string"
          }
        }
      },
      "VesselResponse": {
        "type": "object",
        "properties": {
          "id": {
            "$ref": "#/components/schemas/UUID"
          },
          "client_id": {
            "$ref": "#/components/schemas/UUID"
          },
          "vessel_name": {
            "type": "string"
          },
          "imo_number": {
            "type": "string"
          },
          "call_sign": {
            "type": "string"
          },
          "mmsi_number": {
            "type": "string"
          },
          "flag_state": {
            "type": "string"
          },
          "port_of_registry": {
            "type": "string"
          },
          "year_built": {
            "type": "integer"
          },
          "ship_type": {
            "type": "string"
          },
          "gross_tonnage": {
            "type": "number"
          },
          "net_tonnage": {
            "type": "number"
          },
          "deadweight": {
            "type": "number"
          },
          "class_status": {
            "type": "string",
            "enum": [
              "ACTIVE",
              "SUSPENDED",
              "WITHDRAWN"
            ]
          },
          "current_class_society": {
            "type": "string"
          },
          "engine_type": {
            "type": "string"
          },
          "builder_name": {
            "type": "string"
          },
          "Client": {
            "type": "object",
            "properties": {
              "id": {
                "$ref": "#/components/schemas/UUID"
              },
              "company_name": {
                "type": "string"
              }
            }
          }
        }
      }
    }
  },
  "security": [
    {
      "bearerAuth": []
    }
  ]
}